//15.136.1-es2019 2025-10-02T09:02:19.931Z (41f0671f5c2b8)
var CS_CONF={"collectionEnabled":true,"useSentry":false,"projectId":21072,"status":1,"hostnames":["theoutnet.com","ton-e2e-master.eks-dev.inseason.aws.dev.e-comm"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":1,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":1656003869,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":0,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":0,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":"replayRecordingUnmaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-eu1.az.contentsquare.net","malkaRecordingDomain":"k-eu1.az.contentsquare.net","staticResourceManagerDomain":"srm.aa.contentsquare.net","voc":{"siteId":null,"enabled":0}};
var CS_INTEGRATIONS_CONF = {"optimizely":{}};
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
(()=>{var Th=Object.defineProperty;var Ah=(s,r,t)=>r in s?Th(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var ce=(s,r,t)=>Ah(s,typeof r!="symbol"?r+"":r,t);var ie={};ie.d=(s,r)=>{for(var t in r)ie.o(r,t)&&!ie.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};ie.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ie.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);ie.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var mn={};ie.r(mn);ie.d(mn,{getRequestParameters:()=>dg});function hs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}function qt(s){return Q(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Cs(s){return s===parseInt(s,10)}function z(s){return Q(s)&&(typeof s=="string"||s instanceof csString)}function Bi(s){return typeof s=="boolean"}function Is(s){return typeof s=="object"}function Q(s){return typeof s!="undefined"}function bt(s){return Q(s)&&s!==null}function ba(s){return typeof s=="object"&&s!==null}function bh(s,r,t){return Cs(s)&&s>=r&&s<=t}function $r(s){for(let r in s)return!1;return!0}function ze(s){return typeof s=="function"}function oi(s){return s instanceof Element}function Ge(s){return s instanceof Error}function zr(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var ai=typeof window=="undefined";function Rh(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ie.g!="undefined"?ie.g:typeof process!="undefined"?process:Function("return this")()}var Z=Rh();var rt=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})(),mr={[rt.debug]:0,[rt.warn]:1,[rt.implementation]:1,[rt.error]:2,[rt.critical]:3},nt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Ch(s){nt=s}var V=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return os(n,a.bind(this))(...c)}}};function os(s,r){return function(...t){try{let e=r.apply(this,t);return Q(Z.Promise)&&e instanceof Z.Promise?e.then(i=>i,i=>nt.error(Ge(i)?i:new Error(i),s)):e}catch(e){try{nt.error(Ge(e)?e:new Error(e),s)}catch{}}}}function at(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function yn(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function uo(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Ra(s){let r=self.atob(s);return yn(r)}function Gr(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function po(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){nt.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Ra(e[1]):yn(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ca=typeof performance!="undefined"&&!!performance.now,fo=Ca?()=>performance.now():()=>csDate.now(),Ih=(()=>{var s,r;return Ca?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),En=34164e6,O={now(){return Math.round(fo()+Ih)},elapsed(){return fo()}};function go(){return Math.floor(O.now()/1e3)}function Ia(){return typeof window.Promise=="function"}function Ph(){var s;return typeof crypto!="undefined"&&ze((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function mo(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function kt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ci(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var Oh=Number.MAX_SAFE_INTEGER||9007199254740991,as={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Oh){return Math.floor(Math.random()*s)}};function Qs(s,r){let t,e,i,n,a,c=null,l=y=>{let p=O.elapsed();if(!y&&c!==null){let m=r-(p-c);if(m>=1){i=Z.csSetTimeout(l,m);return}}let E=p-n;i=null,c=null,n=null,a=s.apply(t,[E,...e])},u=function(){if(t=this,e=arguments,n){c=O.elapsed();return}return n=O.elapsed(),i=Z.csSetTimeout(l,r),a};return u.flushPending=()=>{i&&(Z.csClearTimeout(i),l(!0))},u.cancel=()=>{c=null,n=null,i&&(Z.csClearTimeout(i),i=null)},u}function Nh(s=0){return(r,t,e)=>{e.value=Qs(e.value,s)}}var Zs=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,n=>({name:this.name,parameter:n,value:Math.round(t[n])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,at([V()],s.prototype,"flush",null),s})(),mt=(()=>{class s extends Zs{constructor(t,e=100){super(t),this.ly=e,this.values={},e&&(this.debouncedFlush=Qs(()=>this.flush(),this.ly))}count(t,e=1){Zs.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),yo=(()=>{class s extends Zs{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Mh=(()=>{class s extends Zs{add(t,e){var i,n,a,c,l,u,y;let p=E=>this.values[`${t}.${E}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(u=this.values)[y=`${t}.total`])!==null&&n!==void 0||(u[y]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((a=p("max"))!==null&&a!==void 0?a:0,e),this.values[`${t}.average`]=p("total")/p("count")}}return s})(),q={counters:{commandsFromIntegrations:new mt("commands-from-integrations"),commandsFromCSTC:new mt("commands-from-cstc"),commandsFromIframe:new mt("commands-from-iframe"),commandApplied:new mt("command-applied"),commandError:new mt("command-error"),commandMisuse:new mt("command-misuse"),CSTCSnippetUsed:new mt("cstc-snippet-used"),redactedPII:new mt("redacted-pii"),pageAnonymisation:new mt("page-anonymisation"),patchedNativeFunctions:new mt("patched-native-functions"),pureWindowState:new mt("pure-window-state"),sensitiveElements:new mt("sensitive-elements"),cspErrors:new mt("csp-errors"),networkRequests:new mt("network-requests"),webVitalsErrors:new mt("web-vitals-errors"),trackedFeatures:new mt("tracked-features"),longTasks:new yo("longTasks"),tasks:new yo("tasks"),errors:new mt("errors"),methodPerformance:new Mh("perf")},setService(s){Zs.setGlobalService(s)}},li=(()=>{class s{constructor(){this.go=0}get length(){return this.go}get isEmpty(){return!this.Ms}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.go++,this.kr?this.kr=this.kr[1]=[t,void 0]:this.kr=this.Ms=[t,void 0]}pop(){if(!this.Ms)return null;this.go--;let t=this.Ms[0];return this.Ms=this.Ms[1],this.Ms||(this.kr=void 0),t}forEach(t){let e=this.Ms;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.go=0,this.Ms=this.kr=void 0}}return s})(),qr=0,Sn=s=>{qr++,csQueueMicrotask(()=>us(()=>{try{s()}finally{qr--}},re.MicroTask))},Fi=new li,$i=new li;function Vt(s,r="high"){Fi.isEmpty&&$i.isEmpty&&Pa(kh),r==="high"?$i.push(Eo(s)):Fi.push(Eo(s))}function Pa(s,r=10){r===0?Sn(s):csQueueMicrotask(()=>Pa(s,r-1))}function kh(){for(;!$i.isEmpty;)$i.pop()();for(;!Fi.isEmpty;)Fi.pop()()}async function Oa(s=1){for(let r=0;r<s;r++)await new Promise(t=>Vt(t))}function Eo(s){return function(){try{s.apply(window,arguments)}catch(r){nt.critical(r)}}}var Vi="null",Ue=null,Na=[],Dh=()=>{var s;return ai||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!ai&&Dh()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Ue=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Wr({type:"UXA_EVENT",event:s.detail})}),Ue.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Vi)return;Vi=s.data.sessionId,csArray.prototype.forEach.call(Na,r=>r()),Ue==null||Ue.postMessage({type:"CONNECTED",sessionId:Vi})}}));function xh(s){ai||(Vi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Na,s)))}function Wr(s){Ue==null||Ue.postMessage(s)}function ti(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Be(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function Lh(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let a=r(s[n]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Ma(s,r){let t=[];return Lh(s,r,e=>csArray.prototype.push.call(t,e)),t}function K(s,r){if(Vh(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Vh(s){return s.length>=0}function je(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Uh(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function ka(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function jh(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let a=0;a<s.length;a++)i[n++]=s[a];for(let a=0;a<r.length;a++)i[n++]=r[a];if(!t)return i;for(let a=0;a<t.length;a++)i[n++]=t[a];return i}function So(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function Ns(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}var hi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),le=(()=>{class s extends hi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var vo=(()=>{class s extends hi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),he=(()=>{class s extends hi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=O.elapsed();t(),this.count++;let i=O.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=O.elapsed();return()=>{this.count++;let e=O.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Hh=(()=>{class s extends hi{constructor(){super("INP","Value: {value}")}getData(){return{value:Ot.tasks.eventListener.max}}}return s})(),Ot={general:{category:"General",nbEvents:new le("Nb of Events"),pendingTasks:new le("Pending Tasks"),pendingEvents:new le("Pending Tasks"),nbOfMutationObservers:new vo("Nb of Mutation Observers"),inp:new Hh},mutations:{category:"Mutations",initialDOM:new he("Initial DOM"),pendingMutations:new le("Nb of Mutations scheduled"),serializedMutations:new he("Serialized Mutations"),count:new le("Mutation Count"),elementMutationObserved:new vo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new he("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new le("Nb of Hidden Elements "),nbElements:new le("Nb of  Elements")},tasks:{category:"Tasks",tasks:new le("Tasks"),errors:new le("Errors"),timer:new he("Timers"),microtask:new he("Microtasks"),mutationObserver:new he("MutationObserver"),monkeyPatch:new he("MonkeyPatch"),eventListener:new he("EventListener"),intersectionObserver:new he("Intersection")}};function Bh(){let s=null;xh(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(Ot),n=>Ot[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),a=>n[a]),a=>a instanceof hi));Wr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,a)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[a],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{us(()=>{let n=Ma(Be(e,a=>Be(a,c=>c.getData())),a=>a);Wr({type:"UXA_PERFORMANCE_COUNTER",event:n})},re.Timer)},1e3))})}var re=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),$t=null;async function us(s,r,t=null){if($t&&r!==re.MicroTask)return s();t&&($t=t),$t||($t={type:r,elapsed:0},Ot.tasks.tasks.increase());try{$t.elapsed+=Fh(s)}catch(e){Ot.tasks.errors.increase(),nt.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{qr<=0&&(Ot.tasks[$t.type].elapsed($t.elapsed),$t.elapsed>50?q.counters.longTasks.push($t.elapsed):q.counters.tasks.push($t.elapsed),$t=null)}}function Fh(s){let r=O.elapsed();return s(),O.elapsed()-r}var yr,$h="cs-native-frame";var Ie={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Da(s,r){let t=hs(window,s);return function(e,i){return t(()=>us(e,r),i)}}window.csSetTimeout=Da("setTimeout",re.Timer);window.csSetInterval=Da("setInterval",re.Timer);window.csQueueMicrotask=(yr=hs(window,"queueMicrotask"))!==null&&yr!==void 0?yr:setTimeout;window.csClearTimeout=hs(window,"clearTimeout");window.csClearInterval=hs(window,"clearInterval");window.csFileReader=hs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function zh(){let s=document.createElement("iframe");s.id=$h,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Gh(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function qh(s,r,t){let e=Gh(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function xa(s){var r,t;Object.keys(Ie.constructors).forEach(i=>{window[Ie.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Xh(s);let e=s.MutationObserver;("Prototype"in window||Yh())&&(e=(t=(r=hs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=_o(window.IntersectionObserver,re.IntersectionObserver),window.csMutationObserver=_o(e,re.MutationObserver),Es("csNode",Ie.nodeProperties,s.Node.prototype,"get"),Es("csElement",Ie.elementProperties,s.Element.prototype,"get"),Es("csElement",Ie.elementPropertiesValues,s.Element.prototype,"value",!1),Es("csHTMLImageElement",Ie.imageProperties,s.HTMLImageElement.prototype,"set"),Es("csEvent",Ie.eventProperties,s.Event.prototype,"get"),Es("csNavigator",Ie.navigatorProperties,s.navigator,"value")}function Es(s,r,t,e,i=!0){r.forEach(n=>{let a=typeof n!="string"&&"binding"in n,c=a?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=qh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function vn(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function Wh(){try{let s=zh();return s?(window.CSPureWindow=s,xa(window.CSPureWindow),!0):!1}catch(s){return vn("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!Wh())try{xa(Z)}catch(s){vn("Critical",`failed to copy references from window: ${s.message}`)}function Yh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Xh(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function _o(s,r){try{let t=function(e,i){return new s((a,c)=>{us(()=>e(a,c),r)},i)};return t.base=s,t}catch{return vn("Warning",`failed to extends ${s.name}`),s}}var rs=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(a){return csString.prototype.replace.call(a,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(a){return csString.prototype.replace.call(a,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(a,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(a,c,l);let u=new csRegExp(t(c),"g");return csString.prototype.replace.call(a,u,l)}r.stringReplaceAll=i;function n(a,c,l=""){return a.length<=c?a:csString.prototype.slice.call(a,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Yr(s){return rs.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Kh(s){let r=s.getAttribute("id");return r&&rs.escapeInvalidCharacters(r)}function ot(s){return s.nodeType===1}function zi(s){return s.nodeType===3}function Jh(s){return s.nodeType===8}function La(s){return ot(s)&&s.localName==="link"}function Qh(s){return ot(s)&&s.localName==="source"}function Va(s){return ot(s)&&s.localName==="a"}function _n(s){return La(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Zh(s){return ot(s)&&s.localName==="img"}function Qi(s){return ot(s)&&s.localName==="style"}function Zi(s){return ot(s)&&s.localName==="input"}function wn(s){return ot(s)&&s.localName==="textarea"}function tr(s){return ot(s)&&s.localName==="script"}function tu(s){return ot(s)&&s.localName==="button"}function Ms(s){return ot(s)&&"ownerSVGElement"in s}function Tn(s){return ot(s)&&s.localName==="select"}function eu(s){return ot(s)&&s.localName==="details"}function su(s){return ot(s)&&s.localName==="summary"}function iu(s){return Ms(s)&&s.localName==="image"}function ru(s){return Ms(s)&&s.localName==="use"}function nu(s){return Ms(s)&&s.localName==="feImage"}function ou(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function au(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Gi(s){return s.nodeType===9}function ei(s){return ou(s)&&"host"in s&&"mode"in s}function Ua(s){return ot(s)&&!!csElementshadowRoot.apply(s)&&ei(csElementshadowRoot.apply(s))}var cu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function lu(s){return ot(s)&&bt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(cu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var ui="detached";function ja(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return qi(r)&&csArray.prototype.push.call(t,ui),{ancestors:t,selectionRoot:r}}function hu(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&Va(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return qi(r)&&csArray.prototype.push.call(t,ui),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function qi(s){return ge.isValidElement(s)}var es=(()=>{var s,r;return(r=(s=Z.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Qt=es.matches||es.matchesSelector||es.mozMatchesSelector||es.msMatchesSelector||es.oMatchesSelector||es.webkitMatchesSelector,wo=es.closest,Ha=9;function uu(s,r){return r?csArray.prototype.some.call(r,t=>Qt.call(s,t)):!1}function du(s,r,t){if(s===ui||s.nodeType===Ha)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Yr(r),a=0,c=r.previousElementSibling;for(;c;)(Yr(c)===n||i&&(e!=null&&e.test(c.localName)))&&!uu(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;return a}function pu(s,r,t){if(s===ui||s.nodeType===Ha)return 0;let e=0,i=r.previousElementSibling;for(;i;)Qt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var fu=[/\d{4}/,/^ember\d+$/],gu="@",An="data-cs-override-id",mu="data-cs-dynamic-id";function Ba(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,a=Yr(s);if(n&&n.test(s.localName)&&(a=csString.prototype.replace.call(a,n,`$1${gu}`)),Su(s,t)){let E=bn(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${An}="${E}"]`}}let c=Ru(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=yu(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let u=Kh(s);if(_u(s,u,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${u}`};let y=Eu(s,e);if(y){let E=pu(r,s,y);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${y}](${E})`}}let p=du(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${p})`}}function yu(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Qt.call(s,e)&&bu(e,r))return e}}function Eu(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Qt.call(s,t))return t}}function Su(s,r){let t=bn(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Rn(An,t,r)}function vu(s){return bn(s)!==null}function bn(s){return s.getAttribute(An)}function _u(s,r,t,e){return r&&!vu(s)&&!wu(s,r,e)&&Au(r,t)}function wu(s,r,t){return s.hasAttribute(mu)||Tu(r,t)}function Tu(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(fu,e=>e.test(s))||t)}function Au(s,r){return s&&Rn("id",s,r)}function Rn(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function bu(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Ru(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Rn(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Xr=11;function Wi(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return To(e,t);let i=e,n=s[0],{elementSelector:a,hasUniqueIdentifier:c}=Ba(i,n,r,t);if(!t.fullPath&&c){let u=s[s.length-1];return`${To(u,t)}${a}`}let l=Wi(s,r,t);return`${l?`${l}>`:""}${a}`}function To(s,r){if(s===ui)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=ja(s.host);return`${Wi(t,e,r)}|shadow-root|`}return s.nodeType===Xr?"|fragment|":""}var Fa=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Cu=(()=>{class s extends Fa{constructor(){super(...arguments),this.mo=!1,this.yo=!1,this.lc=!1}hy(t,e){return this.mo&&!(e===null&&qi(t))&&t.nodeType!==Xr&&!t.host}uy(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.hy(t,e))return;let a=!1;e===null&&qi(t)&&(a=!0,this.done=!0);let c=this.yo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.lc=!0,this.mo=!1,this.yo=!1),!l&&e===null&&t.nodeType===Xr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.uy(t))return;let u=e!=null?e:"detached",{elementSelector:y,hasUniqueIdentifier:p}=Ba(t,u,i,this.options);p&&(this.yo=!0,this.mo=!this.options.fullPath);let E=`${a?`|detached|${c}`:""}${this.mo&&!p?"":y}`,v=!p&&this.yo&&!this.options.fullPath?"":this.path&&!this.lc?">":"";this.lc=!1,this.path=`${E}${v}${this.path}`}}return s})();function Jt(s,r=At.SHOW_ALL){let t=r|At.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Ao(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(n){let u=n;return n=null,u}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Ao(c);if(r&At.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Sr[c.nodeType]&r)!==0)return c}return null},visitAll(a){Sr[s.nodeType]&r&&a(s);let c=this.nextNode();for(;c;){if((Sr[c.nodeType]&r)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},find(a){let c;return this.visitAll(l=>a(l)&&(c=l)),c},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function Ao(s){return s&&Ua(s)?s.shadowRoot:null}var Er=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:{}})(),At=(()=>{var s;return(s=Z.NodeFilter)!==null&&s!==void 0?s:{}})(),Sr={2:At.SHOW_ATTRIBUTE,4:At.SHOW_CDATA_SECTION,8:At.SHOW_COMMENT,11:At.SHOW_DOCUMENT_FRAGMENT,9:At.SHOW_DOCUMENT,10:At.SHOW_DOCUMENT_TYPE,1:At.SHOW_ELEMENT,[Er.ENTITY_NODE]:At.SHOW_ENTITY,[Er.ENTITY_REFERENCE_NODE]:At.SHOW_ENTITY_REFERENCE,[Er.NOTATION_NODE]:At.SHOW_NOTATION,7:At.SHOW_PROCESSING_INSTRUCTION,3:At.SHOW_TEXT},$a=!1,Kr=5;function Iu(s=5){$a=nt.isPerfLoggingActive(),Kr=s}function ds(s,r){return function(){if(!$a)return s.apply(this,arguments);let t=O.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=O.elapsed()-t;i>=Kr&&q.counters.methodPerformance.add(r,i)});else{let i=O.elapsed()-t;i>=Kr&&q.counters.methodPerformance.add(r,i)}return e}}var Rt=function(s){return function(r,t,e){let i=e.value;e.value=ds(i,s)}},ns=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&Ua(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return Jt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}r.getAllShadowHosts=ds(i,"getAllShadowHosts")}(s||(s={})),s})(),ut=(()=>{let s;return function(r){function t(){let p=[i()];return document.documentElement&&csArray.prototype.push.call(p,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(p,document.body.scrollHeight,document.body.offsetHeight),Math.max(...p)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function a(){let p=window.csScreen.width;return Cs(p)&&p>0?p:window.screen.width}r.screenWidth=a;function c(){let p=window.csScreen.height;return Cs(p)&&p>0?p:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function u(){return window.pageYOffset}r.windowOffsetY=u;function y(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}r.getRequestParameters=y}(s||(s={})),s})(),vr=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:Object})(),dt=(()=>{let s;return function(r){let t="isConnected"in vr.prototype?T=>T.isConnected:T=>!T.ownerDocument||!(T.ownerDocument.compareDocumentPosition(T)&T.DOCUMENT_POSITION_DISCONNECTED);function e(T,k){for(let L=T;L;L=csNodenextSibling.apply(L))k(T)}r.forEachChild=e;function i(T){return t(T)}r.isConnected=i;function n(T,k){let L=[];for(let H of l(T,k))csArray.prototype.push.call(L,H);return L}r.getAncestors=n;let a=(T,k)=>{var L;return(L=csNodeparentNode.apply(T))!==null&&L!==void 0?L:k&&ei(T)?T.host:null};function c(T,k,L=!1){let H=T;for(;H;){if(k(H))return H;let st=a(H,L);if(st&&st!==H)H=st;else break}return null}r.findAncestor=c;function*l(T,k=!1){let L=T;for(;L;){yield L;let H=a(L,k);if(H&&H!==L)L=H;else break}}r.walkUp=l;function u(T,k){if(T===k||k.contains(T))return!0;let L=r.getParentElement(T);return L&&L!==T?u(L,k):!1}r.isDescendantOf=u;function y(T){var k;return T.parentElement?T.parentElement:r.getRootNode(T)?(k=r.getRootNode(T))===null||k===void 0?void 0:k.host:null}r.getParentElement=y;function p(T,k=document){let L=ti(window.csquerySelectorAll[k.nodeType].call(k,T)),H=ns.getAllShadowHosts(k);for(let st of H){let Tt=ns.getShadowRoot(st);if(!Tt)continue;let Ct=ti(window.csquerySelectorAll[Tt.nodeType].call(Tt,T));csArray.prototype.push.call(L,...Ct)}return L}r.findAllElements=p,r.getRootNode=(()=>{if("getRootNode"in vr.prototype)return(L,H)=>L.getRootNode(H);function T(L){let H=k(L);return ei(H)?T(H.host):H}function k(L){return csNodeparentNode.apply(L)!=null?k(csNodeparentNode.apply(L)):L}return(L,H)=>typeof H=="object"&&!!H.composed?T(L):k(L)})();function E(T){return T==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(T)}function m(T){let k=T.getBoundingClientRect();return k.right+ut.windowOffsetX()<0||k.bottom+ut.windowOffsetY()<0}function v(T){var k,L;if(((k=T.checkVisibility)===null||k===void 0?void 0:k.call(T,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!T.offsetParent){if(!T.getBoundingClientRect)return nt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${T instanceof vr} Ctor: ${(L=T==null?void 0:T.constructor)===null||L===void 0?void 0:L.name}`),!1;let Tt=T.getBoundingClientRect();if(Tt.width==0&&Tt.height==0)return!0}let H=window.getComputedStyle(T);return H?H.display==="none"||H.visibility==="hidden"||H.visibility==="collapse"||H.opacity==="0"||H.filter==="opacity(0)"||H.width==="0px"&&H.height==="0px"||E(H.color):!0}r.isHiddenByCSS=v;function C(T){if(v(T))return!0;let L=y(T);return L!=null&&C(L)}r.areAncestorsHiddenByCSS=C;function I(T){let k=null,L=T;do if(v(L))k=L;else break;while(L=y(L));return k}r.getTopAncestorHiddenByCSS=I;function S(T){let k=_(T);return k!==null&&!T.contains(k)&&!k.contains(T)}function _(T){let k=T.getBoundingClientRect(),L=k.left+.5*k.width,H=k.top+.5*k.height;return N(document,L,H)}r.getTopElement=_;function P(T){if(!T.getBoundingClientRect)return null;let k=T.getBoundingClientRect(),L=k.x+k.width/2,H=k.y+k.height/2;return r.getTopElementFromPoint(document,L,H)}r.getElementOnTop=P;function N(T,k,L){let H=T.elementFromPoint(k,L);if(!H)return null;let st=ns.getShadowRoot(H);return st&&st!=r.getRootNode(document.body)&&st!==T?N(st,k,L):H}r.getTopElementFromPoint=N;function A(T){return!m(T)&&!v(T)&&!S(T)}r.isVisibleInDocument=A;function j(T){return v(T)?!1:tt(T)}r.isVisibleInViewportInForeground=j;function tt(T){let k=_(T);return k===null?!1:T===k?!0:wt(T)?T.textContent!==""&&k.contains(T):T.contains(k)}r.isInViewPort=tt;function ct(T,k,L){let H=T.getAttributeNS(k,L);return H===""?T.hasAttributeNS(k,L)?H:null:H}r.getAttributeNS=ct;function jt(T){return!!(T.hasAttribute("tabIndex")||T.getAttribute("contentEditable")==="true"||Va(T)&&T.hasAttribute("href")||(Tn(T)||wn(T)||Zi(T)||tu(T))&&!T.hasAttribute("disabled")||eu(T)||su(T))}r.isElementFocusable=jt;function wt(T){return T.localName==="span"||T.localName==="a"||T.localName==="b"||T.localName==="i"||T.localName==="button"||T.localName==="input"||T.localName==="label"||T.localName==="cite"||T.localName==="small"||T.localName==="strong"||T.localName==="code"||T.localName==="abbr"||T.localName==="em"||T.localName==="dfn"||T.localName==="time"||T.localName==="output"||T.localName==="object"||T.localName==="sub"}r.isInlineElement=wt}(s||(s={})),s})(),Pu=(()=>{class s{constructor(t){this.dy=t}run(t){let e=[...this.dy],i=dt.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.py(e,a,c,n),this.fy(e),e.length===0)break;i.length===0&&a.host&&(i=dt.getAncestors(a.host,!1),n=i[i.length-1])}}py(t,e,i,n){for(let a of t)a.serializeElement(e,i,n)}fy(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Ou=(()=>{class s extends Fa{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.gy(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}gy(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.my(t.id),t.classList&&(e+=this.yy(csArray.from(t.classList))),t.attributes&&(e+=this.Ey(t)),e}my(t){return t?`#${t};`:""}yy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Sy(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Ms(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Zi(t)&&e==="value"}vy(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}_y(t){let e={};for(let i of csArray.from(t.attributes))this.Sy(t,i.name)||(e[i.name]=i.value);return e}Ey(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this._y(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.vy(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),ge=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,u={fullPath:!1,dynamicIdRegex:null}){let y=a(c);if(y===document)return{path:"",hierarchy:""};if(!t(y))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let p=new Cu(u),E=new Ou(l);return new Pu([p,E]).run(y),{path:p.getPath(),hierarchy:E.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return"";if(!t(u))return r.INVALID_ELEMENT;let{ancestors:y,selectionRoot:p}=ja(u);return Wi(y,p,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let u=a(c);if(u===document)return{path:"",firstAnchorParent:null};if(!t(u))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:y,ancestors:p,selectionRoot:E}=hu(u);return{path:Wi(p,E,l),firstAnchorParent:y}}r.getElementPathAndFirstAnchorParent=n;function a(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||ge;var za=["t.contentsquare.net","clicktale"],Nu=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(za,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,U.critical(t)}};window.addEventListener("error",Nu);var U=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(za,t)}static setStrategy(t){s.Gi=t}static computeIsActive(t){s.He=as.boolean(t),s.He?s.hc=as.boolean(10):s.hc=!1}static isLoggingActive(){return s.He}static getStrategy(){return s.Gi}static debug(t,e=""){s.He&&this.Gi.send(t,e,rt.debug)}static warn(t,e=!0,i=""){var n;q.counters.errors.count("warning"),s.He&&e&&this.Gi.send(t,i,rt.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.He&&this.Gi.send(t,e,rt.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.He&&this.Gi.send(t,e,rt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.Gi.send(t,e,rt.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return Q(Z.Promise)&&n instanceof Z.Promise?n.then(a=>a,a=>s.error(Ge(a)?a:new Error(a),t)):n}catch(n){try{s.error(Ge(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.hc}}return s.He=!1,s.hc=!1,s})();var Mu=/^\d+\.\d+(?:\.\d+)?$/,ku=s=>{if(!Mu.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},Du=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,xu=(s,r)=>Du(s,r)>=0;function se(s){return kt(s,"data:")}function Lu(s){return kt(s,"#")}function Vu(s){return!!s&&(ci(s,".css")||kt(s,"https://fonts.googleapis.com/css"))}var Uu=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Ga=s=>{let r=new Set(Uu);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},ju=["svg","slot"],Hu=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(ju,s)>-1,qa={href:new Set(["a"]),src:new Set(["iframe"])},Bu=s=>qa.hasOwnProperty(s),Fu=(s,r,t)=>{var e;return((e=qa[r])===null||e===void 0?void 0:e.has(s))&&!se(t)},$u=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function _r(s){return s?zu(s):null}function zu(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var Gu=1,qu="f553e78fb58e051e51fe8074c4c6e73e",Jr=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Wu=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,y,p,E,m,v,C,I;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||En,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((a=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&a!==void 0)||a),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(u=t.apiErrorsEnabled)!==null&&u!==void 0?u:0,...t.apiErrors},this.customErrors={enabled:(y=t.customErrorsEnabled)!==null&&y!==void 0?y:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=_r(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=_r(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=_r(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(p=t.recordingUrlRules)!==null&&p!==void 0?p:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((E=t.uxaDomain)===null||E===void 0?void 0:E.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(m=t.anonymizeDigits)!==null&&m!==void 0?m:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(v=t.recordTargetingRules)!==null&&v!==void 0?v:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(C=t.collectTargetText)!==null&&C!==void 0?C:Jr.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(I=t.quotas)!==null&&I!==void 0?I:null}getTrackerUri(){return`${this.cs()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.cs()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${qu}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.cs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.cs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.cs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.cs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.cs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.cs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.cs()}://${this.paProxyDomainUri}`}cs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Gu}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,a]=i;this.wy(n,a)}})}wy(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.nd()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.nd())return!0;let t=ku(this.getHeapVersion()||"");if(t&&t.major===4&&xu(t,{major:4,minor:23,patch:5}))return!0}return!1}nd(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Jr.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),Yu=(()=>{class s{constructor(t,e){this.Eo=t,this.od=e}init(){this.ad=this.Eo!==this.Eo.top,this.cd=this.od.isWebView&&this.Eo===this.Eo.top,this.od.iframesTracking&&this.ad||this.cd?this.ld=!1:this.ld=!0}isInIframeContext(){return this.ad}isTopWindowTracker(){return this.ld}isInWebViewContext(){return this.cd}}return s})();function Yi(){}function Qr(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function Wa(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var wr=csSymbol("cachedJson");function Xu(s){if(s[wr])return s[wr];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+cs(s[0]);for(let t=1;t<s.length;t++)r+=","+cs(s[t]);return r+="]"}return s[wr]=csJSON.stringify(s)}var cs=typeof window.Symbol!="undefined"?Xu:csJSON.stringify;var si=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),Ya=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ps=(()=>{class s extends Ya{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.pc(t);let e=si.toQuery(t);this.Ty(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Ty(t){let e=new window.Image(1,1);e.onload=Yi,e.onerror=Yi,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}pc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var Ku=(()=>{class s{constructor(t,e){this.ls=t,this.Ay=e}init(){this.hs=new Ps(this.ls.getLoggerUri()),this.hs.setRequestParametersProviders(this,this.Ay)}send(t){this.So=t,this.hs.send()}getRequestParameters(){return{a:this.So.app,l:this.So.level,m:this.So.message,s:this.So.stacktrace}}}return s})(),Ju=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Qu=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Zu="CS_ANONYMIZED_EMAIL",Tr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",td=new csRegExp(`(ey${Tr}\\.ey${Tr}\\.${Tr})`,"g"),ed="CS_ANONYMIZED_JWT",sd=/[0-9]{4}/,id=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,rd="CS_ANONYMIZED_PII",nd="\u2022",od=/\d/g,ad=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,cd=/(?:\d{1,3}\.){3}\d{1,3}/,ld=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Pe=(()=>{let s;return function(r){function t(y){return csString.prototype.replace.call(y,Ju,Zu)}r.replaceEmail=t;function e(y){return csString.prototype.replace.call(y,td,ed)}r.replaceJWT=e;function i(y,p){return csString.prototype.replace.call(y,id,p)}r.replaceCreditCardNumber=i;function n(y){return csString.prototype.replace.call(y,od,nd)}r.replaceDigits=n;function a(y){return cd.test(y)||ld.test(y)}r.mayHaveIPAddress=a;function c(y){return ad.test(y)}r.mayHaveNumberSequence=c;function l(y){return sd.test(y)}r.mayHaveCreditCardNumber=l;function u(y){return Qu.test(y)}r.mayHaveEmail=u}(s||(s={})),s})(),di=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.by(this.fc(t));return e===!0?i=this.Ry(i):e===!1&&(i=this.Cy(i)),i}anonymizePII(t){return this.fc(t)}anonymizeJwt(t){return Pe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.fc(t[i])}),t}fc(t){if(Pe.mayHaveEmail(t)){let e=Pe.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}Ry(t){return Pe.replaceDigits(t)}Cy(t){return Pe.mayHaveNumberSequence(t)?Pe.replaceDigits(t):t}by(t){return Pe.mayHaveCreditCardNumber(t)?Pe.replaceCreditCardNumber(t,(e,i,n,a,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let u=a.length?csArray.prototype.join.call(csString.prototype.split.call(n,a),""):n;if(!this.Iy(u))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${rd}${c}`}):t}Iy(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let a=parseInt(t[n]);n%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),Xa="15.136.1";function Cn(){return{v:Xa}}var hd=(()=>{class s{constructor(t,e){this.f=t,this.M=e}getRequestParameters(){return{d:`${O.now()}`,p:this.M.anonymizePII(window.location.href),...this.f.getRequestParameters(),...Cn()}}}return s})(),ud="uxa",bo=5,dd="No stacktrace",Ka="snippet-",Ja="implementation-snippet-",Ro=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),pd=(()=>{class s{constructor(t,e,i){this.us=e,this.M=new di,this.ud=mr[rt.warn],this.ud=mr[t.minLogLevel||rt.warn],this.hs=i||new Ku(t,new hd(t,this.M)),this.dd={[rt.debug]:[],[rt.warn]:[],[rt.implementation]:[],[rt.error]:[],[rt.critical]:[]},this.vo={implementation:{},dynamic:{}},this.hs.init()}send(t,e="",i=rt.warn){if(!this.Py(i,e))return;csArray.prototype.push.call(this.dd[i],e||"");let n={message:this.Oy(t,e),stacktrace:this.Ny(t),app:ud,level:i};this.hs.send(n)}Oy(t,e){let i=Ge(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Ny(t){return Ge(t)?`${t.stack||dd} ${this.Dr()}`:this.Dr()}Dr(){let t=this.us.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.us.getSessionService(),n=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(a)}Py(t,e){if(mr[t]<this.ud)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Ja,0))===0)return this.pd(e,Ro.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Ka,0))===0)return this.pd(e,Ro.DYNAMIC);let i=this.dd[t];return i.length>=bo?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}pd(t,e){return t in this.vo[e]?this.vo[e][t]>=bo?!1:(this.vo[e][t]+=1,!0):(this.vo[e][t]=1,!0)}}return s})(),Et=!ai&&document.createElement("a"),fd=/(:443|:80)$/;function Fe(s){return Et?(Et.href=s,Et.href):""}function gd(s,r){return new csURL(s,r).href}function md(s,r){return csArray.prototype.some.call(r,t=>ci(s,`.${t}`)||s===t||t==="")}function yd(s){return s[0]==="/"?s:`/${s}`}function Co(s){return csString.prototype.replace.call(s,fd,"")}function Qa(s){return!Et||!kt(s,"http://")&&!kt(s,"https://")?null:(Et.href=s,{hash:Et.hash,host:Co(Et.host),hostname:Et.hostname,href:Et.href,origin:Et.origin?Et.origin:Co(`${Et.protocol}//${Et.host}`),pathname:yd(Et.pathname),port:Et.port,protocol:Et.protocol,search:Et.search})}var yt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var Ed=(()=>{class s{setContext(t,e){this.I=t,this.R=e}getVisitorService(){return this.I}getSessionService(){return this.R}}return s})(),Zr=!1;function Sd(){Zr=!0}function St(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Zr||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Zr||e.call(this,i,n)}}}}function vd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function F(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function _d(){let s=new MutationObserver(r=>{r.forEach(t=>{K(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),nt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Io(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function wd(){(!Io(MutationObserver)||!Io(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function Td(){try{window.CSPureWindow&&_d(),wd()}catch{}}var lt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let y=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return y?decodeURIComponent(y[2]):null}r.get=t;function e(l,u,y,p,E,m){let v=encodeURIComponent(`${u}`),C=y===r.CURRENT_DOMAIN?void 0:y,I=i(p),S=I?`;expires=${I.toUTCString()}`:"",_=";path=/",P=bt(C)?`;domain=${C}`:"",N=`${l}=${v}${S}${_}${P}`;return Q(E)&&E!==Kt.NotSet&&(N=`${N};SameSite=${E}`),Q(m)&&m===Xt.Yes&&(N=`${N};Secure`),document.cookie=N,!0}r.set=e;function i(l){return qt(l)?new csDate(O.now()+l):l}r.toExpireDate=i;function n(l,u){t(l)&&e(l,"",u,new csDate(0)),t(l)&&e(l,"",u,new csDate(0),Kt.None,Xt.Yes)}r.remove=n;function a(){return document.cookie.length>0}r.isCookiePresent=a;function c(l,u){let y="_cs_root-domain",p=t(y);if(p!==null&&p!=="1")return p;let E=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(E);for(;E.length&&(p===null||p==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(E),m],"."),e(y,m,m,void 0,l,u),p=t(y);return n(y,m),m}r.getRootDomain=c}(s||(s={})),s})(),Ad=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),Kt=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),Xt=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),er=(()=>{class s{constructor(t,e,i){this.f=t,this.A=e,this.hi=i,this.gc=!1,this.gd=Kt.NotSet,this.mc=Xt.No}getSameSiteFlag(){return this.gd}getSecureFlag(){return this.mc}getDomain(){return this.yc}getRootDomain(){return this.md}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.My(),e=this.ky();this.gc=this.Dy(t,e),this.gc?(this.gd=t,this.mc=e):this.f.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.mc=Xt.Yes),this.md=this.xy(),this.yc=this.Ly(this.md)}Dy(t,e){return Ad.browserIsSafariV12()?!1:(lt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),lt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(lt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}My(){return this.A.getUrlProtocol()==="http:"?Kt.Lax:this.hi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?Kt.None:Kt.Lax}ky(){return this.A.getUrlProtocol()==="http:"?Xt.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.hi.isSameSiteNoneSecureNeeded()?Xt.Yes:Xt.No}isSameSiteSupported(){return this.gc}set(t,e,i,n){let a=lt.toExpireDate(i),c=n?Xt.Yes:this.getSecureFlag();lt.set(t,e,this.yc,a,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.yc;lt.remove(t,i)}xy(){let t=this.hi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Kt.None:void 0,i=t?Xt.Yes:void 0;return lt.getRootDomain(e,i)}Ly(t){return this.f.allowSubdomains?t:lt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ss="_cs_t",Po="1",bd=(()=>{class s{constructor(t,e){this.wt=t,this.f=e,this._o=!1,this.wo=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&lt.isCookiePresent()){this._o=!0,this.wo=!1;return}if(lt.set(Ss,Po,lt.CURRENT_DOMAIN),lt.get(Ss)!==null){this._o=!0,this.wo=!1,lt.remove(Ss,lt.CURRENT_DOMAIN);return}lt.set(Ss,Po,lt.CURRENT_DOMAIN,void 0,Kt.None,Xt.Yes),lt.get(Ss)!==null&&(this._o=!0,this.wo=!0,lt.remove(Ss,lt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this._o}isSameSiteNoneSecureNeeded(){return this.wo}}return s})();function Rd(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Cd=(()=>{class s{constructor(t,e){this.f=t,this.hi=e}canTrack(){return this.f.isProjectActive()&&this.Vy()&&this.yd()&&this.Uy()}canTrackInChild(){return this.f.isProjectActive()&&this.jy()&&(this.yd()||this.Hy())}Uy(){return this.f.cookielessTrackingEnabled?Rd():this.hi.areCookiesEnabled()}yd(){return md(window.location.hostname,this.f.hostnames)}Vy(){return!this.Ed()&&this.By()}jy(){return!this.Ed()&&this.Fy()}Hy(){return window.location.protocol==="about:"&&window.location.hostname===""}Ed(){return"visibilityState"in document&&document.visibilityState==="prerender"}By(){return this.Sd()&&this.$y()}Fy(){return this.Sd()}$y(){try{return!!window.localStorage}catch{return!1}}Sd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Id=(()=>{class s{constructor(t,e){this.Ec=!1,this.vd=new Map,this._d=new Map,this.wd=new Map,this.Td="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.ds=this.zy(e||i),this.Ec=!0,s.isTransferableStreamSupported()&&(this.Ad=new ReadableStream({start:n=>{this.Sc=n},cancel:()=>{this.Sc=null}}),this.ds.postMessage(this.Ad,[this.Ad]))}catch(n){n.name==="SecurityError"&&q.counters.cspErrors.count("network-worker"),this.Ec=!1}}postMessage(t){t.WORKER_SIGNATURE=this.Td,this.Sc?this.Sc.enqueue(t):this.ds.postMessage(t)}zy(t){let e=window.csURL||window.webkitURL,i=window.Blob,n=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);U.whiteListFilename(c);let l=new n(c);return l.onmessage=u=>{let{type:y,endpoint:p,WORKER_SIGNATURE:E}=u.data;if(E===this.Td){if(y==="onLoad"){let{response:m}=u.data,v=this.vd.get(p);v&&v(m)}else if(y==="onError"){let{response:m}=u.data,v=this._d.get(p);v&&v(m)}else if(y==="onTimeout"){let m=this.wd.get(p);m&&m()}}},l}registerOnLoadCallback(t,e){this.vd.set(t,e)}registerOnErrorCallback(t,e){this._d.set(t,e)}registerOnTimeoutCallback(t,e){this.wd.set(t,e)}isSupported(){return this.Ec}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Pd=(()=>{class s{constructor(t){var e;this.Xt={},this.Kt=t.endpoint,this.Se=t.networkWorker,this.Gy=t.compressionOutputType,this.qy=t.useRetry,this.Se.postMessage({type:"CreatePostRequest",endpoint:this.Kt,compressionOutputType:this.Gy,useRetry:this.qy,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Se.postMessage({type:"SetQueryParams",endpoint:this.Kt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}getQueryParams(){return this.Xt}removeQueryParams(t){this.Se.postMessage({type:"RemoveQueryParams",endpoint:this.Kt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]})}send(t,e){this.Se.postMessage({type:"Send",endpoint:this.Kt,payload:t,queryParams:e})}abort(){this.Se.postMessage({type:"Abort",endpoint:this.Kt})}onLoad(t){this.Se.registerOnLoadCallback(this.Kt,t)}onError(t){this.Se.registerOnErrorCallback(this.Kt,t)}setRequestHeader(t,e){this.Se.postMessage({type:"SetHeader",endpoint:this.Kt,headerName:t,headerValue:e})}onTimeout(t,e){this.Se.registerOnTimeoutCallback(this.Kt,t),this.Se.postMessage({type:"SetTimeout",endpoint:this.Kt,timeout:e})}}return s})(),sr=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Za=(()=>{class s{constructor(t){this.onError=t}}return s})(),Od=(()=>{class s{constructor(t){var e;this.Xt={},this.vc={},this.bd=i=>{for(let n of i){let{metadata:a,events:c}=n;this.send(c,a)}},this.Kt=t.endpoint,this.xr=t.compressionOpts,this.Jt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this._c=t.contentType,this.worker=!!t.worker,this.Jt&&this.Jt.recover(this.bd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Xt[e]}):this.Xt={}}send(t,e){let i=e||{...this.Xt},n=!("ct"in i),a=this._c==="application/json"||typeof t!="string"&&!this.Wy(t);"ct"in i||(!this.xr||!n?i.ct=sr.UNCOMPRESSED:i.ct=this.xr.compressionType);let c=a?JSON.stringify(t):t,l=Object.keys(i).map(y=>`${encodeURIComponent(y)}=${encodeURIComponent(i[y])}`).join("&"),u=`${this.Kt}?${l}`;if(Uh(this.mandatoryParameters,y=>i[y]==null)){nt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${u}`);return}this.xr&&n&&typeof c=="string"?this.xr.compressor(c,this.xr.compressionOutputType,y=>this.Rd(u,i,y)):this.Rd(u,i,c)}onLoad(t){this.qi=t}onError(t){this.Lr=t}onTimeout(t,e){this.pi=t,this.Vr=e}abort(){this.Cd&&this.Cd()}setRequestHeader(t,e){this.vc[t]=e}getQueryParams(){return this.Xt}Wy(t){return t&&t.byteLength!==void 0}Rd(t,e,i){let n=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t),this._c&&n.setRequestHeader("Content-Type",this._c),n.onload=()=>{if(this.Jt&&this.Jt.recover(this.bd),this.qi){let c={params:e,responseText:n.responseText,status:n.status};this.qi(c)}},n.onerror=()=>{this.Jt&&this.Jt.save({key:a,metadata:e,events:i}),this.Lr&&this.Lr({params:e})},this.Vr&&this.pi&&(n.timeout=this.Vr,n.ontimeout=()=>{this.pi()}),this.Cd=()=>n.abort(),Object.keys(this.vc).forEach(c=>{n.setRequestHeader(c,this.vc[c])}),n.send(i)}}return s})(),tc=(()=>{class s{constructor(t){this.wc=t,this.Se=new Id(this.wc)}create(t,e,i,n,a=[]){if(this.Se.isSupported()&&e)return new Pd({networkWorker:this.Se,endpoint:t,compressionOutputType:i,useRetry:!!n,mandatoryParameters:a});{let c=i?{compressor:this.wc.compress,compressionOutputType:i,compressionType:this.wc.algorithm}:void 0;return new Od({endpoint:t,compressionOpts:c,recoveryStorage:n})}}}return s})(),Nd=(()=>{class s{constructor(t,e,i,n,a){this.I=t,this.R=e,this.Xe=i,this.Et=n,this.f=a}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.I.getVisitor(),session:this.R.getSession(),cvars:this.Et.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.I.removeVisitor(),this.R.removeSession(),this.Et.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.I.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.Et.setCustomVariableSession(t.cvars):this.Et.removeCustomVariablesSession()}}return s})(),Xi=".",In="__DOT__",Md=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,ec="x";function sc(s){let[r,t,e,i,n,a,c,l,u]=Ld(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(a),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:u===void 0||u===ec?null:u}}function kd(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:ec],csString),Dd),Xi)}function ic(s){return Md.test(s)}function Dd(s){return csString.prototype.replace.call(s,/\./g,In)}function xd(s){return csString.prototype.replace.call(s,new csRegExp(In,"g"),Xi)}function Ld(s){return csString.prototype.indexOf.call(s,In)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Xi),xd):csString.prototype.split.call(s,Xi)}var x=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Lt=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),$e=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),zt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),tn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})();var Vd=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),rc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,nc=".";function Ud(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],nc)}function oc(s){if(!ir(s))return null;let r=en(s);return r!==null?ac(r):null}function ac(s){var r,t;let[e,i,n,a]=csString.prototype.split.call(s,nc);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:tn.UNNECESSARY,etrStatus:(t=a)!==null&&t!==void 0?t:Vd.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function ir(s){return rc.test(s)}function en(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,rc))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var cc=(()=>{let s;return function(r){function t(e){return{exclusion:Number(e._cs_ex)||0,visitor:e._cs_id?sc(e._cs_id):null,session:e._cs_s?oc(e._cs_s):null,cvars:e._cs_cvars?window.csJSON.parse(e._cs_cvars):null}}r.fromRaw=t}(s||(s={})),s})(),de="_cs_ex",Oo=2592e6,jd=/^[0-9]+$/,lc=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.X.getItem(de)):Number(this.O.get(de))}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(de,t):(this.O.set(de,t,Oo),(e=this.fi)===null||e===void 0||e.call(this,de,t,Oo))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(de):(this.O.delete(de),(t=this.gi)===null||t===void 0||t.call(this,de))}static isValidExclusionString(t){return jd.test(t)}}return s})(),Oe="_cs_cvars",hc=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){return this.f.cookielessTrackingEnabled?this.X.getItem(Oe):this.O.get(Oe)}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(Oe,t):(this.O.set(Oe,t),(e=this.fi)===null||e===void 0||e.call(this,Oe,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Oe):(this.O.delete(Oe),(t=this.gi)===null||t===void 0||t.call(this,Oe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})(),sn=(()=>{let s;return function(r){function t(i){let n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(i),a=>csArray.prototype.indexOf.call(n,a)>=0)}r.isRawDomainState=t;function e(i){return t(i)?(!i._cs_id||ic(i._cs_id))&&(!i._cs_s||ir(i._cs_s))&&(!i._cs_ex||lc.isValidExclusionString(i._cs_ex))&&(!i._cs_cvars||hc.isValidCustomVarString(i._cs_cvars)):!1}r.isValid=e}(s||(s={})),s})(),Hd="1.0.0",Bd=(()=>{class s{constructor(t,e){this.ve=t,this.Ot=e}retrieve(t,e){this.w=e,this.retrievedStates=[],this.Tc=csArray.prototype.map.call(csArray.prototype.filter.call(t,i=>this.Yy(i)),s.getXdframeOrigin),this.ve.onMessage(i=>{this.Ac(i)}),this.ve.onTimeout(()=>{this.bc()}),this.ve.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Tc,s.getXdframeUrl),i=>this.ve.open(i))}Ac(t){if(this.Rc(t)){let e=t.data;if(sn.isValid(e))csArray.prototype.push.call(this.retrievedStates,e);else throw this.ve.stop(),`Invalid domain state: ${csJSON.stringify(t.data)} from ${t.origin}`}this.Xy()&&(this.ve.stop(),this.w(csArray.prototype.map.call(this.retrievedStates,cc.fromRaw)))}bc(){U.warn("xdframe: all messages not received")}Rc(t){return csArray.prototype.indexOf.call(this.Tc,t.origin)>-1}Xy(){return this.retrievedStates.length===this.Tc.length}Yy(t){return!Wa(this.Ot.hostname,t)}static getXdframeOrigin(t){return`https://csxd.${t}`}static getXdframeUrl(t){return`${t}/xdframe-${Hd}.html`}}return s})(),Fd=(()=>{class s{constructor(){this.Ky=3e3,this.Id=t=>{this.handleMessage(t)}}onMessage(t){this.Pd=t}onTimeout(t){this.pi=t}start(){window.addEventListener("message",this.Id),this.Jy=window.csSetTimeout(()=>{this.pi()},this.Ky)}open(t){var e;let i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),(e=document.body)===null||e===void 0||e.appendChild(i),i}stop(){window.removeEventListener("message",this.Id),window.csClearTimeout(this.Jy),this.Pd=Yi,this.pi=Yi}handleMessage(t){this.Pd(t)}}return F([V("XdframeMessage")],s.prototype,"handleMessage",null),s})();function me(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(n=(i<3?a(n):i>3?a(r,t,n):a(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var rr=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Ns(this.set)}get count(){return this.set.size}}return s})(),$d=(()=>{class s extends rr{constructor(t="high"){super(),this.Qy=t}add(t){this.set.add(t),this.set.size===1&&Vt(()=>{this.set.clear()},this.Qy)}}return s})();function nr(s,r=!1){let t=new rr;return{push(e){t.count===0&&(r?Vt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function zd(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=qd(r);return t===""||(r=Wd(r,t),r.length===0)?"":uc(r[0])}function Gd(s){return csString.prototype.indexOf.call(s,"@")!==-1}function qd(s){return s.length>0?uc(s[0]):""}function Wd(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function uc(s){let r="",t;Gd(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var Yd=s=>s;function Xd(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let a=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let u=Reflect.get(c,l);return typeof u=="function"?u.bind(c):u},set:(c,l,u)=>{let y=c[l],p=Reflect.set(c,l,u);return e.forEach(E=>E(this,u,y,"subproperty")),p}}):this[i]=a,this[i])},set(){var n;let a=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,a);delete this[i];try{e.forEach(u=>u(this,a[0],c,"property"))}catch(u){nt.error(u)}return l}})}function Kd(s,r,t){let e=Jd(s,r);if(!e)return null;let i=(n,a,c,l)=>t(n,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Jd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Xd(s,r,i,e),e):(nt.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(nt.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Qd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return nt.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ns(i),y=>y(c))}catch(y){nt.critical(y)}let u=n.apply(this,c);return us(()=>{let y={result:u,context:this,args:c};csArray.prototype.forEach.call(l,p=>p(y))},re.MonkeyPatch),u};tp(a,n),s[r]=a}return i}function ss({target:s,methodName:r,hook:t,hookPrepareArgs:e=Yd,options:i}){let n=Qd(s,r);if(!n)return null;let a=c=>{let l=e(c),u=i!=null&&i.withCallerName?{callerName:zd()}:{};return y=>t({...y,...u,args:l})};return{activate:()=>{n.add(a)},deactivate:()=>{n.delete(a)}}}function Zd(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,Object.defineProperty(s,r,{set(){var n;let a=this[r],c=arguments;return us(()=>{e.forEach(l=>l(this,c[0],a,"property"))},re.MonkeyPatch),(n=i.set)===null||n===void 0?void 0:n.apply(this,c)}}),e):(nt.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null):e}function Ki(s,r,t){let e=Zd(s,r);if(!e)return null;let i=(n,a,c)=>t(n,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function tp(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var ks=(()=>{var s;class r{static Zy(e){this.ks.forEach(i=>{e(i,"initial")})}static Ur(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&K(n.addedNodes,this.tE),K(n.removedNodes,this.eE)})),csArray.prototype.push.call(this._e,e),!this.F){this.F=!0,this.D.observe(document,this.jr);for(let i of ns.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.ks.add(n),this.D.observe(n,this.jr)}this.Cc||(this.Cc=ss({target:Element.prototype,methodName:"attachShadow",hook:i=>this.sE(i.result)&&this.Od(i.result)})),this.Cc.activate()}this.Zy(e)}static sE(e){return e.isConnected&&e.ownerDocument===document}static Hr(e){var i,n;this._e=csArray.prototype.filter.call(this._e,a=>a!==e),this._e.length===0&&(this._e=[],this.F=!1,(i=this.D)===null||i===void 0||i.disconnect(),(n=this.Cc)===null||n===void 0||n.deactivate(),this.ks.clear())}constructor(e){this.w=e,this.w=os("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return Ns(s.ks)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ns.isSupported()&&s.Ur(this.w)}disconnect(){ns.isSupported()&&s.Hr(this.w)}}return s=r,r._e=[],r.ks=new Set,r.F=!1,r.jr={childList:!0,subtree:!0},r.Od=t=>{s.ks.has(t)||(s.D.observe(t,s.jr),s.ks.add(t),K(s._e,e=>e(t,"added")))},r.tE=t=>{Jt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Od)},r.eE=t=>{t.isConnected||Jt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ks.has(e)&&(s.ks.delete(e),K(s._e,i=>i(e,"removed")))})},at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),No={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},qe=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Ic(e){if(s.shadowRootFilters.length>0&&ei(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,No)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,Vt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,No)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ns.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Ic(document),this.shadowRootObserver=new ks(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,K(this.shadowRootObserver.shadowRoots,n=>{this.Ic(n)}))}static disconnect(e,i){var n,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.w=e,this.Nd=i;let n=nr(a=>e(a,this),!0);this.w=os("DocumentMutationObserver:callback",a=>{K(a,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?jh(i,n):i!=null?i:n}observe(){s.observe(this.w,this.Nd)}disconnect(){s.disconnect(this.w,this.Nd)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{Ot.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{K(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Ic(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),Ar;function Gs(s){if(Ar||(Ar=document.createElement("div")),!(!!s&&z(s)))return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Qt.call(Ar,s),!0}catch{return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function rn(s,r){if(wo)return wo.call(s,r);let t=s;do{if(Qt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var Os=(()=>{class s{get selectors(){return this.Be===""?null:this.Be}constructor(t,e={closest:!1}){this.w=t,this.At=e,this.Be="",this.Br=new rr,this.To=ds(i=>{if(this.Be==="")return;let n=[];for(let a of Ma(i,c=>c.addedNodes)){if(!(au(a)||this.At.closest&&zi(a)))continue;let c=this.At.closest?this.iE(a,this.Be):this.findMatchingElements(a,this.Be);So(c,n)}n.length&&this.w(n,"added")},"SelectorObserver.processMutations"),this.rE=(i,n)=>{if(this.Be===""||n!=="added")return;let a=this.findMatchingElements(i,this.Be);a.length&&this.w(a,"added")},this.z=new qe(this.To,this.rE)}observe(t){this.Be===""?this.z.observe():this.Be+=",",this.Be+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let n=this.findMatchingElements(i,t);So(n,e)}e.length&&(K(e,i=>{this.Br.add(i)}),this.w(e,"initial"))}processPendingMutations(){this.To(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.Br.clear(),this.Be=""}iE(t,e){let i=[];if(zi(t)){if(t.parentElement){let n=rn(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.Br.has(n)===!1)}else{if(oi(t)){let n=rn(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,a=>this.Br.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ti(window.csquerySelectorAll[t.nodeType].call(t,e));return ot(t)&&Qt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.Br.has(n)===!1)}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([Rt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function ep(){let s=csSymbol.for("propStore");return{getStore(r){return r[s]},get(r,t){let e=r[s];return e==null?void 0:e[t]},set(r,t,e){let i=r[s];i||(i={},r[s]=i),i[t]=e}}}var Ui=ep(),W=(()=>{let s;return function(r){function t(l,u,y){var p;if(typeof Node!="undefined"&&l instanceof Node)Ui.set(l,u,y);else{let E=l;(p=E.props)!==null&&p!==void 0||(E.props={}),E.props[u]=y}}r.setProperty=t;function e(l,u){var y;return typeof Node!="undefined"&&l instanceof Node?Ui.get(l,u):(y=l.props)===null||y===void 0?void 0:y[u]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?Ui.getStore(l):l.props}r.getProperties=i;function n(l,u){let y=null;return a(l,(p,E,m)=>u(p)&&(y=p)&&!!m()),y}r.findDescendant=n;function a(l,u){c(l,void 0,u)}r.traverse=a;function c(l,u,y){let p=!1;if(y(l,u,()=>p=!0),p)return;let m=l.shadowRoot;m&&c(m,l,y);let v=l.children;if(v!=null&&v.length){for(let C of v)if(C&&(c(C,l,y),p))break}}}(s||(s={})),s})(),D=(()=>{let s;return function(r){let t;(function(S){S[S.NotMasked=0]="NotMasked",S[S.Parent=1]="Parent",S[S.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(S){return Is(S)&&"Attributes"in S&&"PIISelectors"in S?S.Attributes instanceof Array&&S.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(S){if(!Is(S)||S===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in S||(S.Attributes=[]),"PIISelectors"in S||(S.PIISelectors=[]),S}r.sanitizeSelectorUserInput=i;function n(S){var _;return(_=W.getProperty(S,r.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}r.getMaskedElementDetails=n;function a(S){var _;return(_=W.getProperty(S,r.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}r.getMaskedAttributeDetails=a;function c(S){let _=W.getProperty(S,r.maskedProp);return(_==null?void 0:_.state)===t.Parent}r.isMaskedElement=c;function l(S){let _=W.getProperty(S,r.maskedProp);return(_==null?void 0:_.state)===t.Child}r.isMaskedElementChild=l;function u(S,_){let P=W.getProperty(S,r.maskedAttributeProp);return((P==null?void 0:P.attributes)==null?void 0:csArray.prototype.indexOf.call(P==null?void 0:P.attributes,_))>-1}r.isMaskedAttribute=u;function y(S,_){W.setProperty(S,r.maskedProp,_)}r.setMaskedElementProperty=y;function p(S){W.setProperty(S,r.maskedProp,void 0)}r.unsetMaskedElementProperty=p;function E(S,_){W.setProperty(S,r.maskedAttributeProp,_)}r.setMaskedAttributeProperty=E;function m(S,_){let P=csArray.prototype.filter.call(S.PIISelectors,j=>Gs(j));_.elementSelector.length>0&&csArray.prototype.push.call(P,...csString.prototype.split.call(_.elementSelector,","));let N=I([...P]),A={elementSelector:csArray.prototype.join.call(N,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(S.Attributes,j=>{j!=null&&j.attrName&&(j!=null&&j.selector)&&Gs(j.selector)&&!v(A.attrSelectors,j)&&csArray.prototype.push.call(A.attrSelectors,j)}),A.attrSelector=C(A.attrSelectors),A}r.getComputedSelectorSettings=m;function v(S,_){return csArray.prototype.some.call(S,P=>P.selector===_.selector&&P.attrName===_.attrName)}function C(S){let _="";return csArray.prototype.forEach.call(S,P=>{let N=csString.prototype.split.call(P.selector,",");csArray.prototype.forEach.call(N,A=>{Gs(A)&&(_&&(_+=","),_+=A)})}),_}function I(S){if(S.length<=1)return S;let _=[];for(let P of S){let N=csString.prototype.split.call(P,",");for(let A of N)csArray.prototype.indexOf.call(_,A)===-1&&csArray.prototype.push.call(_,A)}return _}}(s||(s={})),s})(),ye=(()=>{class s{constructor(){this.oe=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:O.now(),t.timestamp==null&&(t.timestamp=O.now()),csArray.prototype.forEach.call(this.oe,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.oe=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{let e=csArray.prototype.indexOf.call(this.oe,t);csArray.prototype.splice.call(this.oe,e,1)}}}return s})(),dc=1,qs=csSymbol("nodeIdentifier");function sp(s=!1){s&&(dc=1),qs=csSymbol("nodeIdentifier")}function ip(s){return W.getProperty(s,qs)}function et(s){let r=W.getProperty(s,qs);return r!=null?r:(W.setProperty(s,qs,dc++),W.getProperty(s,qs))}var rp=(()=>{class s extends ye{constructor(t){super(),this.B=null,this.Ao=null,this.D=null,this.Ds=null,this.Md=["value","checked","src","data","alt"],this.bo={state:D.MaskedElementState.Child},this.nE=e=>{for(let i of e){if(D.isMaskedElement(i.target)||D.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let a=i.addedNodes[n];D.isMaskedElement(a)||D.isMaskedElementChild(a)||ot(a)&&this.kd(a)}for(let n=0;n<i.removedNodes.length;n+=1){let a=i.removedNodes[n];dt.isConnected(a)||this.Dd(a)}}},this.oE=t}setMaskedElementSettings(t){this.ps=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.ps||(nt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ps={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:a,attrSelector:c,attrSelectors:l}=this.ps;(t=this.Ds)!==null&&t!==void 0||(this.Ds=this.aE()),a.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.cE()),this.B.observe(a)),c.length!==0&&((i=this.Ao)!==null&&i!==void 0||(this.Ao=this.lE(l)),this.Ao.observe(c)),(n=this.D)!==null&&n!==void 0||(this.D=new qe(this.nE,(u,y)=>y==="added"&&this.hE(u))),this.D.observe(),csSetTimeout(this.oE)}onStop(){var t,e,i;this.B&&(this.Dd(document),this.B.disconnect()),(t=this.Ao)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.Ds)===null||i===void 0||i.disconnect()}aE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}cE(){return new Os(t=>{csArray.prototype.forEach.call(t,e=>{this.uE(e)?this.kd(e):(this.dE(e),this.pE(e))})})}lE(t){return new Os(e=>{csArray.prototype.forEach.call(e,i=>this.fE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=D.getMaskedElementDetails(t.target);if(i.state!==D.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:et(t.target),width:e.width,height:e.height})}pE(t){!this.Ds||!ot(t)||tr(t)||this.Ds.observe(t)}uE(t){let e=csNodeparentNode.apply(t);return e?D.isMaskedElement(e)||D.isMaskedElementChild(e):ei(t)?D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host):!1}hE(t){(D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host))&&D.setMaskedElementProperty(t,this.bo)}Dd(t){Jt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{D.unsetMaskedElementProperty(i)})}dE(t){let e=t.getBoundingClientRect(),i={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t,i),this.gE(t),Jt(t).visitAll(n=>n!=t&&D.setMaskedElementProperty(n,this.bo))}kd(t){D.setMaskedElementProperty(t,this.bo),Jt(t).visitAll(e=>e!=t&&D.setMaskedElementProperty(e,this.bo))}gE(t){var e;let i=(e=W.getProperty(t,D.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.Md.length;n+=1){let a=this.Md[n];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&D.setMaskedAttributeProperty(t,i)}fE(t,e){var i;let n=(i=W.getProperty(t,D.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Qt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&D.setMaskedAttributeProperty(t,n)}}return me([V()],s.prototype,"resizeObserverCallback",null),s})(),pe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return W.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){W.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),np=(()=>{class s{constructor(){this.Pc=0,this.V=!1,this.xd="data-cs-capture",this.xs=t=>{for(let e of t){if(pe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];pe.isWhitelistedElement(n)||ot(n)&&this.Ld(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];dt.isConnected(n)||this.Vd(n)}}}}start(){this.Pc++,!this.V&&(this.V=!0,this.mE())}mE(){this.B||(this.B=new Os(e=>K(e,i=>this.Ld(i))));let t=this.Oc?`[${this.xd}], ${this.Oc}`:`[${this.xd}]`;this.B.observe(t),this.D||(this.D=new qe(this.xs,(e,i)=>i==="added"&&this.yE(e))),this.D.observe()}stop(){this.V&&(this.Pc--,this.Pc===0&&(this.V=!1,this.EE()))}EE(){this.B&&(this.Vd(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Gs(t))this.Oc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Oc}Ld(t){Jt(t).visitAll(e=>{pe.whitelistElement(e)})}yE(t){pe.isWhitelistedElement(t.host)&&pe.whitelistElement(t)}Vd(t){Jt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{pe.removeWhitelistElement(i)})}}return s})(),Ve=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){return W.getProperty(n,r.EDITABLE_NODE_PROP)===!0}r.isEditableNode=t;function e(n){W.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){W.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),op=(()=>{class s{constructor(){this.B=null,this.D=null,this.V=!1,this.xs=t=>{for(let e of t)if(Ve.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!Ve.isEditableNode(n)){if(zi(n)||Jh(n)){Ve.markEditableNode(n);continue}ot(n)&&this.Ud(n)}}}}start(){this.V||(this.V=!0,this.B=new Os(t=>K(t,e=>{this.Ud(e)})),this.B.observe("[contenteditable]"),this.D=new qe(this.xs,(t,e)=>e==="added"&&this.SE(t)),this.D.observe())}stop(){var t,e;this.V&&(this.V=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}Ud(t){Jt(t).visitAll(e=>{Ve.markEditableNode(e)})}SE(t){Ve.isEditableNode(t.host)&&Ve.markEditableNode(t)}}return s})(),ap=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="toEncrypt";function t(n){return W.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){W.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})();var cp="spki",Mo="RSA-OAEP",lp="SHA-256",ko="AES-CTR",hp="SHA-1",Do=190,Ws=(()=>{let s;return function(r){var t;let e=!1,i=null,n,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=Z.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function u(){return i}r.getCryptoKey=u;function y(){var N,A;return((A=(N=Z.self.crypto)===null||N===void 0?void 0:N.subtle)===null||A===void 0?void 0:A.encrypt)!=null&&Z.self.CryptoKey!=null}r.isSupported=y;async function p(N){n=r.crypto.importKey(cp,Ra(N),{name:Mo,hash:lp},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||nt.warn(`Fail to import public key '${N}'`)}r.importKey=p;async function E(N){if(!y()||e)return null;await n;let A=yn(N);A.byteLength>Do&&(A=A.slice(0,Do));try{let j=await r.crypto.encrypt({name:Mo},i,A);return uo(j)}catch{return null}}r.asymmetricEncrypt=E;async function m(N,A){if(!y()||e)return null;let j={counter:A.initializationVector,name:ko,length:64},tt=a.encode(N);try{let ct=await r.crypto.encrypt(j,A.cryptoKey,tt);return uo(ct)}catch{return null}}r.symmetricEncrypt=m;async function v(N){let A=await C(N);if(!A)throw new Error("Export secret failed");let j=await E(A);if(!j)throw new Error("Encrypt secret failed");return j}r.encryptSecret=v;async function C(N){var A;if(!y())return null;try{return(A=(await r.crypto.exportKey("jwk",N)).k)!==null&&A!==void 0?A:null}catch{return null}}async function I(){if(!y()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:ko,length:128},!0,["encrypt","decrypt"]),initializationVector:Z.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=I;function S(N){c=N}r.setDigestSalt=S;async function _(N){N=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(N)),c&&(N=`${N}:${c}`);let A=a.encode(N);try{let j=await r.crypto.digest(hp,A);return Gr(j)}catch{return null}}r.digest=_;function P(){return Z.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=P}(s||(s={})),s})(),ue=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ne=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),pc=(()=>{class s{constructor(){this.Mc=[]}setRegexRules(t){this.Mc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this._E(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Mc,e=>this.Hd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Mc,e=>this.Hd(t,e))}Hd(t,e){var i,n;let a=this.wE(t,e);return!this.TE(e)||!this.AE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):!((n=e.regex)===null||n===void 0)&&n.test(a))}TE(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}AE(t){let e=t.samplingRate!==100,i=e&&as.boolean(t.samplingRate);return!e||i}Ro(t){return!kt(t,"http://")&&!kt(t,"https://")?`https://${t}`:t}wE(t,e){let i=Qa(this.Ro(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Co(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}_E(t){let e=null,i=!1;switch(t.operator){case Ne.NOT_START:case ue.NOT_START:i=!0;case Ne.START:case ue.START:e=new csRegExp(`^${t.value}`,this.Co(t));break;case Ne.NOT_END:case ue.NOT_END:i=!0;case Ne.END:case ue.END:e=new csRegExp(`${t.value}$`,this.Co(t));break;case Ne.NOT_CONTAIN:case ue.NOT_CONTAIN:i=!0;case Ne.CONTAIN:case ue.CONTAIN:case ue.REGEX:e=new csRegExp(`${t.value}`,this.Co(t));break;case Ne.NOT_EXACT:case ue.NOT_EXACT:i=!0;case Ne.EXACT:case ue.EXACT:e=new csRegExp(`^${t.value}$`,this.Co(t));break;default:nt.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.Bd(t.startDate):void 0,a=t.endDate?this.Bd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:a}}Bd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),up=(()=>{class s{constructor(t,e,i,n){this.ae=t,this.Fr=e,this.$r=i,this.Tt=n}init(){this.bE()}shouldMaskNonTextElements(){if(this.ae.anonymisationMethod!==Ze.replayRecordingMaskedUrlRegexRules)return!1;if(this.ae.isSMB)return this.shouldUseAnonymization();let t=this.$r.getMatchingRules(this.Fr.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.Tt&&!this.Tt.isReplayUnanonymizedAllowedByConsent()){switch(this.ae.anonymisationMethod){case null:case Ze.replayRecordingUnmaskedUrlRegex:return!(this.ae.replayRecordingUnmaskedUrlRegex&&this.ae.replayRecordingUnmaskedUrlRegex.test(this.Fr.getAnonymizedUrl()));case Ze.replayRecordingUnmaskedUrlRegexRules:return!this.$r.evaluateUrl(this.Fr.getAnonymizedUrl())}return!0}else{switch(this.ae.anonymisationMethod){case null:case Ze.replayRecordingMaskedUrlRegex:return!!(this.ae.replayRecordingMaskedUrlRegex&&this.ae.replayRecordingMaskedUrlRegex.test(this.Fr.getAnonymizedUrl()));case Ze.replayRecordingMaskedUrlRegexRules:return this.$r.evaluateUrl(this.Fr.getAnonymizedUrl())}return!1}}bE(){this.ae.anonymisationMethod===Ze.replayRecordingMaskedUrlRegexRules&&this.ae.replayRecordingMaskedUrlRegexRules?this.$r.setRegexRules(this.ae.replayRecordingMaskedUrlRegexRules):this.ae.anonymisationMethod===Ze.replayRecordingUnmaskedUrlRegexRules&&this.ae.replayRecordingUnmaskedUrlRegexRules&&this.$r.setRegexRules(this.ae.replayRecordingUnmaskedUrlRegexRules)}}return s})();function dp(s){return s.nodeType===1}function pt(s){let r=csEventtarget.apply(s);return r&&dp(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function pp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function fp(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(pt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var ft=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Pi=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),gp=(()=>{class s{compute(t,e){let i=this.Ls(e.x)-this.Ls(t.x),n=this.Ls(e.y)-this.Ls(t.y),a=e.time-t.time;return{duration:a,distance:this.Fd(i,n),direction:this.RE(i,n),velocity:this.CE(i,n,a)}}computePinchMetrics(t,e){let i=this.Ls(e.x)-this.Ls(t.x),n=this.Ls(e.y)-this.Ls(t.y);return{duration:e.time-t.time,distance:this.Fd(i,n)}}getScale(t,e){return Math.abs(e/t-1)}Ls(t){return t/window.devicePixelRatio}Fd(t,e){return Math.round(Math.sqrt(t*t+e*e))}CE(t,e,i){let n=i/1e3,a=t/n,c=e/n;return Math.round(Math.abs(a)+Math.abs(c))}RE(t,e){return Math.abs(t)>Math.abs(e)?t>0?Pi.RIGHT:Pi.LEFT:e>0?Pi.DOWN:Pi.UP}}return s})(),fc=typeof performance!="undefined"&&!!performance.now,xo=fc?()=>performance.now():()=>csDate.now(),mp=(()=>{var s;return fc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Oi={now(){return Math.round(xo()+mp)},elapsed(){return xo()}};function Lo(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var yp=1e3,Ep=100,Sp=.1,nn=(()=>{class s{constructor(){this.Ht={},this.kc=()=>{},this.Io=new gp,this.we()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.kc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.IE(t))return;this.PE(t)&&this.we();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Oi.now()};if(t.touches.length===1)this.Ht.startPinchTime=e.time,this.Ht.firstTouch=e;else if(t.touches.length===2&&(this.Ht.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Oi.now()},this.Ht.firstTouch&&this.Ht.secondTouch)){let i=this.Io.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.zr,e),this.Po=pt(t)}processActionMove(){this.Dc=!0}processActionUp(t){if(this.OE(t)){if(csArray.prototype.push.call(this.zr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Oi.now()}),this.NE(t)&&this.Ht.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Ht.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Oi.now()};this.Ht.firstTouch&&(this.Ht.firstTouch=e,this.Ht.secondTouch=i),this.ME(t)}this.Wi||this.kE()&&this.DE(t)}}we(){this.zr=[],this.Po=null,this.Dc=!1,this.Wi=null,this.Gr=!0}DE(t){let e=this.Io.compute(this.zr[0],this.zr[1]);this.Gr=t.isTrusted;let i=this.Dc?this.xE(e):this.LE(e);if(this.VE(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Lo(n.pageX,1),i.pageY=Lo(n.pageY,1)}this.kc(i,t)}ME(t){if(!(this.Ht.firstTouch&&this.Ht.secondTouch))return;let e=this.Io.computePinchMetrics(this.Ht.firstTouch,this.Ht.secondTouch);this.Gr=t.isTrusted;let i=this.UE(e);i&&this.kc(i,t)}UE(t){return!this.Wi||this.Io.getScale(this.Wi,t.distance)<Sp?void 0:{type:this.Wi>t.distance?ft.PINCH_IN:ft.PINCH_OUT,target:this.Po,distance:t.distance,isTrusted:this.Gr}}xE(t){return{type:t.velocity<Ep?ft.DRAG:ft.FLICK,target:this.Po,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Gr}}LE(t){return{type:t.duration<yp?ft.TAP:ft.LONG_PRESS,target:this.Po,isTrusted:this.Gr}}VE(t,e){return t===ft.TAP&&e&&e.length===1}PE(t){return t.touches.length===1}kE(){return this.zr.length===2}IE(t){return t.touches.length>0}OE(t){return t.changedTouches.length>0}NE(t){return this.Dc&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),vp=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),gc=!0,ji=csSymbol("safe"),Vo=csSymbol("task");function Nt(s,r=gc){var t;(t=s[ji])!==null&&t!==void 0||(s[ji]=function(e){let i=arguments;us(()=>(e[Vo]=$t,s.listener.apply(s.boundElement,i)),re.EventListener,e[Vo])}),s.boundElement.addEventListener(s.type,s[ji],r)}function Mt(s,r=gc){s.boundElement.removeEventListener(s.type,s[ji],r)}var _p=(()=>{class s extends vp{constructor(t){super(),this.jE=t,this.Vs=[{boundElement:document,type:"touchstart",listener:e=>this.K(e)},{boundElement:document,type:"touchmove",listener:e=>this.K(e)},{boundElement:document,type:"touchend",listener:e=>this.K(e)}],this.qr=new nn,this.qr.onGesture((e,i)=>this.xc(e,i))}xc(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>Nt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vs,t=>Mt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}K(t){this.jE.tryToExecute("process gesture event",()=>{if(this.qr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.qr.processActionDown(t);break;case"touchmove":this.qr.processActionMove();break;case"touchend":this.qr.processActionUp(t);break}})()}static isSwipe(t){return t.type===ft.FLICK||t.type===ft.DRAG}}return s})();var Ut=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})();var ls;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(ls||(ls={}));function mc(s){return s.tagDeploymentMode===ls.DualCollectionReview||s.tagDeploymentMode===ls.DualCollection}function wp(s){return mc(s)||s.tagDeploymentMode===ls.LoadClicktalePtc}var Uo=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=a}(s||(s={})),s})();var Tp=(()=>{class s{constructor(t){this.pt=t}on(t,e){return i=>{this.pt.hasValidEventTarget(i)&&this.aS(i,t)&&e(i)}}aS(t,e){let i=pt(t);return Qt.call(i,e)}isMatchesSelectorSupported(){return!!Qt}}return s})(),Ap=(()=>{class s extends Ut{constructor(){super(),this.Yd=0}onStart(){U.isPerfLoggingActive()&&(this.Wr=window.csSetInterval(()=>this.Xd(),s.cS))}onStop(){U.isPerfLoggingActive()&&(this.Xd(),csClearInterval(this.Wr))}Xd(){this.Yd>=s.lS||q.counters.methodPerformance.flush()&&this.Yd++}}return s.cS=5e3,s.lS=5,s})(),bp=(()=>{class s{constructor(){}init(){this.Kd=new Ap}onStartTracking(){this.Kd.start()}onOptout(){this.Kd.stop()}}return s})();var Rp=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},Cp=5e3,Ip=(()=>{class s extends Ya{constructor(t,e,i){super(t,e),this.Xi=null,this.fS=(i==null?void 0:i.type)||"json",this.Zd=i==null?void 0:i.cacheMinutes,this.Vr=i==null?void 0:i.timeout}onLoad(t){this.qi=t}onError(t){this.Lr=t}onTimeout(t,e){this.pi=t,this.Vr=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.pc(t);let e=si.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.gS(i,this.fS)}abort(){this.Xi&&(this.Xi.abort(),this.Xi=null)}isInProgress(){return this.Xi!==null}gS(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var a;return(a=this.Lr)===null||a===void 0?void 0:a.call(this,n)},n.ontimeout=()=>{var a;return(a=this.pi)===null||a===void 0?void 0:a.call(this,n)},n.onload=()=>{var a,c;n.status>=200&&n.status<400?((a=this.qi)===null||a===void 0||a.call(this,this.mS(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Lr)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Xi=null},n.timeout=(i=this.Vr)!==null&&i!==void 0?i:Cp,this.Xi=n,n.send()}mS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}pc(t){let e;this.Zd?e=`${Rp(this.Zd)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var ii={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11};var jo=new Map,br=!ai&&document.implementation.createHTMLDocument("");function yc(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Pp(s){if(!Qi(s))return null;let r=Ec(s);if(r===null||r.length===0)return null;let t="";if(zr(s.textContent))K(r,e=>t+=e.cssText);else{let e=Op(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,a=0;n<r.length;n+=1,a+=1)i[a]=r[n];K(i,n=>t+=n.cssText)}return t}function Op(s){if(!br)return 0;let r=jo.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,br.head.appendChild(t);let e=Ec(t);return r=e?e.length:0,jo.set(s.textContent,r),br.head.removeChild(t),r}function Ec(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var $s=s=>s instanceof HTMLFormElement?"form":s.localName;var ps=(()=>{class s{constructor(t){this.csId=et(t),this.props=Ui.getStore(t)}}return s})(),Sc=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),As=(()=>{class s extends ps{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=ii.ELEMENT_NODE,this.localName=$s(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let a=Pp(t);if(a){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(a),l=new Sc(c);csArray.prototype.push.call(this.children,l)}Ms(t)&&W.setProperty(this,"SVG",!0),(Qi(t)||_n(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===ii.ELEMENT_NODE}static getAttribute(t,e){return je(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Np=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Mp=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),kp=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Dp=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),xp=(()=>{class s extends ps{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Lp=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let a=e[n];i[n]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&_n(t)&&(i[n].value=yc(t))}return i}}return s})(),Ho={workTime:40,async:!0,initialDOM:!0};var Ys=csSymbol("InitialDom"),Bo=csSymbol.for("ignoreNextSerialization");function vc(s){return s[Bo]?(delete s[Bo],!0):!1}function Vp(s=Ho){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Ho.workTime);let n=os("serialize:callback",E=>e(E)),a=new li,c=(E,m)=>{E.hasChildNodes()&&a.push({node:E,serializedNode:m});let v=E instanceof Element&&csElementshadowRoot.apply(E);if(v){let C=m.shadowRoot=Xs(v);s.async&&s.initialDOM&&W.setProperty(v,Ys,!0),c(v,C)}},l,u=!0,y=8,p=os("work",()=>{var E;if(u)l=Xs(t),s.async&&s.initialDOM&&W.setProperty(t,Ys,!0),c(t,l),u=!1;else if(a.isEmpty)return;let m=Hp(100);for(;!a.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--y<=0&&csSetTimeout(p);return}let{node:v,serializedNode:C}=a.pop(),I=(E=C.children)!==null&&E!==void 0?E:[];if(tr(v))continue;let S=0;for(let _=csNodefirstChild.apply(v);_;_=csNodenextSibling.apply(_)){if(vc(_))continue;let P=Xs(_);s.async&&s.initialDOM&&W.setProperty(_,Ys,!0),I[S++]=P,c(_,P)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,p();else for(let E=0;E<y;E++)csSetTimeout(p,1)}}function Up(s){let r=Xs(s),t=r;if(tr(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))vc(n)||(t.children[e++]=on(n));let i=s.shadowRoot;return i&&(t.shadowRoot=on(i)),r}var on=ds(Up,"serializeSync");function Xs(s){let r,t;switch(s.nodeType){case 1:t=r=new As(s),r.attributes=Bp(s);break;case 3:t=new Sc(s);break;case 4:t=new Np(s);break;case 8:t=new Mp(s);break;case 10:t=new kp(s);break;case 9:t=new Dp(s);break;case 11:t=new xp(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function jp(){Ys=csSymbol("InitialDom")}function Hp(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=O.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=O.elapsed()),t-this.started}}}function Bp(s){return tr(s)?[]:Lp.create(s)}var Fp=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,$p="\uFF41",zp=/[^\s]/g,Gp="a";function Rr(s){let r=csString.prototype.replace.call(s,Fp,$p);return csString.prototype.replace.call(r,zp,Gp)}var qp=(()=>{class s{constructor(t,e,i,n=null,a=!1){this.Ke=t,this.ES=e,this.M=i,this.Uo=n,this.SS=a,this.vS=Ga(this.ES)}sanitize(t,e){return W.traverse(t,(i,n)=>{if(i.anonymized=this.Ke,i.nodeType===ii.TEXT_NODE){let a=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(a.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?W.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,a.data=c;return}if(As.isElement(i))return this._S(i);if(i.nodeType===ii.CDATA_SECTION_NODE){let a=i;a.data=this.Ke?Rr(a.data):this.M.checkAndAnonymizePII(a.data,this.Uo);return}}),t}setAnonymization(t){this.Ke=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[pe.ANONYMIZED_TEXT_STATUS_PROP])===pe.WHITELISTED_STATUS;return this.Ke&&!n?{anonymizedValue:Rr(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.Uo),withAnonymization:!1}}_S(t){if(W.getProperty(t,"SVG"))return;let e=je(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.Ke,n.value=this.getAnonymizedAttributeValue(t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n){if(this.wS(t,e,n))return i;if(Bu(e))return Fu(t,e,i)?this.M.anonymizePII(i):i;let a=this.SS&&e==="placeholder";return this.Ke&&($u(t,e,n)||a)?Rr(i):this.Ke?"":this.M.checkAndAnonymizePII(i,null)}wS(t,e,i){return Hu(t,e,i)||this.vS.has(e)}}return s})(),Wp=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),a=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let u=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(l==="x"?u:u&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let a=0;a<i.length;a+=1)n=csString.prototype.charCodeAt.call(i,a)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var _c=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.PS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.OS();if(i===null)return null;let{bubbles:n=!1,cancelable:a=!1,detail:c}=e;return i.initCustomEvent(t,n,a,c),i}static OS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.PS="cs.tracking.",s})();var Yp=(()=>{class s{constructor(){}onLoad(t){this.qi=t}onLoadCallbackExecute(){this.qi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.sv(t)}sv(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return F([V("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),Xp=(()=>{class s{constructor(t){this.Ho=t.performance}getRequestParameters(){if(this.iv())return{};let t=this.rv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}rv(){let t=this.Ho.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}iv(){return!(this.Ho&&this.Ho.timing&&this.Ho.timing.loadEventEnd>0)}}return s})(),Pt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(n,a)=>a.enhanceAnalysisEvent(t,n),e)}}return s})(),$=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Cr=(()=>{let s;return function(r){r.SUCCESS="success",r.FAILURE="failure",r.ATTEMPT="attempt"}(s||(s={})),s})(),_s=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.WEB="web"}(s||(s={})),s})();function Kp(s){return s.tgtHM!==void 0}function wc(s){return s.tgt!==void 0}function Jp(s){return s.tgtLk!==void 0}function Qp(s){return s.x!==void 0&&s.y!==void 0}function Zp(s){return s===Cr.SUCCESS||s===Cr.FAILURE||s===Cr.ATTEMPT}function tf(s){return s===_s.APPCUES||s===_s.CHAMELEON||s===_s.CONTENTSQUARE||s===_s.SEGMENT||s===_s.WEB}var ef=(()=>{class s{constructor(t,e,i){this.Qt=t,this.xt=e,this.At=i}processGesture(t,e){switch(t.type){case ft.TAP:this.nv(e);break;case ft.FLICK:this.ov(t,e);break;case ft.DRAG:this.av(t,e);break;default:break}}nv(t){let e={type:$.TAP,ts:0,x:0,y:0,tgt:""},i=Pt.build(t,e,this.Qt);i.tgt!==ge.INVALID_ELEMENT&&this.L(i)}av(t,e){var i,n;let a={type:$.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.At)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Pt.build(e,a,this.Qt);c.tgt!==ge.INVALID_ELEMENT&&this.L(c)}ov(t,e){var i,n;let a={type:$.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((n=this.At)===null||n===void 0)&&n.collectGestureVelocity&&(a.velocity=t.velocity);let c=Pt.build(e,a,this.Qt);c.tgt!==ge.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.lp,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.lp)}}return s.lp="AnalysisGestureTracker",F([St()],s.prototype,"processGesture",null),s})();function or(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],a=null,c=0,l,u=()=>{c=O.now(),a=null,l=s.apply(i,n),n=[],i=null},y=function(...p){if(i=this!==null&&this!==void 0?this:Z,n=[...p],e==="trailing")return a||(a=Z.csSetTimeout(u,t)),l;let E=O.now(),m=t-(E-c);return m<=0||m>t?(c=E,l=s.apply(i,n),a?(Z.csClearTimeout(a),a=null):n=[]):a||(a=Z.csSetTimeout(u,m)),l};return y.cancel=()=>{a&&(Z.csClearTimeout(a),c=0,a=null,n=[])},y.flushPending=()=>{a&&(Z.csClearTimeout(a),u())},y}var ar=s=>(r,t,e)=>{e.value=or(e.value,s)},Fo="data-cs-scroll-container";function sf(s){try{if(bt(csEventtarget.apply(s)))return!0}catch{}return!1}var bs=(()=>{let s;return function(r){function t(i){return!!(bt(i)&&sf(i)&&oi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Fo)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Fo}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Rs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),G=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})(),rf=(()=>{class s{constructor(t,e,i,n=["submit"]){this.Qt=t,this.pt=e,this.Lt=i,this.cv=n,this.hp="select, select *, input, textarea",this.lv="select, select *, input, textarea",this.up="a, a *, button, button *, select, select *, input, textarea",this.Kr="input, select, textarea",this.hv="form",this.Bo=150,this.uv=400,this.dp=!1,this.Jr=Qs((a,c)=>this.scrollListener(a,c),this.Bo),this.pp=Qs(a=>this.resizeListener(a),this.Bo),this.pv=or(a=>this.mouseMoveListener(a),this.uv),this.fv=[{boundElement:window,type:"resize",listener:()=>this.pp()},{boundElement:document,type:"scroll",listener:a=>this.Jr(a)},{boundElement:window,type:"mousemove",listener:a=>{this.pv(pp(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.fp=[{type:"change",listener:this.Lt.on(this.lv,a=>this.changeListener(a))},{type:"submit",listener:this.Lt.on(this.hv,a=>this.submitListener(a))}],this.gv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.up,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.up,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.hp,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.hp,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.Kr,a=>this.keyUpListener(a))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.Kr,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.Lt.on(this.Kr,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.Lt.on(this.Kr,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.Lt.on(this.Kr,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.fp,a=>({...a,boundElement:document}))],this.U={},this.Kc=(a,c)=>{switch(c){case"initial":case"added":this.yi(a);break;case"removed":this.Ei(a);break}},this.he=new ks(this.Kc),this.Jc()}yi(t){if(Gi(t)){let e=this.gp();csArray.prototype.forEach.call(e,i=>Nt(i))}else{let e=this.mp();csArray.prototype.forEach.call(e,i=>{Nt({...i,boundElement:t})})}}Ei(t){if(Gi(t)){let e=this.gp();csArray.prototype.forEach.call(e,i=>Mt(i))}else{let e=this.mp();csArray.prototype.forEach.call(e,i=>{Mt({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.he.observe(),this.yi(document),this.resizeListener()}stop(){this.Ei(document),this.he.disconnect()}flushPendingDebouncedListeners(){this.Jr.flushPending(),this.pp.flushPending()}yp(t){return csArray.prototype.some.call(this.cv,e=>e===t)}mp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.fp,t=>!this.yp(t.type)):(U.warn("Element.matches is not implemented yet"),[])}gp(){let t=[];return csArray.prototype.push.call(t,...this.fv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.gv):U.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.yp(e.type))}resizeListener(t){let e=bs.getScrollContainer(),i=oi(e);i&&(this.dp=!0);let n={type:$.RESIZE,ts:0,x:i?e.clientWidth:ut.windowWidth(),y:i?e.clientHeight:ut.windowHeight()};t!==void 0&&(n.d=t),this.L(n)}scrollListener(t,e){let i=bs.isEventOnScrollContainer(e);!this.dp&&i&&this.resizeListener();let n={type:$.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:ut.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:ut.windowOffsetY(),d:t},a=Pt.build(e,n,this.Qt);this.L(a)}mouseMoveListener(t){let e={type:$.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Pt.build(t,e,this.Qt);this.L(i)}mouseDownListener(t){let e={type:$.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}mouseUpListener(t){let e={type:$.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}clickListener(t){let e={type:$.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}mouseOverListener(t){let e={type:$.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}mouseOutListener(t){let e={type:$.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.pt.getEventTargetPath(t)},i=Pt.build(t,e,this.Qt);this.ue(i)}focusInListener(t){let e={type:$.FOCUSIN,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Pt.build(t,e,this.Qt);this.ue(i)}focusOutListener(t){let e={type:$.FOCUSOUT,ts:0,tgt:this.pt.getEventTargetPath(t)},i=Pt.build(t,e,this.Qt);this.ue(i)}changeListener(t){let e={type:$.CHANGE,ts:0,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}submitListener(t){let e={type:$.SUBMIT,ts:0,tgt:""},i=Pt.build(t,e,this.Qt);this.ue(i)}copyListener(t){let e={type:$.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Rs.COPY};this.ue(e)}cutListener(t){let e={type:$.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Rs.CUT};this.ue(e)}pasteListener(t){let e={type:$.COMMAND,ts:0,tgt:this.pt.getEventTargetPath(t),key:Rs.PASTE};this.ue(e)}keyUpListener(t){let e={type:$.KEYUP,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.Ep(t)};this.ue(e)}keyDownListener(t){let e={type:$.KEYDOWN,ts:0,tgt:this.pt.getEventTargetPath(t),key:this.Ep(t)};this.ue(e)}Ep(t){let e=this.U[t.key];return e===void 0?G.ALPHANUMERICAL:e}ue(t){wc(t)&&t.tgt!==ge.INVALID_ELEMENT&&this.L(t)}Jc(){this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Enter=G.ENTER,this.U.Backspace=G.BACKSPACE,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB}}return F([V("Event handler type: resize")],s.prototype,"resizeListener",null),F([V("Event handler type: scroll")],s.prototype,"scrollListener",null),F([V("Event handler type: mouseMove"),St()],s.prototype,"mouseMoveListener",null),F([V("Event handler type: mouseDown"),St()],s.prototype,"mouseDownListener",null),F([V("Event handler type: mouseUp"),St()],s.prototype,"mouseUpListener",null),F([V("Event handler type: click"),St()],s.prototype,"clickListener",null),F([V("Event handler type: mouseOver"),St()],s.prototype,"mouseOverListener",null),F([V("Event handler type: mouseOut"),St()],s.prototype,"mouseOutListener",null),F([V("Event handler type: focusIn")],s.prototype,"focusInListener",null),F([V("Event handler type: focusOut")],s.prototype,"focusOutListener",null),F([V("Event handler type: change")],s.prototype,"changeListener",null),F([V("Event handler type: submit"),St()],s.prototype,"submitListener",null),F([V("Event handler type: copy")],s.prototype,"copyListener",null),F([V("Event handler type: cut")],s.prototype,"cutListener",null),F([V("Event handler type: paste")],s.prototype,"pasteListener",null),F([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),nf=(()=>{class s{constructor(){this.Sp=100,this.Qr=0,this.Zr=ut.documentHeight(),this.vp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Qr=this.Qc(bs.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){Nt(this.vp)}stop(){Mt(this.vp)}reset(){let t=bs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Qc(t);this.Zr=i,this.Qr=e,this.L()}Qc(t){let e=0,i=0;if(t===null)i=ut.documentHeight(),e=this.mv(i);else{let n=this.yv(t);i=this._p(t,n),e=this.Ev(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;bs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Qc(e);(i>this.Qr||n>this.Zr)&&(this.Qr=i,n>this.Zr&&(this.Zr=n),this.L())}mv(t){let e=Math.round(this.Sv()/t*100);return Math.min(e,this.Sp)}Sv(){let t=ut.windowHeight();return ut.windowOffsetY()+t}Ev(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this._p(t,e),a=Math.round(i/n*100);return Math.min(a,this.Sp)}yv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}_p(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Qr}`,mdh:`${this.Zr}`}}}return F([V("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),Gt=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Tc=(()=>{class s{constructor(){this.V=!1,this.Fs=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Zt(Gt.Hidden):this.Zt(Gt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Zt(Gt.PagehideHidden):this.Zt(Gt.PagehideVisible);case"blur":return this.Zt(Gt.Blur);case"navigate":return this.vv(t)?this.Zt(Gt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.V||(this.V=!0,this.Zc(),this._v(),this.wv(),mo()&&this.Tv())}stop(){this.V&&(this.V=!1,this.tl(),this.Av(),this.bv(),mo()&&this.Rv())}onEvent(t){this.Zt=t}Tv(){window.navigation.addEventListener("navigate",this.Fs)}Rv(){window.navigation.removeEventListener("navigate",this.Fs)}Zc(){document.addEventListener("visibilitychange",this.Fs)}tl(){document.removeEventListener("visibilitychange",this.Fs)}_v(){window.addEventListener("pagehide",this.Fs)}Av(){window.removeEventListener("pagehide",this.Fs)}wv(){window.addEventListener("blur",this.Fs)}bv(){window.removeEventListener("blur",this.Fs)}vv(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var of=1024,af=512,Ir=1024,Pr="||",cf=(()=>{class s extends Ut{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v,C,I,S,_,P,N,A,j){super(),this.f=t,this.$s=e,this.xt=i,this.er=n,this.sl=a,this.Fe=c,this.be=l,this.il=u,this.G=y,this.Jt=p,this.Q=E,this.rl=m,this.$e=v,this.W=C,this.Fo=I,this.gs=S,this.ms=_,this.nl=P,this.Si=N,this.vi=A,this._i=j,this.Bs=new _c,this.$o=!1,this.ol=[]}init(){var t,e,i,n,a,c,l;this.$s.onEvent(u=>this.Nt(u)),this.xt.onEvent(u=>this.Nt(u)),this.er.onEvent(()=>{let u=this.er.getRequestParameters();this.W.setQueryParams(u),this.be.setQueryParams(u)}),this.rl.onEvent(u=>this.Re(u)),this.al(),(t=this.Fo)===null||t===void 0||t.onEvent(u=>this.Nt(u)),(e=this.Si)===null||e===void 0||e.onEvent(u=>this.Nt(u)),(i=this.gs)===null||i===void 0||i.onEvent(u=>this.Nt(u)),(n=this.ms)===null||n===void 0||n.onEvent(u=>this.Nt(u)),this.Cv(),(a=this.nl)===null||a===void 0||a.onEvent(u=>this.Re(u)),(c=this.vi)===null||c===void 0||c.onEvent(u=>this.Re(u)),(l=this._i)===null||l===void 0||l.onEvent(u=>this.Re(u))}Cv(){this.be.onBeaconSuccess(()=>{this.Fe.clearEvents()}),this.be.onBeaconFailure(t=>{this.Iv(t)})}initStates(){let t=this.il.getRequestParameters(),e=this.sl.getRequestParameters(),i=this.er.getRequestParameters();this.W.setQueryParams(t),this.W.setQueryParams(e),this.W.setQueryParams(i),this.be.setQueryParams(t),this.be.setQueryParams(e),this.be.setQueryParams(i),this.cl()}clearStates(t){var e,i;this.$s.flushPendingDebouncedListeners(),(e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.ll(),this.sendLastMessageBeacon()):this.sendEvents(),this.er.reset(),this.W.removeQueryParams()}onStart(t){var e,i,n,a,c,l,u;t||(e=this.nl)===null||e===void 0||e.start(),this.$e.start(),this.$s.start(),this.er.start(),this.xt.start(),(i=this.Fo)===null||i===void 0||i.start(),(n=this.ms)===null||n===void 0||n.start(),t||this.rl.start(),(a=this.gs)===null||a===void 0||a.start(),(c=this.Si)===null||c===void 0||c.start(),(l=this.vi)===null||l===void 0||l.start(),(u=this._i)===null||u===void 0||u.start(),csArray.prototype.forEach.call(this.ol,y=>{this.Re(y)}),this.ol=[]}collectInitialEvents(){var t;(t=this.Fo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Re(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.K(t)}Re(t){this.G.isCurrentPageviewValid()&&this.K(t)}Nt(t){this.G.refreshSession(),this.G.isSessionValid()&&this.K(t)}K(t){this.Fe.addEvent(this.Pv(t)),this.Fe.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Bs.emit("analysisEvent",{...t,typeName:$[t.type]})}Pv(t){return t.ts=this.wi(),t}ll(){this.be.setQueryParams({hlm:"true"}),this.$o=!0}sendLastMessageBeacon(){this.be.removeQueryParams(["i"]),this.be.setQueryParams(this.il.getRequestParameters()),this.be.setQueryParams(this.sl.getRequestParameters()),this.be.send(this.Fe.stringifyEvents()),this.be.removeQueryParams(["hlm"]),this.$o=!1}sendEvents(){this.Fe.isEmpty()||(this.be.removeQueryParams(["i"]),this.W.setQueryParams(this.il.getRequestParameters()),this.W.setQueryParams(this.sl.getRequestParameters()),this.W.send(this.Fe.getEvents()),this.Fe.clearEvents())}onStop(){var t,e,i,n,a,c,l;this.$e.stop(),this.$s.stop(),this.er.stop(),this.xt.stop(),this.rl.stop(),(t=this.Fo)===null||t===void 0||t.stop(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.ms)===null||i===void 0||i.stop(),(n=this.Si)===null||n===void 0||n.stop(),this.Fe.empty(),(a=this.nl)===null||a===void 0||a.stop(),(c=this.vi)===null||c===void 0||c.stop(),(l=this._i)===null||l===void 0||l.stop()}cl(){this.Qe=O.now()}wi(){return O.now()-this.Qe}al(){this.$e.onEvent(t=>{var e,i;t!==Gt.Visible&&((e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Gt.PagehideVisible?this.ll():t===Gt.PagehideHidden?(this.ll(),this.sendLastMessageBeacon()):(!this.Fe.isEmpty()||this.$o)&&this.sendLastMessageBeacon())})}Iv(t){try{(!this.Fe.isEmpty()||this.$o)&&this.Jt.save({requestParameters:t,events:this.Fe.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Zp(t)||!oi(e))throw new Error(`Command misuse: ${Dc}`);let i={status:t,type:$.SUBMIT_COMMAND,ts:0,tgt:this.Q.getElementPath(e)};i.tgt!==ge.INVALID_ELEMENT&&this.Re(i)}pushCustomEvent(t,e,i){if(!(z(t)&&!zr(t))||i!==void 0&&!ba(i))throw new Error(`Command misuse: ${dn}`);let n=tf(e)?e:_s.WEB,a=this.Ov(i),c={type:$.CUSTOM_EVENT,ts:0,customEventName:rs.truncate(t,of),sourceLibrary:n,...$r(a)?{}:{properties:a}};this.isStarted?this.Re(c):csArray.prototype.push.call(this.ol,c)}Ov(t){let e={};for(let i in t){if(i.length>af)continue;let n=t[i];if(qt(n)||Bi(n))e[i]=csString(n);else if(this.wp(n))e[i]=rs.truncate(n,Ir);else if(this.Nv(n)){let a=this.Mv(n);a!==""&&(e[i]=a)}}return e}Mv(t){let e="";for(let i=0;i<t.length;i++){let n=t[i];if(!qt(n)&&!Bi(n)&&!this.wp(n))continue;let a=csString(n);if(e==="")e=rs.truncate(a,Ir);else if(e.length+Pr.length+a.length<=Ir)e+=Pr+a;else break}return e}wp(t){return z(t)&&!zr(t)&&!csString.prototype.includes.call(t,Pr)}Nv(t){return csArray.isArray(t)&&t.length>0}}return s})(),ri=(()=>{class s{constructor(...t){this.Tp=t}addProvider(t){csArray.prototype.push.call(this.Tp,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Tp,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),lf=(()=>{class s{constructor(t,e){this.Jt=t,this.W=e,this.Ap=()=>{document.visibilityState==="visible"&&this.bp()}}start(){this.bp(),this.Zc()}stop(){this.tl()}getRecoveryStorage(){return this.Jt}bp(){let t=this.Jt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.W.send(i,e)}}Zc(){document.addEventListener("visibilitychange",this.Ap)}tl(){document.removeEventListener("visibilitychange",this.Ap)}}return s})(),Ac=(()=>{class s{constructor(t){this.Rp=[],this.Cp=[],this.Xt={},this.Kt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Xt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Xt[e]}):this.Xt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Rp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Cp,t)}send(t){let e=si.toQuery({...this.Xt,ct:sr.UNCOMPRESSED}),i=this.kv(e,t);return i?csArray.prototype.forEach.call(this.Rp,n=>n()):csArray.prototype.forEach.call(this.Cp,n=>n(this.Xt)),i}kv(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Kt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Kt}?${t}`,e||"")}}return s})(),hf=(()=>{class s{constructor(t){this.ir=t}save(t){localStorage.setItem(this.ir,csJSON.stringify(t))}clear(){localStorage.removeItem(this.ir)}recover(){let t=localStorage.getItem(this.ir);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{U.error(`Invalid item in localStorage.
         (key:${this.ir}; value:${t})`)}finally{this.clear()}return e}}return s})(),uf=(()=>{class s{constructor(t){this.tn=t,this.rn=e=>this.processMetric(e),this.V=!1}onEvent(t){this.L=t}start(){this.V||(this.V=!0,this.tn.onFCP(this.rn),this.tn.onCLS(this.rn),this.tn.onLCP(this.rn),this.tn.onTTFB(this.rn),this.tn.onINP(this.rn))}stop(){this.V=!1}processMetric(t){if(!this.V)return;let e={type:$.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return F([V("Performance metric handler")],s.prototype,"processMetric",null),s})(),bc=-1,Ds=s=>{addEventListener("pageshow",r=>{r.persisted&&(bc=r.timeStamp,s(r))},!0)},ne=(s,r,t,e)=>{let i,n;return a=>{r.value>=0&&(a||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},Pn=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},On=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},pi=()=>{var r;let s=On();return(r=s==null?void 0:s.activationStart)!=null?r:0},oe=(s,r=-1)=>{let t=On(),e="navigate";return bc>=0?e="back-forward-cache":t&&(document.prerendering||pi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Or=new WeakMap;function Nn(s,r){return Or.get(s)||Or.set(s,new r),Or.get(s)}var an=class{constructor(){ce(this,"t");ce(this,"i",0);ce(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},fi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},Mn=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Ts=-1,$o=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Ji=s=>{document.visibilityState==="hidden"&&Ts>-1&&(Ts=s.type==="visibilitychange"?s.timeStamp:0,df())},zo=()=>{addEventListener("visibilitychange",Ji,!0),addEventListener("prerenderingchange",Ji,!0)},df=()=>{removeEventListener("visibilitychange",Ji,!0),removeEventListener("prerenderingchange",Ji,!0)},Rc=()=>{var s;if(Ts<0){let r=pi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Ts=t!=null?t:$o(),zo(),Ds(()=>{setTimeout(()=>{Ts=$o(),zo()})})}return{get firstHiddenTime(){return Ts}}},cr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Go=[1800,3e3],Cc=(s,r={})=>{cr(()=>{let t=Rc(),e,i=oe("FCP"),n=fi("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-pi(),0),i.entries.push(c),e(!0)))});n&&(e=ne(s,i,Go,r.reportAllChanges),Ds(a=>{i=oe("FCP"),e=ne(s,i,Go,r.reportAllChanges),Pn(()=>{i.value=performance.now()-a.timeStamp,e(!0)})}))})},qo=[.1,.25],pf=(s,r={})=>{Cc(Mn(()=>{let t,e=oe("CLS",0),i=Nn(r,an),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},a=fi("layout-shift",n);a&&(t=ne(s,e,qo,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Ds(()=>{i.i=0,e=oe("CLS",0),t=ne(s,e,qo,r.reportAllChanges),Pn(()=>t())}),setTimeout(t))}))},Ic=0,Nr=1/0,Ni=0,ff=s=>{for(let r of s)r.interactionId&&(Nr=Math.min(Nr,r.interactionId),Ni=Math.max(Ni,r.interactionId),Ic=Ni?(Ni-Nr)/7+1:0)},cn,Wo=()=>{var s;return cn?Ic:(s=performance.interactionCount)!=null?s:0},gf=()=>{"interactionCount"in performance||cn||(cn=fi("event",ff,{type:"event",buffered:!0,durationThreshold:0}))},Yo=0,ln=class{constructor(){ce(this,"u",[]);ce(this,"l",new Map);ce(this,"m");ce(this,"p")}v(){Yo=Wo(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Wo()-Yo)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((a,c)=>c.T-a.T),this.u.length>10){let a=this.u.splice(10);for(let c of a)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},Pc=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=Mn(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Xo=[200,500],mf=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&cr(()=>{var c;gf();let t,e=oe("INP"),i=Nn(r,ln),n=l=>{Pc(()=>{for(let y of l)i.h(y);let u=i.P();u&&u.T!==e.value&&(e.value=u.T,e.entries=u.entries,t())})},a=fi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=ne(s,e,Xo,r.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(a.takeRecords()),t(!0))}),Ds(()=>{i.v(),e=oe("INP"),t=ne(s,e,Xo,r.reportAllChanges)}))})},hn=class{constructor(){ce(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},Ko=[2500,4e3],yf=(s,r={})=>{cr(()=>{let t=Rc(),e,i=oe("LCP"),n=Nn(r,hn),a=l=>{r.reportAllChanges||(l=l.slice(-1));for(let u of l)n.h(u),u.startTime<t.firstHiddenTime&&(i.value=Math.max(u.startTime-pi(),0),i.entries=[u],e())},c=fi("largest-contentful-paint",a);if(c){e=ne(s,i,Ko,r.reportAllChanges);let l=Mn(()=>{a(c.takeRecords()),c.disconnect(),e(!0)});for(let u of["keydown","click","visibilitychange"])addEventListener(u,()=>Pc(l),{capture:!0,once:!0});Ds(u=>{i=oe("LCP"),e=ne(s,i,Ko,r.reportAllChanges),Pn(()=>{i.value=performance.now()-u.timeStamp,e(!0)})})}})},Jo=[800,1800],un=s=>{document.prerendering?cr(()=>un(s)):document.readyState!=="complete"?addEventListener("load",()=>un(s),!0):setTimeout(s)},Ef=(s,r={})=>{let t=oe("TTFB"),e=ne(s,t,Jo,r.reportAllChanges);un(()=>{let i=On();i&&(t.value=Math.max(i.responseStart-pi(),0),t.entries=[i],e(!0),Ds(()=>{t=oe("TTFB",0),e=ne(s,t,Jo,r.reportAllChanges),e(!0)}))})},Sf=(()=>{class s{onFCP(t){try{Cc(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{pf(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{yf(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{Ef(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{mf(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("INP")}}}return s})();var gi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),vf=(()=>{class s extends gi{constructor(){super(...arguments),this.supportedEventTypes=[$.CHANGE],this.r_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=pt(t);return Zi(i)&&csArray.prototype.indexOf.call(this.r_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Oc=(()=>{class s extends gi{constructor(t){super(),this.pt=t,this.supportedEventTypes=[$.MOUSEDOWN,$.MOUSEUP,$.CLICK,$.MOUSEOVER,$.TAP,$.DRAG,$.FLICK,$.SUBMIT,$.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.pt.getEventTargetPath(t)),e}}return s})(),Qo=65535,_f=(()=>{let s;return function(r){function t(e){let i=pt(e);if(!i||!ot(i)||!ze(i.getBoundingClientRect)||!bt(e.pageX)||!bt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),a=e.pageX-n.left-ut.windowOffsetX(),c=e.pageY-n.top-ut.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),u=Math.max(i.scrollHeight,n.height),y=Math.round(a/l*Qo),p=Math.round(c/u*Qo);return{xRel:y,yRel:p,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),wf=Math.pow(2,31);function Tf(s,r=0){let l=r>>>0,u=s.length;for(let m=0;m<u-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let y=0,p=u&3,E=u-p;switch(p){case 3:y^=(csString.prototype.charCodeAt.call(s,E+2)&255)<<16;case 2:y^=(csString.prototype.charCodeAt.call(s,E+1)&255)<<8;case 1:y^=csString.prototype.charCodeAt.call(s,E)&255,y=Math.imul(y,3432918353),y=y<<15|y>>>17,y=Math.imul(y,461845907),l^=y}return l^=u,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Nc(s){return Tf(s)+wf>>>0}var Af=(()=>{class s extends gi{constructor(t,e){super(),this.ls=t,this.pt=e,this.supportedEventTypes=[$.MOUSEMOVE,$.CLICK],this.vl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:a}=_f.getRelativePosition(t);if(i){let c=this.pt.getEventTargetPath(t);c!==ge.INVALID_ELEMENT&&(e.xRel=n,e.yRel=a,e.type===$.MOUSEMOVE&&(c!==this.vl||this.ls.iframesTracking?(this.vl=c,e.tgtHM=c,this.ls.isChild||(e.tgtHMH=Nc(e.tgtHM))):e.tgtHM=""))}else e.type===$.MOUSEMOVE&&(this.vl="");return e}}return s})(),xe=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Zo=100,Mc=(()=>{class s extends gi{constructor(t,e,i){super(),this.f=t,this.ce=e,this.M=i,this.supportedEventTypes=[$.TAP,$.CLICK,$.SUBMIT]}n_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Tn(n.parentElement)||wn(n.parentElement)||this.ce.getElementSensitiveStatus(n.parentElement)!==xe.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Zo)break;n=i.nextNode()}return!1}o_(t){let e=rn(t,"button,a");return e||(this.f.collectTargetText===Jr.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(oi(csEventtarget.apply(t))){let i=this.o_(csEventtarget.apply(t));if(i&&z(i.textContent)&&!this.n_(i)&&!this.M.hasPII(i.textContent,this.f.anonymizeDigits)){let n=rs.truncate(csString.prototype.trim.call(i.textContent),Zo);n.length>0&&(e.text=n)}}return e}}return s})(),kc=(()=>{class s extends gi{constructor(t,e){super(),this.pt=t,this.ce=e,this.supportedEventTypes=[$.CLICK,$.SUBMIT,$.CHANGE,$.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.ce.getSensitiveStatus().useAnonymization,{path:n,hierarchy:a}=this.pt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=a,e}}return s})();function bf(s,r,t){let e=[];return csArray.prototype.push.call(e,new Af(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Mc(s,t,new di)),s.collectHierarchy&&csArray.prototype.push.call(e,new kc(r,t)),csArray.prototype.push.call(e,new vf,new Oc(r)),e}function Rf(s,r,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Mc(s,t,new di)),s.collectHierarchy&&csArray.prototype.push.call(e,new kc(r,t)),csArray.prototype.push.call(e,new Oc(r)),e}var Cf=50,If=(()=>{class s{constructor(t=[]){this.Vt=t}stringifyEvents(){return csJSON.stringify(this.Vt)}addEvent(t){csArray.prototype.push.call(this.Vt,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Vt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Cf}isEmpty(){return this.Vt.length===0}getEvents(){return this.Vt}}return s})(),Pf="csAnalysisEventsPersisted",ta="v2/events",Dc=["submit"],dn=["trackEvent"];var Of=(()=>{class s{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v){this.f=t,this.gt=e,this.I=i,this.Q=n,this.Lt=a,this.E=c,this.G=l,this.xt=u,this.St=y,this.de=p,this.J=E,this.ce=m,this._l=v}init(){let t=new If,e=this.de.create(`${this.f.getTrackerUri()}/${ta}`,!0,"base64");this.Wo=this.a_(e),this.Ce=this.c_(t,this.Wo.getRecoveryStorage(),e),this.Ce.init(),this.J.addListener(this.Ce),this.St.addListener(this.Ce),this.E.register(Dc,(i,n)=>{this.Ce.pushSubmitCommandEvent(i,n)}),this.E.register(dn,i=>{if(!ba(i))throw new Error(`Command misuse: ${dn}`);this.Ce.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Wo.start(),this.Ce.start(t)}onAfterNaturalPageView(){this.Ce.initStates()}onAfterArtificialPageView(){this.Ce.initStates(),this.Ce.collectInitialEvents()}onArtificialPageViewEnd(){this.Ce.clearStates(!0)}onBeforeSessionRenewal(){this.Ce.clearStates(),this.Ce.stop(),this.Wo.stop()}onOptout(){this.Ce.stop(),this.Wo.stop()}c_(t,e,i){var n;let a=new Xp(window),c=new nf,l=bf(this.f,this.Q,this.ce),u=[];this.f.collectSubmit||csArray.prototype.push.call(u,"submit");let y=new rf(l,this.Q,this.Lt,u),p=Rf(this.f,this.Q,this.ce),E=new ef(p,this.xt),m=new uf(new Sf),v=new Tc,C,I,S,_=new Ac(`${this.f.getTrackerUri()}/${ta}`),P=new ri(this.gt,this.I),N,A,j,tt;return new cf(this.f,y,E,c,a,t,_,P,this.G,e,this.Q,m,v,i,C,I,S,N,A,j,tt)}a_(t){return new lf(new hf(Pf),t)}}return s})();var Nf=512,Mf=255,Mr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Nf),this.value=z(e)?csString.prototype.slice.call(e,0,Mf):e}static isKeyValid(t){return z(t)}static isValueValid(t){return z(t)||Cs(t)}}return s})(),kf=(()=>{class s extends Ut{constructor(t,e){super(),this.zt=t,this.M=e,this.Dl=[]}onStart(){csArray.prototype.forEach.call(this.Dl,t=>this.ef(t.key,t.value)),this.Dl=[]}onStop(){}ef(t,e){let i=this.M.anonymizePII(t),n=Cs(e)?e:this.M.anonymizePII(e);this.zt.add(new Mr(i,n))}trackDynamicVariable(t,e){if(Mr.isKeyValid(t)&&Mr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Dl,{key:t,value:e});return}this.ef(t,e)}else throw new Error(`Command misuse: ${xc[0]}`)}}return s})(),Df=(()=>{class s{constructor(t){this.pe=t,this.zt=[]}add(t){csArray.prototype.push.call(this.zt,t),this.setBatchReadyCall()}clear(){this.zt=[]}onBatchReady(t){this.j_=t}getRequestParameters(){let t={};for(let e of this.zt)t[e.key]=e.value;return{dv:this.pe.compressSync(csJSON.stringify(t),"base64"),ct:this.pe.algorithm}}setBatchReadyCall(){this.j_()}}return F([ar({wait:0,mode:"trailing"}),V("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),xf="dvar",xc=["trackDynamicVariable"],Lf=(()=>{class s{constructor(t,e,i,n,a,c){this.E=t,this.R=e,this.f=i,this.xe=n,this.pe=a,this.M=c,this.hs=new Ps(this.f.getTrackerUri(),xf),this.zt=new Df(this.pe),this.Mi=new kf(this.zt,this.M)}init(){this.hs.setRequestParametersProviders(this.xe,this.zt),this.R.setDynamicVariablesService(this.Mi),this.zt.onBatchReady(()=>this.hs.send()),this.hs.after(()=>this.zt.clear()),this.E.register(xc,({key:t,value:e}={})=>{this.Mi.trackDynamicVariable(t,e)})}onStartTracking(){this.Mi.start()}}return s})(),ea=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),z(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return bt(t)&&qt(t.revenue)&&z(t.currency)&&t.currency.length<=10&&(!bt(t.id)||z(t.id))}}return s})(),Lc=100,Vf=100,Uf=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Fc(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Q(t.sku)&&(e.sku=t.sku),Q(t.category)&&(e.category=t.category),Q(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Lc)),e}static Fc(t){return bt(t)&&z(t.id)&&z(t.name)&&qt(parseFloat(t.price))&&Cs(parseInt(t.quantity,10))&&(!Q(t.sku)||z(t.sku))&&(!Q(t.category)||z(t.category))&&(!Q(t.merchant)||z(t.merchant))}}return s})(),jf=(()=>{class s extends Ut{constructor(t,e,i){super(),this.M=t,this.sf=e,this.G=i,this.xl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.xl,t=>{this.fe=t.transaction,this.En=t.transactionItems,this.sendTransaction()}),this.xl=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.fe=ea.from(e)}getTransaction(){return this.fe}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.xl,{transaction:this.fe,transactionItems:[...this.En]}),this.clear();return}if(!(this.sf===null||this.G===null)&&(this.G.refreshSession(),!!this.G.isSessionValid())){if(!this.fe.hasValidRevenue()){U.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.sf.send()}}addItem(t){if(ze(t))throw new Error(`Command misuse: ${Vc[1]}`);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=Uf.from(e);i!==null&&csArray.prototype.push.call(this.En,i)}getItems(){return this.En}clear(){this.fe=ea.from({revenue:NaN}),this.En=[]}getRequestParameters(){let t={id:this.fe.id?`${this.fe.id}`:"",revenue:`${this.fe.revenue}`};return Q(this.fe.tax)&&(t.tax=`${this.fe.tax}`),Q(this.fe.shipping)&&(t.shipping=`${this.fe.shipping}`),Q(this.fe.currency)&&(t.cu=`${this.fe.currency}`),t.items=window.csJSON.stringify(this.En),t}}return s})(),Hf=(()=>{class s extends Ut{constructor(t,e){super(),this.H_=t,this.G=e,this.Ie=null,this.Ll=[]}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.Ie=t,this.rf()}),this.Ll=[]}onStop(){}addToCart(t){let e={};z(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Vf)),z(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Lc)),(e.sku||e.merchant)&&(this.Ie=e,this.rf())}getCartItem(){return this.Ie}rf(){if(!this.isStarted&&this.Ie!==null){csArray.prototype.push.call(this.Ll,this.Ie),this.clear();return}this.G.refreshSession(),this.G.isSessionValid()&&this.H_.send()}clear(){this.Ie=null}getRequestParameters(){if(!this.Ie)return{};let t={};return z(this.Ie.sku)&&this.Ie.sku.length>0&&(t.sku=this.Ie.sku),z(this.Ie.merchant)&&this.Ie.merchant.length>0&&(t.me=this.Ie.merchant),t}}return s})(),Bf=["ecommerce:addToCart","ec:cart:add"],Ff=["ecommerce:addTransaction","ec:transaction:create"],Vc=["ecommerce:addItem","ec:transaction:items:add"],$f=["ecommerce:send","ec:transaction:send"],zf=(()=>{class s{constructor(t,e,i,n,a,c,l){this.f=t,this.gt=e,this.I=i,this.E=n,this.M=a,this.G=c,this.A=l}init(){let t=new Ps(this.f.getTrackerUri(),"transaction"),e=new Ps(this.f.getTrackerUri(),"addtocart");this.es=new jf(this.M,t,this.G),this.sa=new Hf(e,this.G);let i=new ri(this.gt,this.I,this.A,this.es);t.setRequestParametersProviders(i),t.after(()=>{this.es.clear()});let n=new ri(this.gt,this.I,this.A,this.sa);e.setRequestParametersProviders(n),e.after(()=>{this.sa.clear()}),this.E.register(Ff,a=>{this.es.addTransaction(a)}),this.E.register(Vc,a=>this.es.addItem(a)),this.E.register($f,()=>this.es.sendTransaction()),this.E.register(Bf,a=>{this.sa.addToCart(a)})}onStartTracking(){this.es.start(),this.sa.start()}}return s})();var Gf=2,kn=(()=>{class s{constructor(t){this.Y_=t,this.ia=0}addString(t){this.ia+=t.length*Gf}addArrayBuffer(t){this.ia+=t.byteLength}isThresholdReached(){return this.ia>this.Y_}reset(){this.ia=0}}return s})();var qf=()=>(s,r,t)=>{t.value=Wf(t.value)};function Wf(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let a=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,a[r])return;a[r]=!0,Sn(()=>{a[r]=!1,s.apply(a,t)})};return i.oncePerTickSymbol=r,i}qf.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var Mi=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),He=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===x.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),Yf=(()=>{class s{constructor(t,e,i,n){this.I=t,this.R=e,this.f=i,this.ns=n,this.vf=!1}isNaturalPageViewSent(){return this.vf}setNaturalPageViewSent(t){this.vf=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,n=this.f.uxaDomain,a=t.pageNumber,c=this.ns.getPageViewType(),l=this.R.isReplayRecorded(),u=this.Iw(t);return{projectId:i,sessionKey:e,pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:u,...this.f.smbConfig}}getSessionKey(){let t=this.I.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Iw(t){return He.isReplayConsentNeeded(this.f)?t.collectState===x.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Mi.NOT_EXPRESSED:t.collectState===x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Mi.WITHDRAWN:Mi.GRANTED:Mi.NOT_NEEDED}}return s})(),Xf=(()=>{class s{constructor(t){this.It=t,this.ee=[]}handleCommand(t){if(ze(t)&&(this.Rn(t),this.It.isNaturalPageViewSent())){let e=this.It.getTrackingContext();e!==null&&this.jt(t,e)}}Rn(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.It.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.jt(e,t))}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Kf=(()=>{class s{constructor(t){this.It=t,this.ki=[]}handleCommand(t){if(this.It.isNaturalPageViewSent())return this.Pw(t);this.Cn(t)}Pw(t){let e=this.It.getSessionKey();return this._f(t)&&e!==null&&this.jt(t.callback,e),e}Cn(t){this._f(t)&&csArray.prototype.push.call(this.ki,t.callback)}flushPendingCallbacks(){let t=this.It.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.ki,e=>{this.jt(e,t)}),this.ki=[]}_f(t){return t&&typeof t.callback=="function"}jt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function Jf(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:a,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),u;if(t&&l){let[,y,p]=l;n?u=`${c}/sites/${n}/player?uu=${y}&sn=${p}&pn=${e}`:u=`${a}/quick-playback/index.html?pid=${i}&uu=${y}&sn=${p}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(u+=`&t=${O.now()-r.recordingStartTimestamp}`)}return{replayLink:u,isRecording:t}}var Qf=(()=>{class s{constructor(t){this.It=t}handleCommand(t,e){Is(t)&&ze(e)&&this.jt(t,e)}jt(t,e){csSetTimeout(()=>{let i=this.It.getTrackingContext();if(i){let n=Jf(i,t);e(n)}})}}return s})(),Zf=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!ze(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.Oe=e,this.wf(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.Ow(t)&&(this.Oe=t,this.ee.forEach(e=>this.wf(e,t)))}wf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Ow(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:a,collectState:c}=t;return this.Oe&&(this.Oe.isRecording!==e||this.Oe.recordingStartTimestamp!==i||this.Oe.etrState!==n||this.Oe.etrStatus!==a||this.Oe.collectState!==c)}}return s})(),tg=["afterPageView"],eg=["getSessionKey"],sg=["onRecordingContextChange","onRecordingStateChange"],ig=["replay:link:generate"],rg=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.I=t,this.R=e,this.E=i,this.St=n,this.Z=a,this.f=c,this.ns=l,this.Us=u,this.Tf=null}init(){this.It=new Yf(this.I,this.R,this.f,this.ns),this.Bl=new Xf(this.It),this.Af=new Kf(this.It),this.In=new Zf,this.Nw=new Qf(this.It),this.E.register(eg,t=>this.Af.handleCommand(t)),this.E.register(tg,t=>this.Bl.handleCommand(t)),this.E.register(sg,t=>this.In.handleCommand(t,this.Us.getRecordingContext())),this.E.register(ig,(t,e)=>{this.fr&&this.Nw.handleCommand({...t,recordingStartTimestamp:this.Us.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.It.setNaturalPageViewSent(!0),this.Af.flushPendingCallbacks(),this.Bl.executeRegisteredCallbacks(),(t=this.Tf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Bl.executeRegisteredCallbacks(),(t=this.Tf)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.In.executeCallbacks(this.Us.getRecordingContext())}setRecordingService(t){this.fr=t}}return F([ar({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),ng=(()=>{class s{constructor(t){this.E=t}init(){this.bf(s.Mw,Ja),this.bf(s.kw,Ka)}bf(t,e){this.E.register([t],(i,n)=>{!z(i)||!(z(n)||Ge(n))||U.error(n,`${e}${i}`)})}}return s.kw="logSnippetError",s.Mw="logImplementationSnippetError",s})(),og="@ETP@",sa="@user-identifier@",ag=(()=>{class s extends Ut{constructor(t,e,i,n){super(),this.f=t,this.Dw=e,this.pe=i,this.J=n,this.Fl=[],this.Di=[]}onStart(){csArray.prototype.forEach.call(this.Fl,t=>this.Rf(t)),this.Fl=[],csArray.prototype.forEach.call(this.Di,t=>this.Cf(t)),this.Di=[]}onStop(){}Rf(t){this.xw(t)?Ws.isSupported()&&this.Lw(t):this.Vw(t)}trackPageEvent(t){if(!s.If(t))throw new Error(`Command misuse: ${Uc[0]}`);this.isStarted?this.Rf(t):csArray.prototype.push.call(this.Fl,t)}xw(t){return Qr(t,sa)}async Lw(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,sa.length);if(e.length>Ws.MAX_DIGEST_INPUT_SIZE){U.warn("UserIdentifier event: invalid user identifier");return}let i=await Ws.digest(e);i?(this.gr={eventName:i,isETR:!1,isCustomHashId:!0},this.da()):U.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.J.emitUserIdentifierEvent(e)}Vw(t){this.J.emitPageEvent(t),this.gr={eventName:t,isETR:!1,isCustomHashId:!1},this.da(),this.f.tagDeploymentMode===ls.LoadClicktalePtc&&Uo.sendPageEvent(t)}Cf(t){this.f.malkaEtrEnabled?this.Uw(t):this.jw(t)}trackEventTriggerRecording(t){if(!s.If(t))throw new Error(`Command misuse: ${jc[0]}`);this.isStarted?this.Cf(t):csArray.prototype.push.call(this.Di,t)}Uw(t){Qr(t,og)?this.J.emitEventTriggerRecording(t,$e.ETR_PAGE):this.J.emitEventTriggerRecording(t,$e.ETR_SESSION),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.da()}jw(t){wp(this.f)&&(this.J.emitEventTriggerRecording(t,$e.ETR_LEGACY),this.gr={eventName:t,isETR:!0,isCustomHashId:!1},this.da(),this.f.tagDeploymentMode===ls.LoadClicktalePtc&&Uo.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.pe.compressSync(this.gr.eventName,"base64"),ct:this.pe.algorithm,isETR:`${this.gr.isETR}`,isCustomHashId:`${this.gr.isCustomHashId}`}}da(){this.Dw.send()}static If(t){return z(t)&&!!csString.prototype.trim.call(t)}}return s})(),Uc=["trackPageEvent"],jc=["trackEventTriggerRecording"],cg=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.pe=i,this.xe=n,this.J=a}init(){let t=new Ps(this.f.getTrackerUri(),"pageEvent");this.pa=new ag(this.f,t,this.pe,this.J),t.setRequestParametersProviders(this.pa,this.xe),this.E.register(Uc,e=>{this.pa.trackPageEvent(e)}),this.E.register(jc,e=>{this.pa.trackEventTriggerRecording(e)})}onStartTracking(){this.pa.start()}}return s})();var Hi=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),lg=(()=>{class s{constructor(){this.$l=Hi.Natural}setPageViewType(t){this.$l=t}getPageViewType(){return this.$l}getRequestParameters(){return{pvt:this.$l}}}return s})();var hg=(()=>{class s extends Ut{constructor(t,e,i,n,a){super(),this.S=t,this.J=e,this.zl=i,this.A=n,this.ns=a}init(){this.Gw()}onStart(t){t?this.qw():this.Ww()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Of(t,e):bt(t)&&this.A.overridePath(t,e),this.isStarted||(this.J.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}Ww(){this.ns.setPageViewType(Hi.Natural),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.zl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}qw(){this.ns.setPageViewType(Hi.Renewal),this.S.emitBeforeNaturalPageView(this.A.getAnonymizedUrl()),this.zl.send(),this.S.emitAfterNaturalPageView()}Of(t,e){let i=this.A.getAnonymizedUrl();this.ns.setPageViewType(Hi.Artificial),this.S.emitArtificialPageViewEnd(),bt(t)&&this.A.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.A.getAnonymizedUrl()),this.zl.send(),this.A.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Gw(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Of()})}}return s})(),ug=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function dg(){return{la:ug}}var pg=99999,fg=(()=>{class s{constructor(t){this.R=t,this.Yw=this.Xw()&&window.CSCurrentScript}Kw(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.Jw(e)?null:Math.round(e.responseEnd-e.fetchStart)}Jw(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.Yw||this.Qw()!==1)return{};let t=this.Kw();return t===null?{}:{dt:`${Math.min(t,pg)}`}}Qw(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}Xw(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),gg=["trackPageview"],ia=["setPath"],ra=["setQuery"],na=["referrer:maskUrl"],mg=["referrer:removeQueryString"],yg=["referrer:keepQueryString"],kr=s=>Is(s)&&s!==null,Eg=(s,r,t,e)=>{s.register(gg,(i,n)=>{if(!z(i)){r.triggerArtificialPageView();return}kr(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(ia,(i,n)=>{if(!z(i))throw new Error(`Command misuse: ${ia[0]}`);kr(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(ra,(i,n)=>{if(!z(i))throw new Error(`Command misuse: ${ra[0]}`);kr(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(na,i=>{if(!z(i))throw new Error(`Command misuse: ${na[0]}`);e.addUrlMaskingPattern(i)}),s.register(mg,()=>e.enableRemoveQueryString()),s.register(yg,()=>e.disableRemoveQueryString()))};var Sg=(()=>{class s{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v,C,I){this.f=t,this.E=e,this.S=i,this.xe=n,this.I=a,this.R=c,this.xi=l,this.Tt=u,this.Et=y,this.A=p,this.se=E,this.ns=m,this.J=v,this.We=C,this.Yi=I}init(){let t=new Ps(this.f.getTrackerUri(),"pageview");this.Js=new hg(this.S,this.J,t,this.A,this.ns),this.Js.init();let e=new ri(this.xe,this.I,ut,this.xi,this.A,this.Tt,mn,this.Et,this.ns,new fg(this.R),this.se);this.We&&e.addProvider(this.We),this.Yi&&e.addProvider(this.Yi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let n=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let a={cw:i?"1":"2"};return n&&(a.happid=n),a}})}t.setRequestParametersProviders(e),Eg(this.E,this.Js,this.A,this.xi)}start(t){this.Js.start(t)}onBeforeSessionRenewal(){this.Js.stop()}}return s})();function vg(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}var fe=csSymbol(),Dn=(()=>{class s{constructor(t){var e,i,n,a,c,l,u,y,p,E,m,v,C;this.w=t,this.Gl=null,this.ql=null,this.Wl=null,this.Yl=null,this.Xl=null,this.Zw=nr(I=>this.processUpdateRulesInATick(I)),this.Kl=null,this.Jl=null,this.Ql=null,this.w=I=>Vt(()=>t(I)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Gl=ss({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:I,args:S})=>{this.processInsertRule(I,S)}})),typeof((a=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.ql=ss({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:I,args:S})=>{this.processDeleteRule(I,S)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Wl=ss({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:I})=>this.processUpdateRule(I)})),typeof((y=(u=window.CSSGroupingRule)===null||u===void 0?void 0:u.prototype)===null||y===void 0?void 0:y.deleteRule)=="function"&&(this.Yl=ss({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:I})=>this.processUpdateRule(I)})),!((p=window.StyleSheet)===null||p===void 0)&&p.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Xl=Ki(window.StyleSheet.prototype,"disabled",(I,S,_)=>{S!==_&&this.tT(I,S)})),typeof((m=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.Kl=ss({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:I})=>{let S=I.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),typeof((C=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||C===void 0?void 0:C.removeProperty)=="function"&&(this.Jl=ss({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:I})=>{let S=I.parentRule;S instanceof CSSStyleRule&&this.processUpdateRule(S)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Ql=Kd(window.CSSStyleRule.prototype,"style",I=>{this.processUpdateRule(I)}))}observe(){var t,e,i,n,a,c,l,u;(t=this.Gl)===null||t===void 0||t.activate(),(e=this.ql)===null||e===void 0||e.activate(),(i=this.Wl)===null||i===void 0||i.activate(),(n=this.Yl)===null||n===void 0||n.activate(),(a=this.Xl)===null||a===void 0||a.activate(),(c=this.Kl)===null||c===void 0||c.activate(),(l=this.Jl)===null||l===void 0||l.activate(),(u=this.Ql)===null||u===void 0||u.activate()}disconnect(){var t,e,i,n,a,c,l,u;(t=this.Gl)===null||t===void 0||t.deactivate(),(e=this.ql)===null||e===void 0||e.deactivate(),(i=this.Wl)===null||i===void 0||i.deactivate(),(n=this.Yl)===null||n===void 0||n.deactivate(),(a=this.Xl)===null||a===void 0||a.deactivate(),(c=this.Kl)===null||c===void 0||c.deactivate(),(l=this.Jl)===null||l===void 0||l.deactivate(),(u=this.Ql)===null||u===void 0||u.deactivate()}processInsertRule(t,[e,i]){if(t[fe]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.w(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Zw.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(ti(i.cssRules),e);if(n===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.w(a)}}processDeleteRule(t,[e]){if(t[fe]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.w(i)}tT(t,e){if(t[fe]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.w(i)}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([V()],s.prototype,"processInsertRule",null),at([V()],s.prototype,"processUpdateRule",null),at([V()],s.prototype,"processUpdateRulesInATick",null),at([V()],s.prototype,"processDeleteRule",null),s})(),_g=(()=>{class s{constructor(t){this.eT=1,this.ga=new Set,this.Zl=null,this.th=null,this.Kc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.sT=e=>{let i=e.sheet;if(this.ga.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[fe],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[fe],index:e.index};this.w(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[fe],rule:e.rule,index:e.index};this.w(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[fe],disabled:e.disabled};this.w(n)}}},this.w=e=>Vt(async()=>{await Oa(2),t(e)}),this.he=new ks(this.Kc),"adoptedStyleSheets"in Document.prototype&&(this.Zl=Ki(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.th=Ki(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Nf=new Dn(this.sT)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.he.observe(),(t=this.Zl)===null||t===void 0||t.activate(),(e=this.th)===null||e===void 0||e.activate(),this.Nf.observe()}disconnect(){var t,e;this.ga.clear(),this.he.disconnect(),(t=this.Zl)===null||t===void 0||t.deactivate(),(e=this.th)===null||e===void 0||e.deactivate(),this.Nf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.iT(e);let i=Be(e,a=>a[fe]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.w(n)}iT(t){K(t,e=>{if(this.ga.has(e))return;let i=this.eT++;e[fe]=i,this.ga.add(e);let n=this.rT(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.w(a)})}rT(t){let e=[];try{e=Be(t.cssRules,i=>i.cssText)}catch{}return e}}return at([V()],s.prototype,"observe",null),at([V()],s.prototype,"disconnect",null),at([V()],s.prototype,"setStyleSheets",null),s})(),wg=ds(Rg,"optimizeMutations"),Tg=csSymbol.for("ignoreNextSerialization");function Ag(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,a=new Map,c=new Set,l=new Set,u=new Map,y=new Set;return{isMovedNode(p){return s.has(p)},markAsMovedNode(p){y.delete(p),s.add(p)},isDetachedMove(p){return!!dt.findAncestor(p,E=>y.has(E),!0)},isAddedNode(p){let E=dt.findAncestor(p,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(p){return s.has(p)&&!!dt.findAncestor(p,E=>r.has(E)||l.has(E),!0)},markAsAddedNode(p){y.delete(p),l.delete(p),r.add(p)},markAsPendingInsert(p){l.add(p)},isPendingInsert(p){return l.has(p)},isRemovedNode(p){return!!dt.findAncestor(p,E=>t.has(E),!0)},markAsRemovedNode(p){t.add(p)},isUselessNode(p){return e.has(p)},markAsUselessNode(p){e.add(p)},getPlaceholder(p,E){let m=E==="previous"?n:i;return p&&m.has(p)?m.get(p)||null:p},getSiblings(p){let E=p.addedNodes.length,m=this.getPlaceholder(p.previousSibling,"previous"),v=this.getPlaceholder(p.nextSibling,"next");if(E){let C=m,I=v,S=p.previousSibling!==m,_=p.nextSibling!==v;for(let P=0;P<E;P++){let N=p.addedNodes[P],A=p.addedNodes[E-P-1];this.isLatestNodeMutation(N,p)?(n.delete(N),p.previousSibling&&S&&(i.set(p.previousSibling,N),S=!1),C=N):n.set(N,C),this.isLatestNodeMutation(A,p)?(i.delete(A),p.nextSibling&&_&&(n.set(p.nextSibling,A),_=!1),I=A):i.set(A,I)}}else p.previousSibling&&p.previousSibling!==m&&i.set(p.previousSibling,v),p.nextSibling&&p.nextSibling!==v&&n.set(p.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(p,E){let m=a.get(p)||new Set;m.add(E),a.set(p,m)},isAttributeMutated(p,E){var m;return!!(!((m=a.get(p))===null||m===void 0)&&m.has(E))},setLatestNodeMutation(p,E){u.set(p,E)},isLatestNodeMutation(p,E){return u.get(p)===E},markAsFutureAddedNode(p){u.has(p)||y.add(p)},isTextMutated(p){return c.has(p)},setTextMutated(p){return c.add(p)}}}function bg(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Rg(s){let r=Ag(),t=[];for(let e of s)e.type==="childList"&&bg(e,r);for(let e of s)switch(e.type){case"attributes":Ig(e,r,t);break;case"characterData":Cg(e,r,t);break;case"childList":Ng(e,r,t);break}return t}function Cg(s,r,t=[]){let e=s.target;return dt.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!Og(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Ig(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return dt.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Pg=30;function Og(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=O.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Pg,!1)}function Ng(s,r,t=[]){let e=dt.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),a=r.getSiblings(s),c=a.nextSibling,l=a.previousSibling,u=null,y=()=>{if(u){let{childListType:m,movedNodes:v,...C}=u;csArray.prototype.push.call(t,m==="added"?C:{...C,movedNodes:v}),u=null}},p=m=>m===(u==null?void 0:u.childListType)?u:(y(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(u=p("moved"),csArray.prototype.push.call(u.movedNodes,v)):(r.markAsAddedNode(v),n||(u=p("added"),csArray.prototype.push.call(u.addedNodes,v))),l=v):dt.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}y()}let E=ka(s.removedNodes,m=>{if(dt.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[Tg]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Mg=(()=>{class s{constructor(t){this.w=t,this.eh=!1,this.nT=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.w({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.w({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.w({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.w=e=>Vt(()=>t(e)),this.Mf=new Dn(e=>Vt(async()=>{await Oa(),this.nT(e)})),"adoptedStyleSheets"in Document.prototype&&(this.kf=new _g(t))}observe(){var t;this.eh=!1,this.D=new qe(e=>this.oT(e),(e,i)=>{i==="added"&&this.aT(e)}),this.D.observe(),this.Mf.observe(),(t=this.kf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Mf.disconnect(),(e=this.kf)===null||e===void 0||e.disconnect(),this.eh=!0}oT(t){if(this.eh)return;let e=wg(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){nt.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:nt.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:dt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.w(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.w(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.w(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ti(t.addedNodes)};this.w(a)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let a={type:"nodesRemoved",target:t.target,nodes:Be(t.removedNodes,c=>c)};this.w(a)}}aT(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.w(e)}}return at([V()],s.prototype,"processAttributeChanged",null),at([V()],s.prototype,"processCharacterDataChanged",null),at([V()],s.prototype,"processChildListChanged",null),s})(),xn=(()=>{class s{constructor(t){this.type="asyncEvent",this.ih=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.ih)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.zs=t,this.ih=!0,this.w&&this.w(this.zs)}complete(t){this.ih&&t(this.zs),this.w=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),kg=Vp(),Dg=(()=>{class s extends ye{constructor(){super(...arguments),this.ma=!1}onStart(){this.ma=!0,this.w=vg(this.cT,this),this.z=new Mg(this.w),this.z.observe();let t=Ot.mutations.initialDOM.asyncMeasure(),e=()=>{this.ma=!1,jp(),t()};this.produceEvent(new xn(i=>kg(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.ma=!1,(t=this.w)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}Gt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=et(e.target),i.targetProps=W.getProperties(e.target)),[e,i]}cT(t){if(!this.lT(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Gt(t.type,t);i.attribute=e.attribute,i.isSvg=Ms(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=$s(e.target),i.linkRel=La(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?$s(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Gt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?$s(e.target.parentElement):null,i.parentProps=e.target.parentElement?W.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Gt(t.type,t);i.targetLocalName=ot(e.target)?$s(e.target):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.previousSibling=e.previousSibling?et(e.previousSibling):null,Ot.mutations.serializedMutations.measure(()=>{i.nodes=Be(e.nodes,on)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Gt(t.type,t);i.previousSibling=e.previousSibling?et(e.previousSibling):null,i.nextSibling=e.nextSibling?et(e.nextSibling):null,i.nodesIds=Be(e.nodes,et),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Gt(t.type,t);i.nodesIds=Be(e.nodes,et),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Gt(t.type,t);i.shadowRoot=Xs(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Gt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Gt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}ya(t){return this.ma&&!W.getProperty(t,Ys)}lT(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.ya(t.target)||D.isMaskedElement(t.target)||D.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.ya(e)||D.isMaskedElement(e)||D.isMaskedElementChild(e))}case"attributeChanged":return this.ya(t.target)||D.isMaskedElementChild(t.target)||D.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.ya(t.target)||D.isMaskedElementChild(t.target);default:return!1}}}return s})(),mi=(()=>{let s;return function(r){function t(e){return e.type==="DomEvent"}r.isDOMEvent=t}(s||(s={})),s})(),yi=(()=>{class s{constructor(){this.oe=[]}start(){}stop(){this.oe.length=0,this.oe=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.oe;csSetTimeout(()=>{let n=os("Processor:processEvent",a=>this.processEvent(a))(t);n!=null&&csArray.prototype.forEach.call(e,a=>a(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.oe,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.oe,t),()=>{this.oe=csArray.prototype.filter.call(this.oe,e=>e!==t)}}emitEvent(t){Vt(()=>csArray.prototype.forEach.call(this.oe,e=>e(t)))}}return s.pendingEvents=0,s})(),xg=(()=>{class s extends yi{isListening(t){return mi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof As){let c=D.getMaskedAttributeDetails(n);n.attributes=this.Vo(n,c)}if(D.getMaskedElementDetails(n).state===D.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}W.traverse(n,c=>{if(c instanceof As){let l=D.getMaskedAttributeDetails(c);c.attributes=this.Vo(c,l);let u=D.getMaskedElementDetails(c);u.state===D.MaskedElementState.Parent&&(this.$c(c,u),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}Vo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}$c(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),As.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return me([Rt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})();var oa=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})(),Lg=(()=>{class s extends yi{constructor(t,e,i,n=null,a=!1){super(),this.M=i,this.Uo=n,this.captureAnonymizedPlaceholders=a,this.Ea=new qp(t,e,i,n,a)}setAnonymization(t){this.Ea.setAnonymization(t)}isListening(t){return oa.isTextVisibilityEvent(t)||mi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(oa.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.Uo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.oh(t);break;case"attributeChanged":this.uT(t);break;case"characterDataChanged":this.dT(t);break}return t}oh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.Ea.sanitize(n,i)}uT(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Ea.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}dT(t){t.newValue=this.Ea.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return me([Rt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function Ln(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Vg(r);return e?(ci(t,",")||(e=Ug(e)),[aa(t),...Ln(e)]):[aa(t)]}function Vg(s){return csString.prototype.split.call(s,/\s(.+)/)}function aa(s){return csString.prototype.split.call(s,/,$/)[0]}function Ug(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var jg=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Hg(s,r){return csString.prototype.replace.call(s,jg,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],a=Fg((i||n).trim()),c=i?"@import ":"",l=r(a)||a;return`${c}url(${Bg(l)})`})}function Bg(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ks(s){let r=new Set;return Hg(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ns(r)}function Fg(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\uFFFD":csString.fromCodePoint(a)})}var ca=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.fT(t);if(!n)return null;let a=await s.Lf(n),c=se(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let a=await s.gT(t,n),c=Fe(t),l=a.get(c);if(!l)return null;let u={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(u.nestedResources=[],a.forEach(y=>{y&&csArray.prototype.push.call(u.nestedResources,{hash:y.hash,data:y.data})})),u}static async Lf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Vf,e);return Gr(i)}static async fT(t){let e;if(!se(t))e=await(await window.fetch(t)).blob();else{let i=po(t);if(!i)return null;e=i}return e}static async gT(t,e){let i=new Map,n=Fe(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!se(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=Ks(l.data));let p=!1,E=!1;for(let m of l.nestedResources){let v=se(m)?m:l.resourceAbsolutePath?gd(m,l.resourceAbsolutePath):Fe(m),C=i.get(v);if(C!==void 0){if(C!==null){let S=s.mT(C,m);l.data=rs.stringReplaceAll(l.data,m,S)}continue}je(c,S=>S.resourceAbsolutePath===v)!==void 0||(p=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!p){let m=await s.yT(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let p;if(!se(l.resourceAbsolutePath))p=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=po(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}p=m}let E=await s.Lf(p);i.set(l.resourceAbsolutePath,{hash:E,data:p})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static mT(t,e){let i=`cs://resources/${t.hash}`;return se(e)||(i+=`?${s.ah}=${e}`),i}static async yT(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.Vf,i);return{data:e,hash:Gr(n)}}}return s.Vf="SHA-256",s.ah="original-resource-name",s})(),pn=(()=>{class s extends yi{constructor(){super(),this.Sa="cssrm://",this.ye=0,this.Ts=!1}isListening(t){return!s.isSupported()||!mi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.ET(t);break;case"attributeChanged":this.ST(t);break;case"characterDataChanged":this.vT(t);break}return t}disableOnlineAssets(){this.Ts=!1}enableOnlineAssets(){this.Ts=!0}isOnlineAssetsActivated(){return this.Ts}ET(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)W.traverse(i,(n,a)=>{if(n.nodeType===ii.TEXT_NODE&&a){this._T(n,a.localName);return}if(!As.isElement(n))return;let c=je(n.attributes,l=>l.name==="style");if(c&&(c.value=this.va(c.value)),this.wT(n)||this.TT(n,a)){let l=je(n.attributes,y=>y.name==="src");l&&l.value&&(l.value=this.Uf(l.value));let u=je(n.attributes,y=>y.name==="srcset");if(u){u.value=this.jf(u.value);return}}if(this.AT(n)&&this.Ts){let l=je(n.attributes,u=>u.name==="href");if(!l||!l.value)return;this.ye++,this.mr(Fe(l.value),this.ye,!0),this.bT(n,l,this.ye)}})}bT(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Sa+i}_T(t,e){if(!t||e!=="style")return;let i=this.va(t.data);i!==null&&(t.data=i)}vT(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.va(t.newValue);e!==null&&(t.newValue=e)}ST(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.va(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.Uf(t.newValue)),i&&(t.newValue=this.jf(t.newValue)))}Uf(t){return se(t)||this.Ts?(this.ye++,this.mr(t,this.ye,!1,O.now()),this.Sa+this.ye):t}jf(t){if(!this.Ts)return t;let e=t,i=Ln(t),n=O.now();for(let a of i)this.ye++,this.mr(Fe(a),this.ye,!1,n),e=csString.prototype.replace.call(e,a,this.Sa+this.ye);return e}va(t){let e=Ks(t),i=t,n=O.now();for(let a of e){let c=se(a);if(!(c||this.Ts)||this.RT(a))continue;this.ye++,i=csString.prototype.replace.call(i,a,this.Sa+this.ye);let l=Vu(a);c?this.mr(a,this.ye,!1,n):this.Ts&&(l?this.mr(a,this.ye,!0,n):this.mr(Fe(a),this.ye,!1,n))}return i}mr(t,e,i,n=O.now()){let a=i?ca.toCSSStaticResourceEvent:ca.toStaticResourceEvent,c=new xn(async l=>{try{let u=await a(t,e,n,this.Ts);l(u||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(u){l({type:"warning",message:u})}});this.emitEvent(c)}wT(t){return t.localName==="img"}TT(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}AT(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Ia()&&Ph()&&!!csArray.from}RT(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return me([Rt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),$g=(()=>{class s extends yi{constructor(t){super(),this.tt=t}isListening(t){return mi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.tt.anonymizeUrl(t.initialDOM.baseURI)),t}}return me([Rt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Dr="textarea",zg=(()=>{class s extends yi{isListening(t){return mi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.CT(t);break;case"nodesAdded":this.IT(t);break;case"characterDataChanged":this.PT(t);break}return t}CT(t){W.traverse(t.initialDOM,(e,i)=>{(this.Hf(e,i)||this.Bf(e))&&(e.data=this.ch(e.data))})}IT(t){for(let e of t.nodes)W.traverse(e,(i,n)=>{(this.OT(i,n,t)||this.Bf(i))&&(i.data=this.ch(i.data))})}PT(t){var e;(t.parentLocalName===Dr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.ch(t.newValue))}ch(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}OT(t,e,i){return this.NT(t,i)||this.Hf(t,e)}NT(t,e){return t.nodeType===3&&e.targetLocalName===Dr}Hf(t,e){return t.nodeType===3&&Q(e)&&e.localName===Dr}Bf(t){return t.nodeType===3&&Ve.isEditableNode(t)}}return me([Rt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Gg=(()=>{class s{constructor(t){this.w=t,this.$t={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.w=t}observe(){Nt(this.$t),this.lh()}lh(){this.resizeListener()}disconnect(){Mt(this.$t)}resizeListener(){let t={width:ut.windowWidth(),height:ut.windowHeight()};this.w(t)}}return at([V("resize")],s.prototype,"resizeListener",null),s})(),Le=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),ki=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Di=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),qg=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=Z.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in Z;function e(){return Le.LANDSCAPE}function i(){var c;switch((c=Z.screen.orientation)===null||c===void 0?void 0:c.type){case ki.PORTRAIT_PRIMARY:case ki.PORTRAIT_SECONDARY:return Le.PORTRAIT;case ki.LANDSCAPE_PRIMARY:case ki.LANDSCAPE_SECONDARY:return Le.LANDSCAPE;default:return Le.PORTRAIT}}function n(){switch(window.orientation){case Di.PORTRAIT:case Di.PORTRAIT_REVERSE:return Le.PORTRAIT;case Di.LANDSCAPE:case Di.LANDSCAPE_REVERSE:return Le.LANDSCAPE;default:return Le.PORTRAIT}}function a(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=a}(s||(s={})),s})(),Wg=(()=>{class s extends ye{constructor(){super(...arguments),this.hh=null,this.uh=null,this.Ds=new Gg(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=qg.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.MT(t);if(e!==this.hh||i!==this.uh){this.hh=e,this.uh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}MT(t){let e,i,n=ut.screenWidth(),a=ut.screenHeight();return t===Le.PORTRAIT?(e=n,i=a):(e=Math.max(n,a),i=Math.min(n,a)),{screenWidth:e,screenHeight:i}}onStart(){this.Ds.observe()}onStop(){this.hh=null,this.uh=null,this.Ds.disconnect()}}return s})();function Yg(s){let r=csEventtarget.apply(s);return r&&ot(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var Xg=(()=>{class s extends ye{constructor(){super(),this.Ff=t=>{let e=Yg(t);e&&this.ph(e,t.type)},this.he=new ks((t,e)=>{switch(e){case"initial":case"added":this.$f(t);break;case"removed":this.zf(t);break}}),this.B=new Os((t,e)=>{(e==="initial"||e==="added")&&this.kT(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&dt.isConnected(t)&&!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.$f(document),this.he.observe(),this.B.observe("video")}onStop(){this.zf(document),this.he.disconnect(),this.B.disconnect()}ph(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=et(t),a={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),Sn(()=>this.produceEvent(a))}}kT(t){for(let e of t)this.ph(e,"seeked"),s.isPlaying(e)&&this.ph(e,"play")}$f(t){for(let e of["play","pause","seeked"])Nt({type:e,listener:this.Ff,boundElement:t})}zf(t){for(let e of["play","pause","seeked"])Mt({type:e,listener:this.Ff,boundElement:t})}}return s})();function Kg(s){return s.nodeName==="SELECT"}function Vn(s){return s.nodeName==="INPUT"}function Jg(s){return s.nodeName==="TEXTAREA"||Vn(s)&&!Hc(s)&&!Bc(s)}function Hc(s){return Vn(s)&&s.type==="number"}function Bc(s){return Vn(s)&&(s.type==="checkbox"||s.type==="radio")}var Qg=(()=>{class s extends ye{constructor(t){super(),this.ot=t,this.fh=new $d("low"),this.yr=e=>this.inputHandler(e),this.Ai=[],this.DT(),this.xT(),this.B=new Os(e=>{for(let i of e)this.gh(i)&&Vt(()=>{this.mh(i,et(i))},"low")}),this.he=new ks((e,i)=>{switch(i){case"initial":case"added":Nt({type:"change",listener:this.yr,boundElement:e});break;case"removed":Mt({type:"change",boundElement:e,listener:this.yr});break}})}onStart(){Nt({type:"keyup",boundElement:document,listener:this.yr}),Nt({type:"change",boundElement:document,listener:this.yr}),K(this.Ai,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.LT,",")),this.he.observe()}onStop(){Mt({type:"keyup",boundElement:document,listener:this.yr}),Mt({type:"change",boundElement:document,listener:this.yr}),K(this.Ai,t=>t.deactivate()),this.B.disconnect(),this.he.disconnect(),this.fh.clear()}mh(t,e){var i,n,a;if(this.fh.has(t))return;if(this.fh.add(t),Kg(t)){let u={type:"InputEvent",inputType:"select",target:et(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(u);return}if(Bc(t)){let u={type:"InputEvent",inputType:"checkable",target:et(t),checked:t.checked,timestamp:O.now()};this.produceEvent(u);return}let c=Jg(t),l=Hc(t);if(c||l){let u=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ot)===null||n===void 0)&&n.shouldEncrypt(t)){(a=this.ot)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:u,date:O.now()});return}let y=l?"0":"\u2022",p={type:"InputEvent",inputType:"text",target:et(t),value:csString.prototype.replace.call(u,/\S/g,y),timestamp:O.now()};this.produceEvent(p)}}inputHandler(t){if(!this.isStarted)return;let e=pt(t),i=et(e);!i||!this.gh(e)||dt.isConnected(e)&&Vt(()=>{this.mh(e,i)},"low")}DT(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}xT(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=Ki(t.prototype,e,(a,c,l)=>{if(l!==c&&dt.isConnected(a)){let u=i?a.parentElement:a;this.VT(u)}});n&&csArray.prototype.push.call(this.Ai,n)}gh(t){return!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)&&(Zi(t)||Tn(t)||wn(t))}VT(t){if(this.isStarted&&dt.isConnected(t)){let e=et(t);e&&this.gh(t)&&Vt(()=>{this.mh(t,e)},"low")}}}return s.LT=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],me([St()],s.prototype,"inputHandler",null),me([V()],s.prototype,"trackChanges",null),s})();var Zg=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.Zs=[],this.nt=[],this.UT=t}next(t){this.nt.length===this.UT&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.Zs)e(t)}subscribe(t){if(je(this.Zs,i=>t===i))return()=>{this.Zs=csArray.prototype.filter.call(this.Zs,i=>i!==t)};csArray.prototype.push.call(this.Zs,t);for(let i of this.nt)t(i);return()=>{this.Zs=csArray.prototype.filter.call(this.Zs,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.Zs.length>0}}return s})(),Fc=(()=>{var s;class r{constructor(e){this.w=e}observe(){this.jT=s.On.subscribe(e=>this.w(e)),s._a||(s._a=!0,s.Pn.observe(),Jt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.ws.add(i),s.On.next(i)}))}disconnect(){s._a&&(this.jT(),s.On.hasObservers()||(s._a=!1,s.Pn.disconnect(),s.On.clear(),s.ws.clear()))}}return s=r,r.ws=new rr,r.On=new Zg,r.HT=ds(t=>{Vt(()=>{for(let e of t)e.type==="childList"&&K(e.addedNodes,i=>{Jt(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.ws.has(a)||(s.ws.add(a),s.On.next(a))})})})},"ElementObserver.findAllElements"),r._a=!1,r.Pn=new qe(s.HT),at([V()],r.prototype,"observe",null),at([V()],r.prototype,"disconnect",null),r})(),tm=(()=>{class s extends ye{constructor(){super(),this.vs=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.BT=os("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)D.isMaskedElement(i)||D.isMaskedElementChild(i)||lu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=nr(this.BT);this.Nn=new Fc(e=>t.push(e)),this.Qs=new Set}onStart(){this.vs&&this.Nn.observe()}onStop(){this.Qs.clear(),this.Nn.disconnect()}async register(t){this.Qs.has(t)||(this.Qs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return me([V()],s.prototype,"register",null),s})(),la=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Gf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.FT(t))}static FT(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Li=i,s.Er(i))}static Ur(t){this.$T(t),this.Li&&t(this.Li),this.Le||this.zT()}static $T(t){this.Mt.add(t)}static GT(t){this.Mt.delete(t)}static zT(){if(this.Mn||(this.Mn=this.Gf()),!this.Mn){this.Li||(this.Li={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Er(this.Li);return}this.Mn.observe({type:"navigation",buffered:!0}),this.Le=!0}static Er(t){this.Mt.forEach(e=>e(t))}static Hr(t){this.GT(t),this.Mt.size===0&&this.kn()}static kn(){var t;this.Le&&((t=this.Mn)===null||t===void 0||t.disconnect(),this.Le=!1,this.Li=null,this.Mn=this.Gf())}constructor(t){this.w=t}observe(){s.Ur(this.w)}disconnect(){s.Hr(this.w)}}return s.Le=!1,s.Mt=new Set,s.Li=null,s})(),em=(()=>{class s extends ye{constructor(){super(...arguments),this.wa=null,this.qf=new la(t=>{if(this.wa)return;let e=this.qT(t);e&&(this.wa=e,this.produceEvent(e))})}onStart(){if(this.wa){this.produceEvent(this.wa);return}this.qf.observe()}onStop(){this.qf.disconnect()}qT(t){let e=la.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),sm="touchstart",im="touchmove",rm="touchend",nm=(()=>{class s{constructor(t){this.w=t}observe(){s.Wf&&s.yh(this.w)}disconnect(){s.Wf&&s.Eh(this.w)}static WT(t,e){csArray.prototype.forEach.call(Ns(s.Mt),i=>i(t,e))}static yh(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.Dn.onGesture(s.WT),csArray.prototype.forEach.call(s.Vs,e=>Nt(e))))}static Eh(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Vs,e=>Mt(e))}static Sh(t){if(s.Dn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Dn.processActionDown(t);break;case"touchmove":s.Dn.processActionMove();break;case"touchend":s.Dn.processActionUp(t);break}}}return s.Vs=[{boundElement:Z.document,type:sm,listener:r=>s.Sh(r)},{boundElement:Z.document,type:im,listener:r=>s.Sh(r)},{boundElement:Z.document,type:rm,listener:r=>s.Sh(r)}],s.Wf=nn.isGestureDetectionSupported(),s.Mt=new Set,s.Dn=new nn,s})(),om=(()=>{class s extends ye{constructor(){super(),this.xn=new nm(this.xc.bind(this))}onStart(){this.xn.observe()}onStop(){this.xn.disconnect()}xc(t){let e=this.YT(t);e&&this.produceEvent(e)}YT(t){if(!this.XT(t))return null;let e=ip(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}XT(t){return t.target!==null&&!(ot(t.target)&&D.isMaskedElementChild(t.target))}}return s})();var ws=[],fn=!1,$c=ds(cm,"executeTasks");function am(s){if(csArray.prototype.push.call(ws,s),!fn){for(let r=0;r<3;r++)csSetTimeout($c);fn=!0}}function cm(){let s=csDate.now();for(let r=0;r<ws.length;r++)if(ws[r](),csDate.now()-s>=35){ws=csArray.prototype.slice.call(ws,r+1),csSetTimeout($c);return}ws=[],fn=!1}var Me=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),zc=(()=>{class s{constructor(){this.kt=new li,this.Pt=Me.Stopped,this.w=null,this.Kf=t=>{this.Pt===Me.Stopped||!t||(this.w(t),this.Jf())}}get queueLength(){return this.kt.length}start(t){if(this.w)throw new Error("callback already set");this.Pt=Me.Started,this.w=t}push(t){this.kt.push(t),this.vh()}stop(){this.w=null,this.Pt=Me.Stopped,this.kt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(u=>{c.pushEvent(u)}),csArray.prototype.push.call(n,l),K(i,u=>u.subscribe(y=>l.push(y))),i=[c]}let a=new lm(n);return K(i,c=>c.subscribe(l=>a.push(l))),a}Qf(){return this.Pt===Me.Stopped}rs(){return this.Pt===Me.Processing}Jf(){if(!this.Qf()){if(this.kt.isEmpty){this.Pt=Me.Completed;return}this.Pt=Me.Processing,am(()=>{let t=this.kt.pop();t instanceof xn?t.complete(this.Kf):this.Kf(t)})}}vh(){this.Qf()||this.rs()||this.Jf()}}return s})(),lm=(()=>{class s extends zc{constructor(t){super(),this.Zf=t}get queueLength(){return csArray.prototype.reduce.call(this.Zf,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),K(this.Zf,t=>t.stop())}}return s})(),hm=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.F=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.F)throw new Error("Recording is already started.");let t=this.Mt;this.kt=zc.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),K(this.producers,e=>e.start()),K(this.processors,e=>e.start()),this.F=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.F=!1,this.Mt=[]}subscribe(t){if(this.F)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),um=(()=>{class s{constructor(t){this.Aa={},this.Ne=new kn(t)}save({key:t,metadata:e,events:i}){this.Ne.isThresholdReached()||(this.Ne.addString(t),typeof i=="string"?this.Ne.addString(i):this.Ne.addArrayBuffer(i),!this.Ne.isThresholdReached()&&(this.Aa[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.tA(),i=>{let n=this.Aa[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.eA(i))}),e.length!==0&&(t(e),this.Ne.reset())}tA(){return Object.keys(this.Aa)}eA(t){delete this.Aa[t]}}return s})(),ke=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),dm=(()=>{class s{constructor(t,e,i){this.ir=t,this.sA=i,this.Vi=ke.NOT_STARTED,this.ba=[],this._h=0,this.iA=self.origin,this.Oe=typeof window=="object"?"":"worker-",this.Ne=new kn(e),this.Vl()}async Vl(){await this.tg(),this.Vi===ke.READY?this.rA():this.sA(this.ba)}rA(){csArray.prototype.forEach.call(this.ba,t=>{this.save(t)}),this.ba=[]}async save(t){try{if(this.Vi===ke.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.ba,t);return}if(this.Vi!==ke.READY||this.Ne.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.Ne.addString(e),typeof n=="string"?this.Ne.addString(n):this.Ne.addArrayBuffer(n),this.Ne.isThresholdReached())return;await this.ie.put(`${this.iA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ie&&(await this.tg(),this.Vi!==ke.READY)||this.nA(t)}async tg(){try{this.Vi=ke.OPEN_IN_PROGRESS,this.ie=await self.caches.open(`${this.Oe}${this.ir}`),this.Vi=ke.READY}catch{this.Vi=ke.OPEN_FAILED}}async nA(t){try{if(this._h++,this._h>1)return;let e=await this.ie.keys();if(e.length===0)return;let i=await this.ie.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((y,p)=>{l[p]=y}),delete l["content-type"];let u=l.datatype;return delete l.datatype,u==="json"||u==="base64"?c.text().then(y=>({metadata:l,events:y})):c.arrayBuffer().then(y=>({metadata:l,events:y}))}),a=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ie.delete(c))),t(a),this.Ne.reset()}catch{}finally{this._h--}}}return s})(),pm=(()=>{class s{constructor(t){try{this.oA(t)}catch{this.Th()}}oA(t){self.caches?this.aA(t):this.Th()}save(t){this.Ra.save(t)}recover(t){this.Ra.recover(t)}aA(t){this.Ra=new dm(t,s.eg,e=>{this.Th(e)})}Th(t){this.Ra=new um(s.eg),t&&csArray.prototype.forEach.call(t,e=>{this.Ra.save(e)})}}return s.eg=1024*1024*16,s})(),fm=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Ln=zt.ETR_DISABLED,this.Ca=zt.ETR_PENDING,this.Ah=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.sg()&&e===zt.ETR_SAVED_SESSION?e:this.Ln}onEventTriggerRecording(t,e){switch(e){case $e.ETR_PAGE:this.ig(zt.ETR_SAVED_PAGE);break;case $e.ETR_LEGACY:case $e.ETR_SESSION:this.ig(zt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===x.RECORDING_TEMPORARILY?this.Ah=!0:this.Ah=!1,t===x.ANALYTICS_ONLY&&e===Lt.ETR_ON?this.rg(this.Ca):this.rg(zt.ETR_DISABLED)}rg(t){this.Ln=t,this.Ca=zt.ETR_PENDING,this.ng(t),this.S.emitRecordingContextChange()}ig(t){this.Ah?Number(t)>Number(this.Ca)&&(this.Ca=t):this.sg()&&Number(t)>Number(this.Ln)&&(this.Ln=t,this.ng(t),this.S.emitRecordingContextChange())}ng(t){let e=this.R.getSession();e!==null&&e.etrStatus===zt.ETR_NOT_SAVED_SESSION&&t===zt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}sg(){return this.Ln!==zt.ETR_DISABLED}}return s})(),M=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var Fs=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),gm=(()=>{class s{constructor(t=100){this.cA=t,this.Ia={},this.Vn=null,this.ah="original-resource-name"}onEvent(t){this.lA=t}processEvent(t){this.hA(t.resourceId,t.resource.hash,t.originalResourceName),this.uA(t)}flushEvents(){this.Vn&&csClearTimeout(this.Vn),this.og()}onSendStaticResource(t){this.uA=t}og(){if(!Object.keys(this.Ia).length)return;let t={type:M.RESOURCE_HASHES,date:O.now(),args:[this.Ia]};this.Vn=null,this.Ia={},this.lA(t)}hA(t,e,i){let n=e;i&&(n+=`?${this.ah}=${i}`),this.Ia[t]=n,!this.Vn&&(this.Vn=window.csSetTimeout(()=>this.og(),this.cA))}}return s})();function mm(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:M.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:M.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:M.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:M.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:a,newValue:c}=s;r({type:M.MUTATION_ATTRIBUTE,date:e,args:[i,n,a,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:M.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:a}=s,c=Q(a)?[i,n,a]:[i,n];r({type:M.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:M.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:a}=s;r({type:M.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,a]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:M.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:M.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:a}=s;r({type:M.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:a}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:M.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:a}=s,c=Q(a)?[i,n,a]:[i,n];r({type:M.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:M.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:a}=s,c=[i,n,a];r({type:M.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,a=[i,n];r({type:M.ADOPTED_STYLESHEET_DISABLED,date:e,args:a});break}default:U.error("translateDOMEvent: DOMEvent not supported");break}}function ym(s){let r=Em(s.data);return{type:M.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function Em(s){let r={type:Sm(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function Sm(s){switch(s){case ft.DRAG:case ft.FLICK:return Fs.SWIPE;case ft.LONG_PRESS:return Fs.LONG_PRESS;case ft.TAP:return Fs.TAP;case ft.PINCH_IN:return Fs.PINCH_IN;case ft.PINCH_OUT:return Fs.PINCH_OUT}}function vm(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var _m=20;function wm(s){return vm(r=>{let t={visibleInViewPort:r},e={type:M.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:_m,autoFlushDelay:1e3})}var xr=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function Tm(s){return{type:M.PERFORMANCE_TIMINGS,args:[{performanceTiming:xr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:xr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:xr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Am(s){switch(s.inputType){case"text":return{type:M.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:M.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:M.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var bm=500,Lr=0;function Rm(){return{processEvent(s,r){if(s.originalEvent.type===M.PERFORMANCE_RESOURCE_TIMING)return Lr>=bm?null:(Lr+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){Lr=0}}}function Cm(s){switch(s.videoEventType){case"play":return{type:M.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:M.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:M.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Im=(()=>{class s{get pendingEvents(){return this.Pa.pendingEvents}constructor(t,e,i,n,a){this.Pa=t,this.S=e,this.Me=i,this.As=n,this.bs=a,this.re=()=>{},this.Oa=()=>{},this.ag=wm(c=>this.re(c))}start(){var t,e;this.cg=Rm(),this.Pa.subscribe(i=>{var n,a,c,l,u,y;let p=i,{timestamp:E}=p;switch(p.type){case"Legacy":{let m=p.eventType==="user"?(n=this.Oa)!==null&&n!==void 0?n:()=>{}:this.re;this.cg.processEvent(p,m)}break;case"CustomElementRegistration":{this.re({type:M.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[p.tagName]});break}case"DomEvent":{mm(p,this.re,this.S);break}case"InputEvent":{let m=Am(p);(a=this.Oa)===null||a===void 0||a.call(this,m);break}case"encryptedCharacterDataChanged":{let{target:m,rawData:v,encryptedData:C,encryptionMetadata:I}=p;this.re({type:M.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[m,v,C,I]});break}case"StaticResource":{let{url:m}=p;this.re({type:M.STATIC_RESOURCE_URL,date:E,args:[m]});break}case"ResizeMaskedElement":{let{target:m,width:v,height:C}=p;this.re({type:M.MUTATION_ATTRIBUTE,date:E,args:[m,"","style",`width:${v}px !important;height:${C}px !important;`]});break}case"Gesture":{let m=ym(i);(c=this.Oa)===null||c===void 0||c.call(this,m);break}case"TextVisibility":{this.ag.push(p.text);break}case"StaticResourceManagerEvent":{(l=this.Me)===null||l===void 0||l.processEvent(p);break}case"screenResize":{let{width:m,height:v}=p,C={type:M.SCREEN_RESIZE,date:E,args:[m,v]};this.re(C);break}case"viewportResize":{let{width:m,height:v}=p,C={type:M.RESIZE,date:E,args:[m,v]};this.re(C);break}case"PerformanceTiming":{this.re(Tm(p));break}case"CustomError":{let m=(u=this.bs)===null||u===void 0?void 0:u.translate(p);m&&this.re(m);break}case"JSError":{let m=(y=this.As)===null||y===void 0?void 0:y.translate(p);m&&this.re(m);break}case"VideoEvent":{let m=Cm(p);m&&this.re(m);break}case"warning":{U.warn(p.message);break}default:U.error(`WebRecorderEventTranslator: Event not supported (${p.type})`);break}}),this.S.emitInitialDomStart(),(t=this.As)===null||t===void 0||t.start(),(e=this.bs)===null||e===void 0||e.start(),this.Pa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Pa.stop(),(t=this.Me)===null||t===void 0||t.flushEvents(),(e=this.As)===null||e===void 0||e.stop(),(i=this.bs)===null||i===void 0||i.stop()}flush(){this.ag.flush()}onEvent(t,e){var i;this.re=t,this.Oa=e,(i=this.Me)===null||i===void 0||i.onEvent(n=>this.re(n))}reset(){this.cg.reset()}}return s})();var Pm=(()=>{class s extends ye{constructor(t){super(),this.Ve=t}subscribe(t){return super.subscribe(t)}onStart(){K(this.Ve,t=>{t.onEvent(e=>{var i;return this.Sr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),K(this.Ve,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){K(this.Ve,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Sr(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),_t=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),Om=(()=>{class s{constructor(t,e,i=[]){this.Sr=t,this.bh=e,this.pA=i,this.Na=null,this.Pt=_t.Active,this.nt=[]}reset(){this.Na=null,this.nt=[],this.Pt=_t.Active}disconnect(){this.Pt=_t.Stopped}fA(){this.bh(_t.Paused),this.Pt=_t.Paused,csSetTimeout(()=>{this.Pt===_t.Paused&&this.Rh()},s.STOP_TIMEOUT)}gA(){this.bh(_t.Active),this.Pt=_t.Active,K(this.nt,this.Sr),this.nt=[]}Rh(){this.nt=[],this.bh(_t.Stopped),this.Pt=_t.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Na=t.date,this.Pt!==_t.Active)){this.gA(),this.Sr(t);return}if(this.mA(t)){this.Sr(t);return}switch(this.Pt){case _t.Active:if(this.yA(t,e)){this.fA(),csArray.prototype.push.call(this.nt,t);return}this.Sr(t);break;case _t.Paused:csArray.prototype.push.call(this.nt,t);break;case _t.Stopped:break}}yA(t,e){return!e.isUserEvent&&this.Na!==null&&t.date-this.Na>s.INACTIVITY_TIMEOUT}mA(t){return csArray.prototype.indexOf.call(this.pA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Nm=2e3,Mm=(()=>{class s extends Ut{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v,C=[],I,S,_,P,N){super(),this.f=t,this.j=e,this.EA=i,this.G=n,this.R=a,this.Ge=c,this.mt=l,this.De=u,this.ot=y,this.W=p,this.Dt=E,this.Rt=m,this.Ue=v,this.Ve=C,this.lg=I,this.qt=S,this.Un=_,this.As=P,this.bs=N,this.qs=0,this.Bs=new _c,this.vr={allowFromQuotaService:!0,allowFromSerialization:!0},this.hg=or(()=>{this.j.eventsCount()>0&&this.ug()},Nm),this.Rs=A=>this.processBrowserEvent(A),this.Hn=A=>this.Nt(A),this.Ma=0,this.Bn=0,this.$e=new Tc,this.Ch=!1,this.dg=50*1024,this.Ui=!1,this.Fn=!1,this.Di=[],this.ka=new Om(A=>this.K(A),A=>{switch(A){case _t.Active:this.SA();break;case _t.Stopped:this.vA();break}},[M.RESOURCE_HASHES,M.TEXT_VISIBILITY,M.API_ERROR,M.JAVASCRIPT_ERROR]),this.pg=A=>{this.Dt.removeBatchInProgress(`${A.params.sn}.${A.params.pn}.${A.params.ri}`)}}init(){this.Ih(),this.W.onLoad(this.pg),this.W.onError(this.pg)}SA(){csArray.prototype.forEach.call(this.lg,t=>t.start())}vA(){csArray.prototype.forEach.call(this.lg,t=>t.stopForInactivity())}Ih(){var t,e,i;this.Ue.onEvent(this.Rs,this.Hn),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Hn),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.fg(n)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Rs),this.$e.onEvent(n=>{if(csSetTimeout(()=>this.ji("page-state",n)),n!==Gt.Visible){if(n===Gt.Blur)return this.gg();if(!this.Ch)return this.Ch=!0,csSetTimeout(()=>{this.Ch=!1}),n===Gt.Hidden?this.gg():this._A()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}gg(){if(!this.canSendEvents())return;this.Ue.flush(),this.Dt.saveBatchesInProgress(),K(this.Ve,c=>{var l,u;return K((u=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&u!==void 0?u:[],y=>this.j.addEvent(y))});let t=this.j.getEvents();if(t.length===0)return;this.ji("pending-events",this.Ue.pendingEvents);let e=this.W.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Bn=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.j.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Rt.removeQueryParams(),this.Rt.setQueryParams(e);let a=this.j.stringifyEvents();if(a.length>this.dg){let c=this.mg();if(c.length>0){let l=cs(c);this.Rt.send(l)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.j.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Rt.send(a)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:a}),i.increment();this.Rt.removeQueryParams(),this.j.clearEvents()}_A(){if(!this.canSendEvents())return;this.Ue.flush();let t=this.W.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Rt.removeQueryParams(),K(this.Ve,n=>{var a,c;return K((c=(a=n.getPendingEvents)===null||a===void 0?void 0:a.call(n))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();return}this.ji("pending-events",this.Ue.pendingEvents),this.Bn=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Rt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.dg){let n=this.mg();if(n.length>0){let a=cs(n);this.Rt.send(a)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,delete t.rst,delete t.ri,this.Rt.removeQueryParams(),this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.j.getCurrentRequestIndex(),c=a.getCurrentIndex();t.ri=c.toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),a.increment()}}else this.Rt.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.j.getCurrentRequestIndex().increment());this.Rt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.vr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.vr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.vr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.vr.allowFromSerialization=!0}canSendEvents(){return this.vr.allowFromQuotaService&&this.vr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.Ge&&this.As){(e=this.Ge)===null||e===void 0||e.anonymize(t);let i=this.As.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.Rs(i)}}onIframeCustomError(t){if(this.bs){let e=this.bs.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.Rs(e)}}onIframeDetailedApiError(t){this.yg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.G.isCurrentPageviewValid()&&this.ka.pushEvent(t,{isUserEvent:!1})}Nt(t){this.G.refreshSession(),this.G.isSessionValid()&&this.ka.pushEvent(t,{isUserEvent:!0})}K(t){Ot.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.hg(),this.Eg(t)}Eg(t){this.f.emitDebugEvents&&this.Bs.emit("recordingEvent",{...t,typeName:M[t.type]})}onStart(){var t;this.ji("tag-version","15.136.1"),this.ji("page-state",document.visibilityState),this.ka.reset(),this.$e.start(),this.initStates(),this.Ue.start(),this.mt&&this.De&&this.mt.subscribe(s.Ut,e=>this.yg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Bs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Di,e=>this.Sg(e)),this.Di=[],this.Ui&&((t=this.qt)===null||t===void 0||t.enableOnlineAssets(),this.Ui=!1)}onStop(){var t;this.$e.stop(),this.mt&&this.mt.unsubscribe(s.Ut),this.Ue.stop(),this.ka.disconnect(),(t=this.qt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Ue.flush(),this.hg.cancel(),this.pushEvents(),this.W.removeQueryParams()}initStates(){this.Ma=O.now(),this.j.getCurrentRequestIndex().reset(),this.qs=0,this.W.setQueryParams(this.EA.getRequestParameters())}pushEvents(){K(this.Ve,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.ug():this.j.clearEvents())}ug(){if(!this.canSendEvents())return;let t=this.j.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Bn=i[i.length-1].date;let n=e.metadata.requestIndex,a=n.getCurrentIndex(),c=this.Ma>this.Bn?i[0].date:this.Ma;this.W.setQueryParams({pn:csString(e.metadata.pageNumber),ri:a.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.W.getQueryParams();this.Dt.addBatchInProgress(`${l.sn}.${l.pn}.${a}`,{...this.W.getQueryParams()},i),this.W.send(i),n.increment(),e.batch.clearEvents(),this.vg&&this.vg()}this.j.clearEmptyBatchSlots()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Eg(t)}yg(t){if(this.Un&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Un.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.fg(t)}fg(t){if(this.qs<s.wA){let e={type:M.API_ERROR,date:O.now(),args:[this.De.anonymize(t)]};this.Rs(e),this.qs=this.qs+1,q.counters.networkRequests.count("collected")}}TA(t){t===$e.ETR_SESSION?this.W.setQueryParams({[s.AA]:s._g}):t===$e.ETR_PAGE&&this.W.setQueryParams({[s.bA]:s._g})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.As)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Rs(i)}onCustomErrorEvent(t){var e;let i=(e=this.bs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.Rs(i)}onPageEvent(t){this.wg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Sg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Di,{eventName:t,eventType:e})}Sg(t){this.TA(t.eventType),this.wg(t.eventName),this.pushEvents()}wg(t){let e={type:M.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.RA)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:M.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:M.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.ji("consent-granted")}triggerRecordingForSessionWithdrawn(){this.ji("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Fn=!0}getStaticResourceManagerStatus(){return this.qt?{isStarted:this.f.useStaticResourceManager&&pn.isSupported(),onlineAssets:{activated:this.qt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Fn}}:null}resetOnlineAssetsOnPageview(){this.Ui=!1,this.Fn=!1}updateOnlineAssetsOnPageview(){this.qt&&this.Fn&&(this.Ui=!0,this.Fn=!1)}onRecordingRequestSent(t){this.vg=t}getRecordingStartTimestamp(){return this.Ma.toString()}getRecordingLastEventTimestamp(){return this.Bn.toString()}onOptOut(){K(this.Ve,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}ji(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:O.now(),type:M.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}mg(){return this.j.extractEvents(M.API_ERROR,M.JAVASCRIPT_ERROR,M.CUSTOM_ERROR,M.TEXT_VISIBILITY,M.POINTER_DOWN)}}return s.Ut="RecordingService",s.RA=255,s.wA=20,s.bA="etrp",s.AA="etrs",s._g="1",F([Rt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),km=(()=>{class s extends Ut{constructor(t,e,i){super(),this.Jt=t,this.Rt=e,this.W=i,this.Ph=!1,this.$n={},this.CA=n=>{if(n.length!==0)for(let a of n){let{metadata:c,events:l}=a;this.IA(c.rt)&&this.W.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.$n={}}onStop(){}recover(){this.Jt.recover(this.CA)}addBatchInProgress(t,e,i){this.$n[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.$n[t]}blockSendingLastMessage(){this.Ph=!1}allowSendingLastMessage(){this.Ph=!0}sendLastMessageBeacon(){if(this.Ph){let{ri:t,rst:e,let:i,...n}=this.W.getQueryParams();n.hlm="true",this.Rt.setQueryParams(n),this.Rt.send()}}IA(t){return!!t&&csString.prototype.indexOf.call(t,x.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.$n),t=>{let{metadata:e,events:i}=this.$n[t];this.Jt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Jt.save(t)}}return F([V("RecordingRecovery")],s.prototype,"recover",null),s})(),Dm=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),xm=8*1024*1024,Lm=(()=>{class s extends Ut{constructor(t,e,i){super(),this.Me=t,this.Tg=e,this.gt=i,this.Oh={},this.Ag=new Set,this.rs=!1}initState(){Ia()&&(this.xe=this.gt.getRequestParameters(),this.PA=`${this.Tg}/exist?${si.toQuery(this.xe)}`,this.OA=`${this.Tg}/putTag?${si.toQuery(this.xe)}`,this.bg=Qs(async()=>{if(this.rs){this.bg();return}this.rs=!0;try{await this.NA()}finally{this.rs=!1}},300),this.Me.onSendStaticResource(t=>{this.Rg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Rg(t)}Rg(t){this.Cg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Cg(e.hash,e.data)})}Cg(t,e){this.Ag.has(t)||(this.Ag.add(t),this.Oh[t]=e,this.bg())}async NA(){let t=this.Oh;this.Oh={};let e=await this.MA(t);if(!e.length)return;let i=this.kA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.OA,{method:"POST",body:n})))}async DA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.xe.pid,filter:Dm.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.PA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async MA(t){let e=[],i=await this.DA(t);return csArray.prototype.forEach.call(i,n=>{let a=t[n];a?csArray.prototype.push.call(e,{hash:n,data:a}):U.warn("SRM: received unknown hash: "+n)}),e}kA(t){let e=0,i=[new FormData];for(let n of t){let{data:a,hash:c}=n,l=i.length-1;if(e=e+a.size,e<xm)i[l].append("",a,c);else{let u=new FormData;u.append("",a,c),e=a.size,csArray.prototype.push.call(i,u)}}return i}}return s})();function It(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Vm=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e,this.Vs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.yi(),this.triggerInitialEvents()}stop(){this.Ei()}yi(){csArray.prototype.forEach.call(this.Vs,t=>Nt(t))}Ei(){csArray.prototype.forEach.call(this.Vs,t=>Mt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:M.HASH_CHANGE,args:[this.M.anonymizePII(this.Ot.href)],date:O.now()};this.L(t)}visibilityChangeListener(){let t={type:M.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.L(t)}}return F([V("hashChange")],s.prototype,"hashChangeListener",null),F([V("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function Um(s){if(!z(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var jm=!!window.chrome,Hm=33,Bm=(()=>{class s{constructor(){this.eventType="user",this.Mh=[],this.FA=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.$A=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.xa=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.kh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=Um(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.kh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.he=new ks((e,i)=>{switch(i){case"initial":case"added":this.yi(e);break;case"removed":this.Ei(e);break}})}init(){this.zA(),this.GA(),this.Jc()}onEvent(t){csArray.prototype.push.call(this.Mh,t)}ne(t,e=!1){csArray.prototype.forEach.call(this.Mh,i=>i(t,e))}start(){this.lh(),this.yi(document),this.he.observe()}stop(){this.Ei(document),this.he.disconnect(),this.Mh=[]}GA(){this.qA()&&csArray.prototype.push.call(this.xa,...this.FA)}zA(){this.WA()&&csArray.prototype.push.call(this.xa,...this.$A)}yi(t){Gi(t)?csArray.prototype.forEach.call(this.xa,e=>Nt(e)):csArray.prototype.forEach.call(this.kh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Nt(i)})}Ei(t){Gi(t)?csArray.prototype.forEach.call(this.xa,e=>Mt(e)):csArray.prototype.forEach.call(this.kh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Mt(i)})}qA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}WA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}lh(){this.YA()}YA(){let t=bs.getScrollContainer()||document,e=et(t),i=this.Ig(t);if(i.top!==0||i.left!==0){let n={type:M.SCROLL,args:[e,i.left,i.top],date:O.now()};this.ne(n,!0)}}Ig(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(D.isMaskedElement(t)||D.isMaskedElementChild(t))return;let e=et(t),i=this.Ig(t),n={type:M.SCROLL,args:[e,i.left,i.top],date:O.now()};this.ne(n)}mouseOverListener(t){if(D.isMaskedElementChild(t.target))return;let e=et(t.target),i={type:M.MOUSE_OVER,args:[e],date:O.now()};this.ne(i)}clickListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLICK,args:[i],date:O.now()};this.ne(n)}keyUpListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_UP,args:[i,n],date:O.now()};this.ne(a)}keyDownListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n=this.U[t.key];if(n===void 0)return;let a={type:M.KEY_DOWN,args:[i,n],date:O.now()};this.ne(a)}copyListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Rs.COPY],date:O.now()};this.ne(n)}cutListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Rs.CUT],date:O.now()};this.ne(n)}pasteListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.CLIPBOARD_COMMAND,args:[i,Rs.PASTE],date:O.now()};this.ne(n)}pointerUpListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_UP,args:[t.pointerId,t.pointerType,It(t.clientX,1),It(t.clientY,1),i,t.button],date:O.now()};this.ne(n)}pointerMoveListener(t){let e={type:M.POINTER_MOVE,args:[t.pointerId,t.pointerType,It(t.clientX,1),It(t.clientY,1)],date:O.now()};this.ne(e)}pointerDownListener(t){let e=pt(t);if(D.isMaskedElementChild(e))return;let i=et(e),n={type:M.POINTER_DOWN,args:[t.pointerId,t.pointerType,It(t.clientX,1),It(t.clientY,1),i,t.button,{pageX:It(t.pageX,1),pageY:It(t.pageY,1)}],date:O.now()};this.ne(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_START,args:[n.identifier,It(n.clientX,1),It(n.clientY,1)],date:O.now()};this.ne(a)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:M.TOUCH_MOVE,args:[n.identifier,It(n.clientX,1),It(n.clientY,1)],date:O.now()};this.ne(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],a={type:t.type==="touchend"?M.TOUCH_END:M.TOUCH_CANCEL,args:[n.identifier,It(n.clientX,1),It(n.clientY,1)],date:O.now()};this.ne(a)}}Jc(){this.U={},this.U[" "]=G.SPACE,this.U.Spacebar=G.SPACE,this.U.Backspace=G.BACKSPACE,this.U.Enter=G.ENTER,this.U.Delete=G.DELETE,this.U.ArrowUp=G.ARROWUP,this.U.ArrowDown=G.ARROWDOWN,this.U.ArrowLeft=G.ARROWLEFT,this.U.ArrowRight=G.ARROWRIGHT,this.U.Up=G.ARROWUP,this.U.Down=G.ARROWDOWN,this.U.Left=G.ARROWLEFT,this.U.Right=G.ARROWRIGHT,this.U.CapsLock=G.CAPSLOCK,this.U.Shift=G.SHIFT,this.U.Tab=G.TAB,this.U.Escape=G.ESCAPE,this.U.Esc=G.ESCAPE,this.U.End=G.END,this.U.Alt=G.ALT,this.U.Control=G.CTRL,this.U.Meta=G.META}}return F([Rt("RecordingPageEvents.start")],s.prototype,"start",null),F([V("scroll")],s.prototype,"scrollListener",null),F([V("mouseOver"),St(),fp()],s.prototype,"mouseOverListener",null),F([V("click"),St()],s.prototype,"clickListener",null),F([V("Event handler type: keyup")],s.prototype,"keyUpListener",null),F([V("Event handler type: keydown")],s.prototype,"keyDownListener",null),F([V("Event handler type: copy")],s.prototype,"copyListener",null),F([V("Event handler type: cut")],s.prototype,"cutListener",null),F([V("Event handler type: paste")],s.prototype,"pasteListener",null),F([V("Event handler type: pointerup"),St()],s.prototype,"pointerUpListener",null),F([V("Event handler type: pointermove"),St(),ar({wait:Hm})],s.prototype,"pointerMoveListener",null),F([V("Event handler type: pointerdown"),St()],s.prototype,"pointerDownListener",null),F([V("Event handler type: touchstart"),St()],s.prototype,"touchStartListener",null),F([V("Event handler type: touchmove"),St()],s.prototype,"touchMoveListener",null),F([V("Event handler type: touchend-cancel"),St()],s.prototype,"touchEndCancelListener",null),s})(),Fm=(()=>{class s{constructor(){}onScannedAsset(t){this.La=t}scanCssString(t){this.Dh(Ks(t))}scanElement(t,e){D.getMaskedElementDetails(t).state!==D.MaskedElementState.NotMasked||e&&D.isMaskedAttribute(t,e)||(Qi(t)?this.KA(t):_n(t)?this.JA(t,e):(this.QA(t,e),this.ZA(t,e),this.tb(t,e)))}JA(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:yc(t)};this.La({type:"stylesheet",asset:a})}}KA(t){var e;let i=new Set;if(t.textContent)for(let a of Ks(t.textContent))i.add(a);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||U.error(a.message)}if(n)for(let a=0;a<n.length;a++){let c=n.item(a).cssText;for(let l of Ks(c))i.add(l)}this.Dh(Ns(i))}xh(t){return!this.eb(t)&&!se(t)&&!Lu(t)}QA(t,e){if(Zh(t)||Qh(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.xh(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.La({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.sb(t.srcset)}}ZA(t,e){if(t.nodeType!==1){nt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}sb(t){this.Dh(Ln(t))}tb(t,e){if((iu(t)||ru(t)||nu(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.xh(i)){let n={assetId:Fe(i),assetRawPath:i,assetBasePath:window.location.href};this.La({type:"asset",asset:n})}}}Dh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.xh(e)),e=>({rawUrl:e,absoluteUrl:Fe(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.La({type:"asset",asset:i})})}eb(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),$m=30,zm=0,Gc=(()=>{class s{constructor(t,e=$m,i=zm){this.ib=t,this.rb=e,this.nb=i,this.qe=new li,this.He=!1,this.Lh=0,this.Pg=()=>{for(this.Lh=0;this.qe.length;){if(this.Lh>=this.rb){csSetTimeout(this.Pg,this.nb);return}let n=O.elapsed(),a=this.qe.pop();if(!a)break;this.runTask(a);let c=O.elapsed()-n;this.Lh+=c}this.He=!1}}schedule(t,e=!1){if(!this.ib||e){t();return}Ot.general.pendingTasks.increase(),this.qe.push(t),this.ob()}ob(){this.He||(this.He=!0,csSetTimeout(()=>{this.Pg()}))}runTask(t){Ot.general.pendingTasks.decrease(),t()}runPendingTasks(){this.qe.forEach(t=>{this.runTask(t)}),this.qe.clear()}clearQueue(){Ot.general.pendingTasks.clear(),Ot.mutations.pendingMutations.clear(),this.qe.clear()}isEmpty(){return this.qe.length===0}}return F([V("TaskScheduler"),Rt("runTask")],s.prototype,"runTask",null),F([Rt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Gm=(()=>{class s{constructor(){this.F=!1,this.Og=new Dn(t=>t.type==="cssRuleInserted"&&this.ab(t)),this.cb=nr(t=>{this.F&&t.length>0&&this.N.schedule(()=>K(t,e=>this.qn.scanElement(e)))}),this.lb=({type:t,asset:e})=>{var i,n,a;t==="stylesheet"&&((i=this.hb)===null||i===void 0||i.call(this,e)),(n=this.db)===null||n===void 0||n.call(this,e);let c={date:O.now(),type:M.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.L)===null||a===void 0||a.call(this,c)},this.N=new Gc(!0,30,0),this.Nn=new Fc(t=>this.pb(t)),this.D=new qe(t=>this.To(t)),this.qn=new Fm,this.qn.onScannedAsset(this.lb)}onEvent(t){this.L=t}onAsset(t){this.db=t}onStyleSheetFound(t){this.hb=t}start(){this.F||(this.F=!0,this.Og.observe(),this.Nn.observe(),this.D.observe())}stop(){this.F&&(this.Og.disconnect(),this.Nn.disconnect(),this.D.disconnect(),this.F=!1)}ab(t){!t.rule||!this.F||this.qn.scanCssString(t.rule)}pb(t){this.F&&D.getMaskedElementDetails(t).state===D.MaskedElementState.NotMasked&&this.cb.push(t)}To(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.qn.scanElement(e.target,e.attributeName);break;case"characterData":this.fb(e.target);break;case"childList":}})}fb(t){zi(t)&&csNodeparentNode.apply(t)&&Qi(csNodeparentNode.apply(t))&&this.qn.scanCssString(t.data)}}return s})(),qc=2*1e3*1024,qm=200,ha=(()=>{class s{constructor(t=qc){this.Vt=[],this.Vh=new kn(t)}addEvent(t){this.Vh.addString(cs(t)),csArray.prototype.push.call(this.Vt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Vt.length&&!(this.Vt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Vt,e,0,t)}eventsCount(){return this.Vt.length}clearEvents(){this.Vh.reset(),this.Vt=[]}isFull(){return this.eventsCount()>=qm}isThresholdReached(){return this.Vh.isThresholdReached()}getEvents(){return this.Vt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Vt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Vt=i,e}stringifyEvents(){return cs(this.Vt)}sI(t){t.type===M.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return F([Rt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function Wm(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}var ua=(()=>{class s{constructor(){this.Va=1}getCurrentIndex(){return this.Va}increment(){this.Va+=1}reset(){this.Va=1}getRequestParameters(){return{ri:`${this.Va}`}}}return s})(),Ym=3,Xm=(()=>{class s{constructor(t,e=qc,i=Ym){this.gb=t,this.Ng=e,this.Uh=i,this.Ua={}}addEvent(t){this.Mg().addEvent(t)}addEventByTimestamp(t){this.Mg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Hi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Hi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Hi();return t.length>=this.Uh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return cs(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Hi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ua[t[e].metadata.pageNumber]}Hi(){return Wm(this.Ua)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Hi(),Km)}kg(){let t=this.gb();if(t<=0)return U.error("RecordingBatchGroup: getCurrentPn() <= 0"),{batch:new ha(this.Ng),metadata:{pageNumber:0,requestIndex:new ua}};let e=this.Ua[t];if(e)return e;let i={batch:new ha(this.Ng),metadata:{pageNumber:t,requestIndex:new ua}};return this.Ua[t]=i,this.Hi().length>this.Uh&&U.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Hi().length}/${this.Uh})`),i}Mg(){return this.kg().batch}getCurrentRequestIndex(){return this.kg().metadata.requestIndex}}return s})();function Km(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}var Jm="csPersisted",da="v2/recording",Qm=["isRecording"],Zm=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],ty=["replay:resourceManager:getStatus","cssrm:getStatus"],ey=(()=>{class s{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v,C,I,S,_,P,N,A,j,tt){this.Us=t,this.R=e,this.f=i,this.xe=n,this.E=a,this.M=c,this.G=l,this.le=u,this.Ge=y,this.mt=p,this.De=E,this.vt=m,this.S=v,this.Ws=C,this.Dg=I,this.se=S,this.de=_,this.tt=P,this.Un=N,this.it=A,this.iI=j,this.ot=tt}init(){var t,e;let i=[],n=[];csArray.prototype.push.call(n,new xg),this.Wn=new Lg(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits),this.Bi();let a=new pm(Jm);this.mb(a),this.j=new Xm(()=>{var P;return((P=this.R.getSession())===null||P===void 0?void 0:P.pageNumber)||0});let c=new Gm;csArray.prototype.push.call(i,c),this.f.useStaticResourceManager&&pn.isSupported()&&(this.qt=new pn,this.Me=new gm,this.xg=new Lm(this.Me,this.f.getStaticResourceManagerUri(),this.xe),this.Dg.addListener(this.xg),csArray.prototype.push.call(n,this.qt));let l=new ri(this.xe,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),u=new Ac(`${this.f.getRecordingUri()}/${da}`);csArray.prototype.push.call(n,this.Wn),csArray.prototype.push.call(n,new $g(this.tt)),csArray.prototype.push.call(n,new zg),this.Fi=new Bm,this.Fi.init(),csArray.prototype.push.call(i,this.Fi),this.Dt=new km(a,u,this.W),csArray.prototype.push.call(i,new Vm(window.location,this.M));let y=new Dg,p=new Wg,E=new Xg,m=new Qg(this.ot),v=new tm,C=[p,this.le,y,new Pm(csArray.prototype.filter.call(i,P=>P)),v,new em,new om,m,E],I=new hm(C,n),S=new Im(I,this.S,this.Me,this.As,this.bs),_=[y,p,E,m,v];this.recordingService=new Mm(this.f,this.j,l,this.G,this.R,this.Ge,this.mt,this.De,this.ot,this.W,this.Dt,u,S,i,_,this.qt,this.Un,this.As,this.bs),this.Ws.addListener(this.recordingService),this.Dg.addListener(this.recordingService),this.recordingService.init(),this.E.register(Qm,()=>this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()),this.E.register(Zm,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(ty,()=>this.recordingService.getStaticResourceManagerStatus()),this.Yn=new fm(this.S,this.R),this.Ws.addListener(this.Yn),this.Us.enableRecordingContext(this.recordingService,this.R,this.Yn),this.jh()}onAfterNaturalPageView(){var t;this.se.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.xg)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Hh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Bi(),this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Eb()):(this.recordingService.resetOnlineAssetsOnPageview(),this._r())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this._r()}onOptout(){this._r(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Bi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Bi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===x.QUOTA_REACHED||t===x.ANALYTICS_ONLY&&e===Lt.ETR_OFF?(this.recordingService.clearEvents(),this._r()):(this.W.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Yn.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.Fi.start(),this.recordingService.pushEvents(),q.counters.longTasks.count>0&&q.counters.longTasks.flush(),q.counters.tasks.count>0&&q.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.se.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Hh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this._r())}jh(){var t,e,i,n;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(n=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||n===void 0?void 0:n.filterByHostSelector;K(a,c=>{Gs(c)&&qe.setShadowRootFilter(l=>{try{return Qt.call(l.host,c)}catch{return!1}})})}}Hh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}_r(){sp(),this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}Eb(){this._r(),this.Hh()}mb(t){let e="byteArray";this.W=this.de.create(`${this.f.getRecordingUri()}/${da}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Bi(){var t;let e=this.it.shouldUseAnonymization();this.Wn.setAnonymization(e),(t=this.yb)===null||t===void 0||t.setAnonymization(e)}}return F([Rt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),F([Rt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),sy=(()=>{class s{constructor(t,e){this.ce=t,this.f=e,this.Lg=!1}enableRecordingContext(t,e,i){this.Lg=!0,this.fr=t,this.R=e,this.Yn=i}getRecordingContext(){var t,e,i;if(!this.Lg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Lt.ETR_OFF,etrStatus:zt.ETR_DISABLED,collectState:x.ANALYTICS_ONLY};let n=this.R.getSession();return{isRecording:this.fr.isRecording(),useAnonymization:this.ce.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.fr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.fr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.fr.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Lt.ETR_ON:Lt.ETR_OFF,etrStatus:this.Yn.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:x.ANALYTICS_ONLY}}}return s})(),ni=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),iy=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),ry=(()=>{class s{constructor(){}static init(t){(!this.Bh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Bh=new Map,i){let n=csString.prototype.split.call(i,".");for(let a=0;a<n.length;a++){let[c,l]=csString.prototype.split.call(n[a],"=");this.Bh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Bh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(iy.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,u=n.value;ny(s.getString("debugLog"),t)&&(n.value=function(...y){return console.log(l,...y),u.bind(this)(...y)})}}}return s})();function ny(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}function pa(){function i(o){let d=o.length;for(;--d>=0;)o[d]=0}let n=0,a=1,c=2,l=3,u=258,y=29,p=256,E=p+1+y,m=30,v=19,C=2*E+1,I=15,S=16,_=7,P=256,N=16,A=17,j=18,tt=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ct=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),wt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=512,k=new Array((E+2)*2);i(k);let L=new Array(m*2);i(L);let H=new Array(T);i(H);let st=new Array(u-l+1);i(st);let Tt=new Array(y);i(Tt);let Ct=new Array(m);i(Ct);function Ee(o,d,f,g,h){this.static_tree=o,this.extra_bits=d,this.extra_base=f,this.elems=g,this.max_length=h,this.has_stree=o&&o.length}let fs,Dt,Ht;function ae(o,d){this.dyn_tree=o,this.max_code=0,this.stat_desc=d}let Ei=o=>o<256?H[o]:H[256+(o>>>7)],We=(o,d)=>{o.pending_buf[o.pending++]=d&255,o.pending_buf[o.pending++]=d>>>8&255},vt=(o,d,f)=>{o.bi_valid>S-f?(o.bi_buf|=d<<o.bi_valid&65535,We(o,o.bi_buf),o.bi_buf=d>>S-o.bi_valid,o.bi_valid+=f-S):(o.bi_buf|=d<<o.bi_valid&65535,o.bi_valid+=f)},Bt=(o,d,f)=>{vt(o,f[d*2],f[d*2+1])},xs=(o,d)=>{let f=0;do f|=o&1,o>>>=1,f<<=1;while(--d>0);return f>>>1},Hn=o=>{o.bi_valid===16?(We(o,o.bi_buf),o.bi_buf=0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},Bn=(o,d)=>{let f=d.dyn_tree,g=d.max_code,h=d.stat_desc.static_tree,b=d.stat_desc.has_stree,w=d.stat_desc.extra_bits,R=d.stat_desc.extra_base,X=d.stat_desc.max_length,B,xt,Ce,it,Qe,ys,Ii=0;for(it=0;it<=I;it++)o.bl_count[it]=0;for(f[o.heap[o.heap_max]*2+1]=0,B=o.heap_max+1;B<C;B++)xt=o.heap[B],it=f[f[xt*2+1]*2+1]+1,it>X&&(it=X,Ii++),f[xt*2+1]=it,!(xt>g)&&(o.bl_count[it]++,Qe=0,xt>=R&&(Qe=w[xt-R]),ys=f[xt*2],o.opt_len+=ys*(it+Qe),b&&(o.static_len+=ys*(h[xt*2+1]+Qe)));if(Ii!==0){do{for(it=X-1;o.bl_count[it]===0;)it--;o.bl_count[it]--,o.bl_count[it+1]+=2,o.bl_count[X]--,Ii-=2}while(Ii>0);for(it=X;it!==0;it--)for(xt=o.bl_count[it];xt!==0;)Ce=o.heap[--B],!(Ce>g)&&(f[Ce*2+1]!==it&&(o.opt_len+=(it-f[Ce*2+1])*f[Ce*2],f[Ce*2+1]=it),xt--)}},lr=(o,d,f)=>{let g=new Array(I+1),h=0,b,w;for(b=1;b<=I;b++)g[b]=h=h+f[b-1]<<1;for(w=0;w<=d;w++){let R=o[w*2+1];R!==0&&(o[w*2]=xs(g[R]++,R))}},Fn=()=>{let o,d,f,g,h,b=new Array(I+1);for(f=0,g=0;g<y-1;g++)for(Tt[g]=f,o=0;o<1<<tt[g];o++)st[f++]=g;for(st[f-1]=g,h=0,g=0;g<16;g++)for(Ct[g]=h,o=0;o<1<<ct[g];o++)H[h++]=g;for(h>>=7;g<m;g++)for(Ct[g]=h<<7,o=0;o<1<<ct[g]-7;o++)H[256+h++]=g;for(d=0;d<=I;d++)b[d]=0;for(o=0;o<=143;)k[o*2+1]=8,o++,b[8]++;for(;o<=255;)k[o*2+1]=9,o++,b[9]++;for(;o<=279;)k[o*2+1]=7,o++,b[7]++;for(;o<=287;)k[o*2+1]=8,o++,b[8]++;for(lr(k,E+1,b),o=0;o<m;o++)L[o*2+1]=5,L[o*2]=xs(o,5);fs=new Ee(k,tt,p+1,E,I),Dt=new Ee(L,ct,0,m,I),Ht=new Ee(new Array(0),jt,0,v,_)},$n=o=>{let d;for(d=0;d<E;d++)o.dyn_ltree[d*2]=0;for(d=0;d<m;d++)o.dyn_dtree[d*2]=0;for(d=0;d<v;d++)o.bl_tree[d*2]=0;o.dyn_ltree[P*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},zn=o=>{o.bi_valid>8?We(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},el=(o,d,f,g)=>{zn(o),g&&(We(o,f),We(o,~f)),o.pending_buf.set(o.window.subarray(d,d+f),o.pending),o.pending+=f},Gn=(o,d,f,g)=>{let h=d*2,b=f*2;return o[h]<o[b]||o[h]===o[b]&&g[d]<=g[f]},hr=(o,d,f)=>{let g=o.heap[f],h=f<<1;for(;h<=o.heap_len&&(h<o.heap_len&&Gn(d,o.heap[h+1],o.heap[h],o.depth)&&h++,!Gn(d,g,o.heap[h],o.depth));)o.heap[f]=o.heap[h],f=h,h<<=1;o.heap[f]=g},qn=(o,d,f)=>{let g,h,b=0,w,R;if(o.last_lit!==0)do g=o.pending_buf[o.d_buf+b*2]<<8|o.pending_buf[o.d_buf+b*2+1],h=o.pending_buf[o.l_buf+b],b++,g===0?Bt(o,h,d):(w=st[h],Bt(o,w+p+1,d),R=tt[w],R!==0&&(h-=Tt[w],vt(o,h,R)),g--,w=Ei(g),Bt(o,w,f),R=ct[w],R!==0&&(g-=Ct[w],vt(o,g,R)));while(b<o.last_lit);Bt(o,P,d)},ur=(o,d)=>{let f=d.dyn_tree,g=d.stat_desc.static_tree,h=d.stat_desc.has_stree,b=d.stat_desc.elems,w,R,X=-1,B;for(o.heap_len=0,o.heap_max=C,w=0;w<b;w++)f[w*2]!==0?(o.heap[++o.heap_len]=X=w,o.depth[w]=0):f[w*2+1]=0;for(;o.heap_len<2;)B=o.heap[++o.heap_len]=X<2?++X:0,f[B*2]=1,o.depth[B]=0,o.opt_len--,h&&(o.static_len-=g[B*2+1]);for(d.max_code=X,w=o.heap_len>>1;w>=1;w--)hr(o,f,w);B=b;do w=o.heap[1],o.heap[1]=o.heap[o.heap_len--],hr(o,f,1),R=o.heap[1],o.heap[--o.heap_max]=w,o.heap[--o.heap_max]=R,f[B*2]=f[w*2]+f[R*2],o.depth[B]=(o.depth[w]>=o.depth[R]?o.depth[w]:o.depth[R])+1,f[w*2+1]=f[R*2+1]=B,o.heap[1]=B++,hr(o,f,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],Bn(o,d),lr(f,X,o.bl_count)},Wn=(o,d,f)=>{let g,h=-1,b,w=d[0*2+1],R=0,X=7,B=4;for(w===0&&(X=138,B=3),d[(f+1)*2+1]=65535,g=0;g<=f;g++)b=w,w=d[(g+1)*2+1],!(++R<X&&b===w)&&(R<B?o.bl_tree[b*2]+=R:b!==0?(b!==h&&o.bl_tree[b*2]++,o.bl_tree[N*2]++):R<=10?o.bl_tree[A*2]++:o.bl_tree[j*2]++,R=0,h=b,w===0?(X=138,B=3):b===w?(X=6,B=3):(X=7,B=4))},Yn=(o,d,f)=>{let g,h=-1,b,w=d[0*2+1],R=0,X=7,B=4;for(w===0&&(X=138,B=3),g=0;g<=f;g++)if(b=w,w=d[(g+1)*2+1],!(++R<X&&b===w)){if(R<B)do Bt(o,b,o.bl_tree);while(--R!==0);else b!==0?(b!==h&&(Bt(o,b,o.bl_tree),R--),Bt(o,N,o.bl_tree),vt(o,R-3,2)):R<=10?(Bt(o,A,o.bl_tree),vt(o,R-3,3)):(Bt(o,j,o.bl_tree),vt(o,R-11,7));R=0,h=b,w===0?(X=138,B=3):b===w?(X=6,B=3):(X=7,B=4)}},sl=o=>{let d;for(Wn(o,o.dyn_ltree,o.l_desc.max_code),Wn(o,o.dyn_dtree,o.d_desc.max_code),ur(o,o.bl_desc),d=v-1;d>=3&&o.bl_tree[wt[d]*2+1]===0;d--);return o.opt_len+=3*(d+1)+5+5+4,d},il=(o,d,f,g)=>{let h;for(vt(o,d-257,5),vt(o,f-1,5),vt(o,g-4,4),h=0;h<g;h++)vt(o,o.bl_tree[wt[h]*2+1],3);Yn(o,o.dyn_ltree,d-1),Yn(o,o.dyn_dtree,f-1)},rl=o=>{let d=4093624447,f;for(f=0;f<=31;f++,d>>>=1)if(d&1&&o.dyn_ltree[f*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(f=32;f<p;f++)if(o.dyn_ltree[f*2]!==0)return 1;return 0},Xn=!1,nl=o=>{Xn||(Fn(),Xn=!0),o.l_desc=new ae(o.dyn_ltree,fs),o.d_desc=new ae(o.dyn_dtree,Dt),o.bl_desc=new ae(o.bl_tree,Ht),o.bi_buf=0,o.bi_valid=0,$n(o)},Kn=(o,d,f,g)=>{vt(o,(n<<1)+(g?1:0),3),el(o,d,f,!0)},ol=o=>{vt(o,a<<1,3),Bt(o,P,k),Hn(o)},al=(o,d,f,g)=>{let h,b,w=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=rl(o)),ur(o,o.l_desc),ur(o,o.d_desc),w=sl(o),h=o.opt_len+3+7>>>3,b=o.static_len+3+7>>>3,b<=h&&(h=b)):h=b=f+5,f+4<=h&&d!==-1?Kn(o,d,f,g):o.strategy===4||b===h?(vt(o,(a<<1)+(g?1:0),3),qn(o,k,L)):(vt(o,(c<<1)+(g?1:0),3),il(o,o.l_desc.max_code+1,o.d_desc.max_code+1,w+1),qn(o,o.dyn_ltree,o.dyn_dtree)),$n(o),g&&zn(o)},cl=(o,d,f)=>(o.pending_buf[o.d_buf+o.last_lit*2]=d>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=d&255,o.pending_buf[o.l_buf+o.last_lit]=f&255,o.last_lit++,d===0?o.dyn_ltree[f*2]++:(o.matches++,d--,o.dyn_ltree[(st[f]+p+1)*2]++,o.dyn_dtree[Ei(d)*2]++),o.last_lit===o.lit_bufsize-1);var ll=nl,hl=Kn,ul=al,dl=cl,pl=ol,fl={_tr_init:ll,_tr_stored_block:hl,_tr_flush_block:ul,_tr_tally:dl,_tr_align:pl},Jn=(o,d,f,g)=>{let h=o&65535|0,b=o>>>16&65535|0,w=0;for(;f!==0;){w=f>2e3?2e3:f,f-=w;do h=h+d[g++]|0,b=b+h|0;while(--w);h%=65521,b%=65521}return h|b<<16|0};let gl=()=>{let o,d=[];for(var f=0;f<256;f++){o=f;for(var g=0;g<8;g++)o=o&1?3988292384^o>>>1:o>>>1;d[f]=o}return d},ml=new Uint32Array(gl());var Se=(o,d,f,g)=>{let h=ml,b=g+f;o^=-1;for(let w=g;w<b;w++)o=o>>>8^h[(o^d[w])&255];return o^-1},Si={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Qn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:yl,_tr_stored_block:El,_tr_flush_block:Sl,_tr_tally:ve,_tr_align:vl}=fl,{Z_NO_FLUSH:Ye,Z_PARTIAL_FLUSH:_l,Z_FULL_FLUSH:wl,Z_FINISH:_e,Z_BLOCK:Zn,Z_OK:Zt,Z_STREAM_END:to,Z_STREAM_ERROR:Ft,Z_DATA_ERROR:Tl,Z_BUF_ERROR:dr,Z_DEFAULT_COMPRESSION:Al,Z_FILTERED:bl,Z_HUFFMAN_ONLY:vi,Z_RLE:Rl,Z_FIXED:Cl,Z_DEFAULT_STRATEGY:Il,Z_UNKNOWN:Pl,Z_DEFLATED:_i}=Qn,Ol=9,Nl=15,Ml=8,pr=256+1+29,kl=30,Dl=19,xl=2*pr+1,Ll=15,Y=3,we=258,Wt=we+Y+1,Vl=32,wi=42,fr=69,Ti=73,Ai=91,bi=103,Xe=113,Ls=666,ht=1,Vs=2,Ke=3,gs=4,Ul=3,Te=(o,d)=>(o.msg=Si[d],d),eo=o=>(o<<1)-(o>4?9:0),Ae=o=>{let d=o.length;for(;--d>=0;)o[d]=0},be=(o,d,f)=>(d<<o.hash_shift^f)&o.hash_mask,Re=o=>{let d=o.state,f=d.pending;f>o.avail_out&&(f=o.avail_out),f!==0&&(o.output.set(d.pending_buf.subarray(d.pending_out,d.pending_out+f),o.next_out),o.next_out+=f,d.pending_out+=f,o.total_out+=f,o.avail_out-=f,d.pending-=f,d.pending===0&&(d.pending_out=0))},gt=(o,d)=>{Sl(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,d),o.block_start=o.strstart,Re(o.strm)},J=(o,d)=>{o.pending_buf[o.pending++]=d},Us=(o,d)=>{o.pending_buf[o.pending++]=d>>>8&255,o.pending_buf[o.pending++]=d&255},jl=(o,d,f,g)=>{let h=o.avail_in;return h>g&&(h=g),h===0?0:(o.avail_in-=h,d.set(o.input.subarray(o.next_in,o.next_in+h),f),o.state.wrap===1?o.adler=Jn(o.adler,d,h,f):o.state.wrap===2&&(o.adler=Se(o.adler,d,h,f)),o.next_in+=h,o.total_in+=h,h)},so=(o,d)=>{let f=o.max_chain_length,g=o.strstart,h,b,w=o.prev_length,R=o.nice_match,X=o.strstart>o.w_size-Wt?o.strstart-(o.w_size-Wt):0,B=o.window,xt=o.w_mask,Ce=o.prev,it=o.strstart+we,Qe=B[g+w-1],ys=B[g+w];o.prev_length>=o.good_match&&(f>>=2),R>o.lookahead&&(R=o.lookahead);do if(h=d,!(B[h+w]!==ys||B[h+w-1]!==Qe||B[h]!==B[g]||B[++h]!==B[g+1])){g+=2,h++;do;while(B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&B[++g]===B[++h]&&g<it);if(b=we-(it-g),g=it-we,b>w){if(o.match_start=d,w=b,b>=R)break;Qe=B[g+w-1],ys=B[g+w]}}while((d=Ce[d&xt])>X&&--f!==0);return w<=o.lookahead?w:o.lookahead},Je=o=>{let d=o.w_size,f,g,h,b,w;do{if(b=o.window_size-o.lookahead-o.strstart,o.strstart>=d+(d-Wt)){o.window.set(o.window.subarray(d,d+d),0),o.match_start-=d,o.strstart-=d,o.block_start-=d,g=o.hash_size,f=g;do h=o.head[--f],o.head[f]=h>=d?h-d:0;while(--g);g=d,f=g;do h=o.prev[--f],o.prev[f]=h>=d?h-d:0;while(--g);b+=d}if(o.strm.avail_in===0)break;if(g=jl(o.strm,o.window,o.strstart+o.lookahead,b),o.lookahead+=g,o.lookahead+o.insert>=Y)for(w=o.strstart-o.insert,o.ins_h=o.window[w],o.ins_h=be(o,o.ins_h,o.window[w+1]);o.insert&&(o.ins_h=be(o,o.ins_h,o.window[w+Y-1]),o.prev[w&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=w,w++,o.insert--,!(o.lookahead+o.insert<Y)););}while(o.lookahead<Wt&&o.strm.avail_in!==0)},Hl=(o,d)=>{let f=65535;for(f>o.pending_buf_size-5&&(f=o.pending_buf_size-5);;){if(o.lookahead<=1){if(Je(o),o.lookahead===0&&d===Ye)return ht;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let g=o.block_start+f;if((o.strstart===0||o.strstart>=g)&&(o.lookahead=o.strstart-g,o.strstart=g,gt(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-Wt&&(gt(o,!1),o.strm.avail_out===0))return ht}return o.insert=0,d===_e?(gt(o,!0),o.strm.avail_out===0?Ke:gs):(o.strstart>o.block_start&&(gt(o,!1),o.strm.avail_out===0),ht)},gr=(o,d)=>{let f,g;for(;;){if(o.lookahead<Wt){if(Je(o),o.lookahead<Wt&&d===Ye)return ht;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),f!==0&&o.strstart-f<=o.w_size-Wt&&(o.match_length=so(o,f)),o.match_length>=Y)if(g=ve(o,o.strstart-o.match_start,o.match_length-Y),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=Y){o.match_length--;do o.strstart++,o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=be(o,o.ins_h,o.window[o.strstart+1]);else g=ve(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(g&&(gt(o,!1),o.strm.avail_out===0))return ht}return o.insert=o.strstart<Y-1?o.strstart:Y-1,d===_e?(gt(o,!0),o.strm.avail_out===0?Ke:gs):o.last_lit&&(gt(o,!1),o.strm.avail_out===0)?ht:Vs},ms=(o,d)=>{let f,g,h;for(;;){if(o.lookahead<Wt){if(Je(o),o.lookahead<Wt&&d===Ye)return ht;if(o.lookahead===0)break}if(f=0,o.lookahead>=Y&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=Y-1,f!==0&&o.prev_length<o.max_lazy_match&&o.strstart-f<=o.w_size-Wt&&(o.match_length=so(o,f),o.match_length<=5&&(o.strategy===bl||o.match_length===Y&&o.strstart-o.match_start>4096)&&(o.match_length=Y-1)),o.prev_length>=Y&&o.match_length<=o.prev_length){h=o.strstart+o.lookahead-Y,g=ve(o,o.strstart-1-o.prev_match,o.prev_length-Y),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=h&&(o.ins_h=be(o,o.ins_h,o.window[o.strstart+Y-1]),f=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=0,o.match_length=Y-1,o.strstart++,g&&(gt(o,!1),o.strm.avail_out===0))return ht}else if(o.match_available){if(g=ve(o,0,o.window[o.strstart-1]),g&&gt(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return ht}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(g=ve(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<Y-1?o.strstart:Y-1,d===_e?(gt(o,!0),o.strm.avail_out===0?Ke:gs):o.last_lit&&(gt(o,!1),o.strm.avail_out===0)?ht:Vs},Bl=(o,d)=>{let f,g,h,b,w=o.window;for(;;){if(o.lookahead<=we){if(Je(o),o.lookahead<=we&&d===Ye)return ht;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=Y&&o.strstart>0&&(h=o.strstart-1,g=w[h],g===w[++h]&&g===w[++h]&&g===w[++h])){b=o.strstart+we;do;while(g===w[++h]&&g===w[++h]&&g===w[++h]&&g===w[++h]&&g===w[++h]&&g===w[++h]&&g===w[++h]&&g===w[++h]&&h<b);o.match_length=we-(b-h),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=Y?(f=ve(o,1,o.match_length-Y),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(f=ve(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),f&&(gt(o,!1),o.strm.avail_out===0))return ht}return o.insert=0,d===_e?(gt(o,!0),o.strm.avail_out===0?Ke:gs):o.last_lit&&(gt(o,!1),o.strm.avail_out===0)?ht:Vs},Fl=(o,d)=>{let f;for(;;){if(o.lookahead===0&&(Je(o),o.lookahead===0)){if(d===Ye)return ht;break}if(o.match_length=0,f=ve(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,f&&(gt(o,!1),o.strm.avail_out===0))return ht}return o.insert=0,d===_e?(gt(o,!0),o.strm.avail_out===0?Ke:gs):o.last_lit&&(gt(o,!1),o.strm.avail_out===0)?ht:Vs};function te(o,d,f,g,h){this.good_length=o,this.max_lazy=d,this.nice_length=f,this.max_chain=g,this.func=h}let js=[new te(0,0,0,0,Hl),new te(4,4,8,4,gr),new te(4,5,16,8,gr),new te(4,6,32,32,gr),new te(4,4,16,16,ms),new te(8,16,32,32,ms),new te(8,16,128,128,ms),new te(8,32,128,256,ms),new te(32,128,258,1024,ms),new te(32,258,258,4096,ms)],$l=o=>{o.window_size=2*o.w_size,Ae(o.head),o.max_lazy_match=js[o.level].max_lazy,o.good_match=js[o.level].good_length,o.nice_match=js[o.level].nice_length,o.max_chain_length=js[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=Y-1,o.match_available=0,o.ins_h=0};function zl(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_i,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xl*2),this.dyn_dtree=new Uint16Array((2*kl+1)*2),this.bl_tree=new Uint16Array((2*Dl+1)*2),Ae(this.dyn_ltree),Ae(this.dyn_dtree),Ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ll+1),this.heap=new Uint16Array(2*pr+1),Ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*pr+1),Ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let io=o=>{if(!o||!o.state)return Te(o,Ft);o.total_in=o.total_out=0,o.data_type=Pl;let d=o.state;return d.pending=0,d.pending_out=0,d.wrap<0&&(d.wrap=-d.wrap),d.status=d.wrap?wi:Xe,o.adler=d.wrap===2?0:1,d.last_flush=Ye,yl(d),Zt},ro=o=>{let d=io(o);return d===Zt&&$l(o.state),d},Gl=(o,d)=>!o||!o.state||o.state.wrap!==2?Ft:(o.state.gzhead=d,Zt),no=(o,d,f,g,h,b)=>{if(!o)return Ft;let w=1;if(d===Al&&(d=6),g<0?(w=0,g=-g):g>15&&(w=2,g-=16),h<1||h>Ol||f!==_i||g<8||g>15||d<0||d>9||b<0||b>Cl)return Te(o,Ft);g===8&&(g=9);let R=new zl;return o.state=R,R.strm=o,R.wrap=w,R.gzhead=null,R.w_bits=g,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=h+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+Y-1)/Y),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<h+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=d,R.strategy=b,R.method=f,ro(o)},ql=(o,d)=>no(o,d,_i,Nl,Ml,Il),Wl=(o,d)=>{let f,g;if(!o||!o.state||d>Zn||d<0)return o?Te(o,Ft):Ft;let h=o.state;if(!o.output||!o.input&&o.avail_in!==0||h.status===Ls&&d!==_e)return Te(o,o.avail_out===0?dr:Ft);h.strm=o;let b=h.last_flush;if(h.last_flush=d,h.status===wi)if(h.wrap===2)o.adler=0,J(h,31),J(h,139),J(h,8),h.gzhead?(J(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),J(h,h.gzhead.time&255),J(h,h.gzhead.time>>8&255),J(h,h.gzhead.time>>16&255),J(h,h.gzhead.time>>24&255),J(h,h.level===9?2:h.strategy>=vi||h.level<2?4:0),J(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(J(h,h.gzhead.extra.length&255),J(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(o.adler=Se(o.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=fr):(J(h,0),J(h,0),J(h,0),J(h,0),J(h,0),J(h,h.level===9?2:h.strategy>=vi||h.level<2?4:0),J(h,Ul),h.status=Xe);else{let w=_i+(h.w_bits-8<<4)<<8,R=-1;h.strategy>=vi||h.level<2?R=0:h.level<6?R=1:h.level===6?R=2:R=3,w|=R<<6,h.strstart!==0&&(w|=Vl),w+=31-w%31,h.status=Xe,Us(h,w),h.strstart!==0&&(Us(h,o.adler>>>16),Us(h,o.adler&65535)),o.adler=1}if(h.status===fr)if(h.gzhead.extra){for(f=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&!(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),Re(o),f=h.pending,h.pending===h.pending_buf_size));)J(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=Ti)}else h.status=Ti;if(h.status===Ti)if(h.gzhead.name){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),Re(o),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.name.length?g=h.gzhead.name.charCodeAt(h.gzindex++)&255:g=0,J(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.gzindex=0,h.status=Ai)}else h.status=Ai;if(h.status===Ai)if(h.gzhead.comment){f=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),Re(o),f=h.pending,h.pending===h.pending_buf_size)){g=1;break}h.gzindex<h.gzhead.comment.length?g=h.gzhead.comment.charCodeAt(h.gzindex++)&255:g=0,J(h,g)}while(g!==0);h.gzhead.hcrc&&h.pending>f&&(o.adler=Se(o.adler,h.pending_buf,h.pending-f,f)),g===0&&(h.status=bi)}else h.status=bi;if(h.status===bi&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&Re(o),h.pending+2<=h.pending_buf_size&&(J(h,o.adler&255),J(h,o.adler>>8&255),o.adler=0,h.status=Xe)):h.status=Xe),h.pending!==0){if(Re(o),o.avail_out===0)return h.last_flush=-1,Zt}else if(o.avail_in===0&&eo(d)<=eo(b)&&d!==_e)return Te(o,dr);if(h.status===Ls&&o.avail_in!==0)return Te(o,dr);if(o.avail_in!==0||h.lookahead!==0||d!==Ye&&h.status!==Ls){let w=h.strategy===vi?Fl(h,d):h.strategy===Rl?Bl(h,d):js[h.level].func(h,d);if((w===Ke||w===gs)&&(h.status=Ls),w===ht||w===Ke)return o.avail_out===0&&(h.last_flush=-1),Zt;if(w===Vs&&(d===_l?vl(h):d!==Zn&&(El(h,0,0,!1),d===wl&&(Ae(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),Re(o),o.avail_out===0))return h.last_flush=-1,Zt}return d!==_e?Zt:h.wrap<=0?to:(h.wrap===2?(J(h,o.adler&255),J(h,o.adler>>8&255),J(h,o.adler>>16&255),J(h,o.adler>>24&255),J(h,o.total_in&255),J(h,o.total_in>>8&255),J(h,o.total_in>>16&255),J(h,o.total_in>>24&255)):(Us(h,o.adler>>>16),Us(h,o.adler&65535)),Re(o),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Zt:to)},Yl=o=>{if(!o||!o.state)return Ft;let d=o.state.status;return d!==wi&&d!==fr&&d!==Ti&&d!==Ai&&d!==bi&&d!==Xe&&d!==Ls?Te(o,Ft):(o.state=null,d===Xe?Te(o,Tl):Zt)},Xl=(o,d)=>{let f=d.length;if(!o||!o.state)return Ft;let g=o.state,h=g.wrap;if(h===2||h===1&&g.status!==wi||g.lookahead)return Ft;if(h===1&&(o.adler=Jn(o.adler,d,f,0)),g.wrap=0,f>=g.w_size){h===0&&(Ae(g.head),g.strstart=0,g.block_start=0,g.insert=0);let X=new Uint8Array(g.w_size);X.set(d.subarray(f-g.w_size,f),0),d=X,f=g.w_size}let b=o.avail_in,w=o.next_in,R=o.input;for(o.avail_in=f,o.next_in=0,o.input=d,Je(g);g.lookahead>=Y;){let X=g.strstart,B=g.lookahead-(Y-1);do g.ins_h=be(g,g.ins_h,g.window[X+Y-1]),g.prev[X&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=X,X++;while(--B);g.strstart=X,g.lookahead=Y-1,Je(g)}return g.strstart+=g.lookahead,g.block_start=g.strstart,g.insert=g.lookahead,g.lookahead=0,g.match_length=g.prev_length=Y-1,g.match_available=0,o.next_in=w,o.input=R,o.avail_in=b,g.wrap=h,Zt};var Kl=ql,Jl=no,Ql=ro,Zl=io,th=Gl,eh=Wl,sh=Yl,ih=Xl,rh="pako deflate (from Nodeca project)",Hs={deflateInit:Kl,deflateInit2:Jl,deflateReset:Ql,deflateResetKeep:Zl,deflateSetHeader:th,deflate:eh,deflateEnd:sh,deflateSetDictionary:ih,deflateInfo:rh};let nh=(o,d)=>Object.prototype.hasOwnProperty.call(o,d);var oh=function(o){let d=Array.prototype.slice.call(arguments,1);for(;d.length;){let f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let g in f)nh(f,g)&&(o[g]=f[g])}}return o},ah=o=>{let d=0;for(let g=0,h=o.length;g<h;g++)d+=o[g].length;let f=new Uint8Array(d);for(let g=0,h=0,b=o.length;g<b;g++){let w=o[g];f.set(w,h),h+=w.length}return f},oo={assign:oh,flattenChunks:ah};let ao=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ao=!1}let Bs=new Uint8Array(256);for(let o=0;o<256;o++)Bs[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;Bs[254]=Bs[254]=1;var ch=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let d,f,g,h,b,w=o.length,R=0;for(h=0;h<w;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<w&&(g=o.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),R+=f<128?1:f<2048?2:f<65536?3:4;for(d=new Uint8Array(R),b=0,h=0;b<R;h++)f=o.charCodeAt(h),(f&64512)===55296&&h+1<w&&(g=o.charCodeAt(h+1),(g&64512)===56320&&(f=65536+(f-55296<<10)+(g-56320),h++)),f<128?d[b++]=f:f<2048?(d[b++]=192|f>>>6,d[b++]=128|f&63):f<65536?(d[b++]=224|f>>>12,d[b++]=128|f>>>6&63,d[b++]=128|f&63):(d[b++]=240|f>>>18,d[b++]=128|f>>>12&63,d[b++]=128|f>>>6&63,d[b++]=128|f&63);return d};let co=(o,d=o.length)=>{if(d<65534&&o.subarray&&ao)return String.fromCharCode.apply(null,o.length===d?o:o.subarray(0,d));let f="";for(let g=0;g<d;g++)f+=String.fromCharCode(o[g]);return f};var lh=(o,d)=>{let f=d||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,d));let g,h,b=new Array(f*2);for(h=0,g=0;g<f;){let w=o[g++];if(w<128){b[h++]=w;continue}let R=Bs[w];if(R>4){b[h++]=65533,g+=R-1;continue}for(w&=R===2?31:R===3?15:7;R>1&&g<f;)w=w<<6|o[g++]&63,R--;if(R>1){b[h++]=65533;continue}w<65536?b[h++]=w:(w-=65536,b[h++]=55296|w>>10&1023,b[h++]=56320|w&1023)}return co(b,h)},hh=(o,d)=>{d=d||o.length,d>o.length&&(d=o.length);let f=d-1;for(;f>=0&&(o[f]&192)===128;)f--;return f<0||f===0?d:f+Bs[o[f]]>d?f:d},lo={string2buf:ch,buf2string:lh,utf8border:hh};function uh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var dh=uh;let ho=Object.prototype.toString,{Z_NO_FLUSH:ph,Z_SYNC_FLUSH:fh,Z_FULL_FLUSH:gh,Z_FINISH:mh,Z_OK:Ri,Z_STREAM_END:yh,Z_DEFAULT_COMPRESSION:Eh,Z_DEFAULT_STRATEGY:Sh,Z_DEFLATED:vh}=Qn;function Ci(o){this.options=oo.assign({level:Eh,method:vh,chunkSize:16384,windowBits:15,memLevel:8,strategy:Sh},o||{});let d=this.options;d.raw&&d.windowBits>0?d.windowBits=-d.windowBits:d.gzip&&d.windowBits>0&&d.windowBits<16&&(d.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new dh,this.strm.avail_out=0;let f=Hs.deflateInit2(this.strm,d.level,d.method,d.windowBits,d.memLevel,d.strategy);if(f!==Ri)throw new Error(Si[f]);if(d.header&&Hs.deflateSetHeader(this.strm,d.header),d.dictionary){let g;if(typeof d.dictionary=="string"?g=lo.string2buf(d.dictionary):ho.call(d.dictionary)==="[object ArrayBuffer]"?g=new Uint8Array(d.dictionary):g=d.dictionary,f=Hs.deflateSetDictionary(this.strm,g),f!==Ri)throw new Error(Si[f]);this._dict_set=!0}}Ci.prototype.push=function(o,d){let f=this.strm,g=this.options.chunkSize,h,b;if(this.ended)return!1;for(d===~~d?b=d:b=d===!0?mh:ph,typeof o=="string"?f.input=lo.string2buf(o):ho.call(o)==="[object ArrayBuffer]"?f.input=new Uint8Array(o):f.input=o,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(g),f.next_out=0,f.avail_out=g),(b===fh||b===gh)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(h=Hs.deflate(f,b),h===yh)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),h=Hs.deflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===Ri;if(f.avail_out===0){this.onData(f.output);continue}if(b>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},Ci.prototype.onData=function(o){this.chunks.push(o)},Ci.prototype.onEnd=function(o){o===Ri&&(this.result=oo.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function _h(o,d){d=d||{};let f=new Ci(d);if(f.push(o,!0),f.err)throw f.msg||Si[f.err];return f.result}function wh(o,d){return d=d||{},d.gzip=!0,_h(o,d)}return(o,d,f)=>{let g=wh(o);return d==="base64"?g=btoa(co(g)):g=g.buffer,f&&f(g),g}}var oy=(()=>{class s extends Za{constructor(t){super(t),this.algorithm=sr.GZIP,this.Vg=pa(),this.Sb=(i,n,a)=>{let c=this.Vg(i,n);a(c)},this.compress=fa(),typeof CompressionStream!="undefined"&&jm||(this.compress=this.Sb,this.getCompressorSourceCode=()=>pa.toString())}compressSync(t,e){return this.Vg(t,e)}getCompressorSourceCode(){return fa.toString()}}return s})();function fa(){let s=r=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([r]))});return(r,t,e)=>{let i=new Response(r).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();if(t==="base64"){n.then(a=>s(a)).then(a=>e(a));return}n.then(a=>e(a))}}var ay=(()=>{class s extends Za{constructor(){super(...arguments),this.algorithm=sr.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Wc=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!ry.isCompressionEnabled()?new ay(t):this.instance=new oy(t)}}return s})(),cy=["setEncryptionSelectors"],Yc=["setPIISelectors"],ly=["setCapturedElementsSelector"],hy=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.lt=i,this.Ee=n,this.Bt=a,this.ot=c,this.wr=l}init(){var t,e;this.wr&&this.ot&&((t=this.wr)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.Ee.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Ee.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.Ee.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(Yc,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(ly,t=>{this.Bt.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(cy,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.wr)===null||i===void 0||i.addSelector(t)})}}return s})();var uy=(()=>{class s extends Ut{constructor(t,e,i,n,a,c){super(),this.le=t,this.lt=e,this.Bt=i,this.wr=n,this.Tr=a,this.it=c}onStart(){var t,e,i;this.Bt.start(),this.le.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.le.startIdentifier(),(e=this.wr)===null||e===void 0||e.start(),(i=this.Tr)===null||i===void 0||i.start()}onStop(){var t,e;this.Bt.stop(),this.le.stopIdentifier(),(t=this.wr)===null||t===void 0||t.stop(),(e=this.Tr)===null||e===void 0||e.stop()}}return s})(),dy=(()=>{class s{constructor(t,e,i,n,a){this.it=t,this.lt=e,this.Ee=i,this.Bt=n,this.ot=a}getSensitiveStatus(){var t,e;return{started:this.Ee.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Bt.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Ee.isStarted,i=this.it.shouldUseAnonymization();return e?D.isMaskedElement(t)||D.isMaskedElementChild(t)?xe.MASKED:ap.shouldEncrypt(t)?xe.ENCRYPTED:Ve.isEditableNode(t)?xe.ANONYMIZED:i?pe.isWhitelistedElement(t)?xe.CAPTURED:xe.ANONYMIZED:xe.CAPTURED:xe.ANONYMIZED}}return s})(),py=(()=>{class s{constructor(t){this.G=t}onAfterVisitorRenewal(){this.G.renewSession()}}return s})(),ga=(()=>{let s;return function(r){function t(p,E){for(let m of p)if(i(m,E))return!0;return!1}r.isUrlMatching=t;function e(p,E){if(z(E)){for(let m of p)if(i(m,E))return!0}else if(Bi(E)){for(let m of p)if(i(m,csString(E)))return!0}return!1}r.isMatching=e;function i(p,E){let m=n(p,E);return p.negate?!m:m}function n(p,E){switch(p.rule_type==="date"&&(p.match_operation==="less_than"||p.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),p.match_operation){case"exact":switch(p.rule_type){case"string":return z(p.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(p.pattern):!1;case"boolean":return E===p.pattern||E===csString(p.pattern);case"number":return bt(E)?Number(E)===Number(p.pattern):!1;default:return E===p.pattern}case"starts_with":return z(p.pattern)?csString.prototype.indexOf.call(E,p.pattern)===0:!1;case"ends_with":return z(p.pattern)?ci(E,p.pattern):!1;case"contains":return z(p.pattern)?csString.prototype.indexOf.call(E,p.pattern)!==-1:!1;case"regex":if(!z(p.pattern))return!1;try{return new csRegExp(p.pattern).test(E)}catch(m){return U.warn(`targeting.matchOperation.regex invalid ${m==null?void 0:m.message}`),!1}case"simple":return z(p.pattern)?y(E)===y(p.pattern):!1;case"greater_than":return Number(E)>Number(p.pattern);case"less_than":return Number(E)<Number(p.pattern);case"exact_date":{let m=Number(p.pattern);if(!qt(m))return!1;let v=new csDate(m*1e3);return new csDate(E).toDateString()===v.toDateString()}case"exact_days_ago":return a(p,E);case"more_than_days_ago":return c(p,E);case"less_than_days_ago":return l(p,E);case"unknown":return u(E);default:return U.warn(`targeting.matchOperation.regex not managed operation ${p.match_operation}`),!1}}function a(p,E){let m=new csDate,v=m.setDate(m.getDate()-Number(p.pattern)),C=new csDate(v);return new csDate(E).toDateString()===C.toDateString()}function c(p,E){let m=Number(p.pattern);if(!qt(m))return!1;let v=Number(m)+1,C=new csDate,I=new csDate(C);return I.setDate(C.getDate()-v),new csDate(E).getTime()<=I.getTime()}function l(p,E){let m=Number(p.pattern);if(!qt(m))return!1;if(m===0)return a(p,E);let v=new csDate,C=new csDate(v);return C.setDate(v.getDate()-m),new csDate(E).getTime()>=C.getTime()}function u(p){return bt(p)?z(p)?csString.prototype.trim.call(p)==="":Bi(p)?p===!0:qt(p)?p!==0:!1:!0}function y(p){let E=kt(p,"http://")||kt(p,"https://")?p:`https://${p}`,m=Qa(E);return m!==null?csString.prototype.replace.call(m.host,/^www./,""):p}}(s||(s={})),s})(),fy=(()=>{class s{constructor(){this.jg=[],this.Hg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.jg,e):e.component==="trigger"&&csArray.prototype.push.call(this.Hg,e)}matchUrl(t){return ga.isUrlMatching(this.jg,t)}matchTrigger(t){return ga.isMatching(this.Hg,t)}}return s})(),gy=(()=>{class s extends Ut{constructor(t,e,i){super(),this.ja=t,this.$h=e,this.A=i}init(){this.zh=new fy,this.ja&&this.zh.setTargetingRules(this.ja)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Gh(t,"url")&&this.$h()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Gh(t,"url")&&this.$h()}onExternalEvent(t){this.isStarted&&this.Gh(t.name,"trigger")&&this.$h()}Gh(t,e){var i,n;return e==="url"&&z(t)&&(!((i=this.zh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.zh)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),my=(()=>{class s{constructor(t,e,i,n,a,c){this.ja=t,this.bb=e,this.S=i,this._t=n,this.J=a,this.A=c}init(){this.Kn=new gy(this.ja,this.bb,this.A),this.J.addListener(this.Kn),this.Kn.init()}start(){this.Kn.start()}stop(){this.Kn.stop()}checkInitialUrlTargetingRules(){this.Kn.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===x.ANALYTICS_ONLY?this.S.emitCollectStateChange(x.ANALYTICS_ONLY_RULES_TARGETING,Lt.ETR_OFF):t===x.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(x.RECORDING_RULES_TARGETING,Lt.ETR_OFF)}}return s})();var Xc=":";function ma(s){let r=[],t=yy(s),e=csString.prototype.split.call(t,"/");for(let i of e)kt(i,Xc)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function yy(s){let r=s;return kt(s,"/")&&(r=csString.prototype.substring.call(r,1)),ci(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Ey=(()=>{class s{constructor(){this.Fg=new Set,this.$g=[],this.qh=new Set,this.Wh=[]}addUrlMaskingPattern(t){if(this.Fg.has(t))return;this.Fg.add(t);let e=ma(t);csArray.prototype.push.call(this.$g,e)}getUrlMaskingPatterns(){return this.$g}resetPartialUrlMaskingPatterns(){this.qh.clear(),this.Wh=[]}addPartialUrlMaskingPattern(t){if(this.qh.has(t))return;this.qh.add(t);let e=ma(t);csArray.prototype.push.call(this.Wh,e)}getPartialUrlMaskingPatterns(){return this.Wh}}return s})();var Sy=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.R=i,this.Qe=O.now()}resetStartTime(){this.Qe=O.now()}getSessionData(){let{projectId:t}=this.f,e=this.I.getVisitor();e==null&&U.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},a=this.R.getSession();a===null&&U.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:O.now()-this.Qe}}}return s})(),vy=["clearSession"],_y=["extendSession"];var wy=["getSessionData"],Ty=["session:start:newVisitor"],Ay=["session:clear:visitor"],by=(()=>{class s{constructor(t,e,i,n){this.f=t,this.I=e,this.R=i,this.E=n}init(){this.Yh=new Sy(this.f,this.I,this.R),this.E.register(vy,()=>this.R.removeSession()),this.E.register(_y,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(wy,()=>this.Yh.getSessionData(),{disableApplyPending:!0}),this.E.register(Ty,()=>this.I.renewVisitor()),this.E.register(Ay,()=>{this.I.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.I.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.Yh.resetStartTime()}onAfterArtificialPageView(){this.Yh.resetStartTime()}onOptout(){this.I.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),Ry=(()=>{class s{constructor(t,e,i,n,a,c,l,u,y,p,E,m,v,C,I,S,_,P,N,A,j,tt,ct,jt,wt,T,k,L,H,st,Tt,Ct,Ee,fs){this.gt=t,this.Ha=e,this.pe=i,this.I=n,this.R=a,this.G=c,this.xi=l,this.S=u,this.E=y,this.Xh=p,this.f=E,this.Kh=m,this.ti=v,this.Jn=C,this.Tt=I,this.M=S,this.Q=_,this.tt=P,this.A=N,this.Pb=A,this.J=j,this.St=tt,this.Et=ct,this.zg=jt,this.se=wt,this.Ob=T,this.N=k,this.de=L,this.O=H,this.bt=st,this._t=Tt,this.lt=Ct,this.We=Ee,this.fs=fs,this.Nb=(Dt=!1)=>{let Ht=this.R.getSession();Ht===null?(this.Ar=new my(this.f.recordTargetingRules,this.Gg,this.S,this._t,this.J,this.A),this.Ar.init(),this.Ar.start()):(Ht.collectState===x.RECORDING_RULES_TARGETING||Ht.collectState===x.ANALYTICS_ONLY_RULES_TARGETING)&&this.Gg(Dt)},this.Gg=(Dt=!1)=>{this.br.onLoad(()=>{var Ht,ae;(Ht=this.Ar)===null||Ht===void 0||Ht.emitTargetingCollectState(),(ae=this.Ar)===null||ae===void 0||ae.stop(),this.S.emitStartTracking(Dt)}),this.Ba(Dt)},this.Ba=(Dt=!1)=>{this.ti.isActive()||(this.lt.init(),this.Jh.start(Dt),this.br.start())},this.Mb=()=>{this.S.emitBeforeSessionRenewal(),this.Rr(!0),this.S.emitAfterSessionRenewal()},this.kb=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(Dt=>{Dt!==x.QUOTA_REACHED&&(this.Rr(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.Kh.init(),this.ti.init(),this.ti.isActive())return;let t,e,i,n,a,c,l,u,y,p,E,m,v,C,I,S,_,P,N;this.N.schedule(()=>{I=new py(this.G),m=new Tp(this.Q),v=new rp(()=>{}),S=new np,N=new op;let A=new uy(v,this.lt,S,P,N,this.Qh());C=new dy(this.Qh(),this.lt,A,S,_);let j=new hy(this.S,this.E,this.lt,A,S,_,P);j.init(),this.S.addListener(j),t=new Of(this.f,this.Ha,this.I,this.Q,m,this.E,this.G,new _p(U),this.St,this.de,this.J,C,this._l),e=new Lf(this.E,this.R,this.f,this.gt,this.pe,this.M),E=new sy(C,this.f);let tt=null,ct=new lg;i=new rg(this.I,this.R,this.E,this.St,tt,this.f,ct,E),n=new zf(this.f,this.Ha,this.I,this.E,this.M,this.G,this.A);let jt;this.Jh=new Sg(this.f,this.E,this.S,this.Ha,this.I,this.R,this.xi,this.Tt,this.Et,this.A,this.se,ct,this.J,this.We,jt),this.qg=new by(this.f,this.I,this.R,this.E),l=new cg(this.f,this.E,this.pe,this.Ha,this.J),u=new ng(this.E),y=new bp,this.br=new Yp}),this.N.schedule(()=>{this.Jn.init()}),this.N.schedule(()=>{i.init()}),this.N.schedule(()=>{e.init()}),this.N.schedule(()=>{n.init()}),this.N.schedule(()=>{this.zg.init()}),this.N.schedule(()=>{this.Jh.init()}),this.N.schedule(()=>{this.qg.init()}),this.N.schedule(()=>{l.init()}),this.N.schedule(()=>{this.Pb.init()}),this.N.schedule(()=>{u.init()}),this.N.schedule(()=>{y.init()}),this.N.schedule(()=>{this.Ob.init()}),this.N.schedule(()=>{this.S.addListener(this.qg),this.S.addListener(this.Xh),this.S.addListener(t),this.S.addListener(this.Jn),this.S.addListener(i),this.S.addListener(n),this.S.addListener(this.zg),this.S.addListener(this.Jh),this.S.addListener(l),this.S.addListener(e),this.S.addListener(y),this.S.addListener(I)}),ni.isRecordingSupported()&&this.N.schedule(()=>{let A=new ey(E,this.R,this.f,this.gt,this.E,this.M,this.G,v,this.Ge,this.mt,this.De,this.vt,this.S,this.J,this.St,this.se,this.de,this.tt,this.Un,this.Qh(),this.ar,_);A.init(),this.S.addListener(A),i.setRecordingService(A.recordingService)}),this.N.schedule(()=>{var A;let j,tt}),this.N.schedule(()=>{t.init()}),this.N.schedule(()=>{this.f.isQuotaEnabled()?this.G.onSessionExpired(()=>{this.kb()}):this.G.onSessionExpired(()=>{this.Mb()}),this.Rr()})}Rr(t=!1){var e,i,n;if(this.f.hasTargetingRules()){this.Nb(t),this.E.start(),(e=this._l)===null||e===void 0||e.start(),this.Ar&&this.Ar.checkInitialUrlTargetingRules();return}this.E.start(),(i=this._l)===null||i===void 0||i.start(),this.br.onLoad(()=>{this.S.emitStartTracking(t)}),(!mc(this.f)||t)&&this.Ba(t)}Qh(){if(this.it)return this.it;let t=new pc;return this.it=new up(this.f,this.A,t,this.Tt),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),Cy=(()=>{class s{constructor(t,e,i,n,a,c,l,u){this.f=t,this.I=e,this.Xe=i,this.Wg=n,this.Db=a,this.xb=c,this.Lb=l,this.Zh=u}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.Lb)===null||e===void 0||e.start(()=>this.tu(t)):(i=this.xb)===null||i===void 0||i.applyUpToDate(()=>this.tu(t)):this.tu(t)}tu(t){this.Db.handle(),this.Wg.clear(),this.Vb()?(this.Wg.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}Vb(){let t=as.boolean(this.f.sampleRate);return this.Zh.isForceIncluded()||!this.Xe.isExcluded()&&this.I.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),Iy=(()=>{class s{constructor(t,e,i,n){this.f=t,this.ut=e,this.S=i,this.R=n,this.Ub=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.jb(),(t=this.R)===null||t===void 0||t.removeSession()),this.Hb(e),this.setVisitor(e)}jb(){return{id:Wp.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:go(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}Hb(t){let e=go();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.Yg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.ut.get()}setVisitor(t){this.ut.set(t)}doesVisitorExist(){return this.ut.get()!==null}resetVisitor(){this.Xg(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.ut.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.ut.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Yg===void 0?!1:t.visitsCount!==this.Yg}Bb(){return!Q(this.Kg)||O.now()-this.Kg>this.Ub}renewVisitor(){this.Bb()?(this.Kg=O.now(),this.Xg(),this.S.emitAfterVisitorRenewal()):U.warn("session:start:newVisitor is trying to renew visitor under time limit")}Xg(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),Yt="_cs_s",gn=18e5,Vr=".",Py=13,xi=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),Oy=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.X=i,this.ie=null,this.eu=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?ac(e):null}getRawSession(t){if(t){let y=this.su();return en(y)}let{sessionString:e,status:i}=this.Fb(),n=en(e);if(i!==xi.EXPIRED)return n;if(this.f.cookielessTrackingEnabled)return null;let a=this.su();if(!a)return null;let c=csString.prototype.split.call(a,Vr);if(!s.Jg(c))return a;let l=c[c.length-1],u=parseInt(l,10);return isNaN(u)||this.$b(u),n}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}set(t,e=gn){var i;let n=O.now()+e,a=Ud(t);a+=`${Vr}${n}`,this.zb(a,n),this.f.cookielessTrackingEnabled?this.X.setItem(Yt,a):(this.O.set(Yt,a,e),(i=this.fi)===null||i===void 0||i.call(this,Yt,a,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Yt):(this.O.delete(Yt),(t=this.gi)===null||t===void 0||t.call(this,Yt)),this.Gb()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.O.delete(Yt,er.CURRENT_DOMAIN):this.O.delete(Yt,this.O.getRootDomain()),this.set(t))}isValid(t){return t!==null&&ir(t)}zb(t,e){this.ie={sessionString:t,expires:e}}Fb(){return this.ie?this.ie&&O.now()<=this.ie.expires?{sessionString:this.ie.sessionString,status:xi.FOUND}:{sessionString:this.ie.sessionString,status:xi.EXPIRED}:{sessionString:this.su(),status:xi.NOT_FOUND}}Gb(){this.ie=null}$b(t){this.ie&&(this.ie.expires=t,this.eu=!0)}isCacheRefreshed(){return this.eu}resetCacheRefreshed(){this.eu=!1}su(){if(this.f.cookielessTrackingEnabled){let e=this.X.getItem(Yt);return!e||this.Qg(e)?null:e}let t=this.O.get(Yt);return!t||this.Qg(t)?null:t}Qg(t){let e=csString.prototype.split.call(t,Vr);if(!s.Jg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static Jg(t){return t[t.length-1].length===Py}}return s})(),Un=60*1e3,Ny=60*Un,My=4*Ny-Un,vs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),ky=(()=>{class s{constructor(t,e,i,n,a){this.ke=t,this._t=e,this.S=i,this.qb=n,this.Wb=a,this.Qn=null,this.iu=0,this.Zn=vs.NO}setDynamicVariablesService(t){this.Yb=t}createOrUpdateSession(){this.ru(),this.Xb=O.now(),this.iu=0;let t=this.Zg();t===null?(t=this.Kb(),this.Fa(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.Jb(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Zn=vs.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Zn=vs.WITHDRAWN}Fa(t){this.Zn===vs.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.Zn===vs.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.Zn=vs.NO}Kb(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.qb?tn.NOT_EXPRESSED:tn.UNNECESSARY,etrStatus:zt.ETR_NOT_SAVED_SESSION}}Jb(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===x.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ke.get()}Zg(){return this.ke.get(!0)}doesSessionExist(){return this.ke.get()!==null}setSession(t){this.ke.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.Zg();t&&this.setSession(t)}removeSession(){this.ke.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==x.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===x.RECORDING_RULES_TARGETING?x.RECORDING_GLOBAL_SAMPLING:t.collectState),this.Wb&&csArray.prototype.push.call(e,x.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.ke.getRawSession();return this.ke.isValid(t)}handleSubdomainChange(){this.ke.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ke.isCacheRefreshed();return e&&t&&this.ke.resetCacheRefreshed(),e}extendSessionPeriodically(){this.Qn||this.tm()}extendSession(){let t=this.getSession();return t===null?(U.warn("extendSession is trying to extend an expired session"),this.ru(),!1):(this.setSession(t),!0)}tm(){if(this.Qb()){this.ru();return}this.extendSession()&&(this.Zb(),this.tR())}tR(){this.Qn=window.csSetTimeout(()=>{this.tm()},gn-Un)}Qb(){return My-(O.now()+gn-this.Xb)<0}ru(){this.Qn&&(window.csClearTimeout(this.Qn),this.Qn=null)}Zb(){this.iu+=1,this.Yb.trackDynamicVariable("session_expiry_update",this.iu)}}return s})(),Dy=(()=>{class s{constructor(t,e,i){this.f=t,this.I=e,this.Xe=i}clear(){this.eR()&&(this.em=this.I.getVisitor(),this.I.removeVisitor()),this.sR()&&this.Xe.removeExclusion()}eR(){return this.I.doesVisitorExist()&&this.I.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}sR(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.em&&this.I.setVisitor(this.em)}}return s})(),xy=(()=>{class s{constructor(t,e,i){this.I=t,this.R=e,this.iR=i}handle(){this.I.hasAllowSubdomainsChanged()&&(this.I.handleSubdomainChange(),this.R.handleSubdomainChange(),this.iR.handleSubdomainChange())}}return s})(),De="_cs_c",ts=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),Ly=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.bt=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.bt.getItem(De):t=this.O.get(De),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.bt.setItem(De,csString(t)):this.O.set(De,csString(t),En)}remove(){this.f.cookielessTrackingEnabled?this.bt.removeItem(De):this.O.delete(De)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.O.delete(De,er.CURRENT_DOMAIN):this.O.delete(De,this.O.getRootDomain()))}}return s})(),Vy=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!He.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}He.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!He.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}He.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),Uy=["replay:consent:unanonymized:granted","trackConsentGranted"],jy=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Hy=["replay:consent:startForSession:granted"],By=["replay:consent:startForSession:withdrawn"],Fy=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.E=e,this.Tt=i,this.R=n,this.S=a}init(){this.sm=new Vy(this.f,this.R,this.S),this.Tt.setInitialConsent(),this.ht()}ht(){this.E.register(Uy,()=>{this.Tt.grantReplayAnonymizationConsent()}),this.E.register(jy,()=>{this.Tt.withdrawReplayAnonymizationConsent()}),this.E.register(Hy,()=>{this.sm.grantReplayConsent()}),this.E.register(By,()=>{this.sm.withdrawReplayConsent()})}onOptout(){this.Tt.removeAllConsents()}onBeforeVisitorRenewal(){this.Tt.removeAllConsents()}onAfterVisitorRenewal(){this.Tt.setInitialConsent()}onAfterVisitorCleared(){this.Tt.setInitialConsent()}}return s})(),$y=(()=>{class s{constructor(t,e,i){this.f=t,this.ut=e,this.S=i}setInitialConsent(){let t=this.ut.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===ts.NOT_REQUIRED||!e&&t!==ts.NOT_REQUIRED}handleSubdomainChange(){this.ut.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?ts.NOT_EXPRESSED:ts.NOT_REQUIRED;this.ut.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(ts.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.ut.set(ts.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.ut.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.ut.get()===ts.GRANTED}getRequestParameters(){return{uc:`${this.ut.get()}`}}}return s})(),zy=(()=>{class s{constructor(t,e,i,n,a,c,l){this.S=t,this.E=e,this.Xh=i,this.Kh=n,this.ti=a,this.rR=c,this.Jn=l}start(){this.S.addListener(this.rR),this.S.addListener(this.Jn),this.S.addListener(this.Xh),this.Jn.init(),this.Kh.init(),this.ti.init(),!this.ti.isActive()&&this.E.start()}}return s})(),Gy=(()=>{class s{constructor(t,e){this.Ot=t,this.ut=e}exclude(t){this.ut.set(csString(t.lastTrackingDraw))}removeExclusion(){this.ut.remove()}isExcluded(){return this.nR()||this.oR()}nR(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.ut.get()}oR(){return csString.prototype.indexOf.call(this.Ot.href,de)>0}}return s})(),qy=(()=>{class s{constructor(t){this.Mi=t}onOptout(){this.Mi.removeExclusion()}}return s})(),Ur=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),Wy=".^",Yy=".*",Xy=(()=>{class s{constructor(t){this.A=t,this.nu=new csRegExp(`${Wy}`)}setExcludeUrlForSessionReplay(t){try{this.nu=new csRegExp(t)}catch{U.warn(`excludeURLforReplay - invalid regex '${t}'`),this.nu=new csRegExp(`${Yy}`)}}im(){return this.nu.test(this.A.getAnonymizedUrl())?Ur.SessionReplay:Ur.None}isUrlExcludedForSessionReplay(){return this.im()===Ur.SessionReplay}getRequestParameters(){return{ex:this.im()}}}return s})(),Ky=["excludeURLforReplay"],Jy=(()=>{class s{constructor(t,e){this.Mi=t,this.E=e}init(){this.E.register(Ky,t=>{if(z(t))this.Mi.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),jr="_cs_inc",Qy=(()=>{class s{constructor(t,e){this.Ot=t,this.O=e}isForceIncluded(){return this.aR()||this.cR()}isForceReplayRecorded(){return this.lR(x.RECORDING_GLOBAL_SAMPLING)}aR(){return this.O.get(jr)!==null}lR(t){return this.O.get(jr)===t}cR(){return csString.prototype.indexOf.call(this.Ot.href,jr)>0}}return s})(),zs="_cs_optout",Zy=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.bt=i}get(){return this.f.cookielessTrackingEnabled?this.bt.getItem(zs):this.O.get(zs)}set(t){this.f.cookielessTrackingEnabled?this.bt.setItem(zs,t):this.O.set(zs,t,En)}}return s})(),ya="1",tE=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.ut=i}init(){!this.isActive()&&this.hR()&&this.activate()}isActive(){return this.ut.get()===ya}activate(){this.S.emitOptout(),this.ut.set(ya)}hR(){return csString.prototype.indexOf.call(this.Ot.href,zs)>0}}return s})(),eE=["optout"];var sE=(()=>{class s{constructor(t,e){this.E=t,this.ti=e}init(){this.E.register(eE,()=>{this.ti.activate()})}}return s})(),iE=(()=>{let s;return function(r){function t(e,i){let n=rE(e,i),a=nE(e,i);return n||a}r.select=t}(s||(s={})),s})();function rE(s,r){return csArray.prototype.filter.call(s,t=>t.exclusion===r)[0]}function nE(s,r){return csArray.prototype.sort.call(csArray.prototype.filter.call(s,t=>oE(t,r)),aE)[0]}function oE(s,r){return s.visitor&&s.visitor.appliedTrackingDraw===r}function aE(s,r){return r.visitor.visitsCount!==s.visitor.visitsCount?r.visitor.visitsCount-s.visitor.visitsCount:s.session?r.session?r.session.pageNumber-s.session.pageNumber:-1:1}var cE=(()=>{class s{constructor(t,e){this.E=t,this.St=e}init(){this.St.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var lE=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),hE=(()=>{class s extends Ut{constructor(t){super(),this.ou=t,this.as={}}register(t,e,i){for(let n of t){let a=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(n),l}catch(l){q.counters.commandMisuse.count(n),U.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Ge(l)?l.stack:l}`)}};this.as[n]={callback:a,configuration:i},this.as}}onStart(){this.dR(),this.pR()}onStop(){for(let t of this.ou)window[t]=[]}applyFromIntegration(t,e,i){this.rm(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.rm(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.fR(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}rm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}U.tryToExecute(i,()=>{if(this.as[t])return this.as[t].callback(...e)})()}fR(t,e,i){U.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.as[t])return this.as[t].callback(...e)})()}dR(){for(let t of this.ou)window[t].forEach(([e,...i])=>this.nm(e,i,!1))}pR(){for(let t of this.ou)window[t]={push:([e,...i])=>this.nm(e,i,!0)}}nm(t,e,i){var n,a;if(this.as[t]){if(((n=this.as[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((a=this.as[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.as[t].callback(...e)}catch(l){q.counters.commandError.count(t),U.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Ea="contentsquare.net",Sa=(()=>{let s;return function(r){r.Set="set",r.Remove="remove"}(s||(s={})),s})(),uE=(()=>{class s{constructor(t,e,i,n,a,c){this.f=t,this.O=e,this.ke=i,this.om=n,this.am=a,this.cm=c,this.lm=Kt.None,this.au=!1,this.ei=[],this.si=[]}init(){this.lm=this.O.isSameSiteSupported()?Kt.None:Kt.NotSet,this.gR()}setStates(t,e){this.to=t,this.hm=e}start(t){this.hm.init(this.um(),(e,i)=>{let n=[this.to.get()];i&&csArray.prototype.push.call(n,e);let a=iE.select(n,this.f.lastTrackingDraw);this.au=!0,this.to.apply(a),t()}),this.dm=this.hm.openIframe()}setCookie(t,e,i){if(this.au){let n=this.lm,a=Xt.Yes,c={name:t,value:e,samesite:n,secure:a};i&&(c.expires=lt.toExpireDate(i).getTime()),this.mR(c)}}removeCookie(t){this.au&&this.yR(t)}yR(t){this.si=csArray.prototype.filter.call(this.si,e=>e!==t),this.ei=csArray.prototype.filter.call(this.ei,e=>e.name!==t),csArray.prototype.push.call(this.si,t),this.setBatchReadyCall()}mR(t){this.si=csArray.prototype.filter.call(this.si,e=>e!==t.name),this.ei=csArray.prototype.filter.call(this.ei,e=>e.name!==t.name),csArray.prototype.push.call(this.ei,t),this.setBatchReadyCall()}setBatchReadyCall(){this.ER()}ER(){if(this.ei.length>0){let t=this.pm(Sa.Set,this.ei);this.$a(t),this.ei=[]}if(this.si.length>0){let t=this.pm(Sa.Remove,this.si);this.$a(t),this.si=[]}}pm(t,e){return{command:t,cookies:e,domain:null,pid:this.f.projectId}}$a(t){var e;let i=`https://${this.um()}`;!((e=this.dm)===null||e===void 0)&&e.contentWindow&&this.dm.contentWindow.postMessage(t,i)}um(){return this.f.dualCollectionTagDomain&&this.f.dualCollectionTagDomain!==Ea?`cdnssl.${this.f.dualCollectionTagDomain}`:`csxd.${Ea}`}gR(){this.ke.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.om.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.am.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.cm.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.ke.onCookieToRemove(t=>{this.removeCookie(t)}),this.om.onCookieToRemove(t=>{this.removeCookie(t)}),this.am.onCookieToRemove(t=>{this.removeCookie(t)}),this.cm.onCookieToRemove(t=>{this.removeCookie(t)})}}return F([ar({wait:0,mode:"trailing"}),V("send xdframe-single-iframe batch")],s.prototype,"setBatchReadyCall",null),s})(),dE="1.2.0",pE=(()=>{class s{constructor(t,e){this.f=t,this.ve=e}init(t,e){this.lu=`https://${t}`,this.w=e}openIframe(){this.ve.onMessage(e=>{this.Ac(e)}),this.ve.onTimeout(()=>{this.bc()}),this.ve.start();let t=this.fm(this.lu);return this.ve.open(t)}Ac(t){if(this.Rc(t)){let e=t.data,i=!0;if(this.SR(t)){U.warn(`Error xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}if(!sn.isRawDomainState(e)){U.warn(`Unknown message format from xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}sn.isValid(e)||(U.warn(`Invalid xdframe single domain state: ${csJSON.stringify(t.data)} from ${t.origin}`),i=!1),this.ve.stop(),this.w(i?cc.fromRaw(e):{},i)}}bc(){U.warn(`xdframe single domain: timeout: ${this.fm(this.lu)}`),this.ve.stop(),this.w({},!1)}Rc(t){return t.origin===this.lu&&Is(t.data)}SR(t){return!!t.data.error}fm(t){let e=this.f.projectId;return`${t}/uxa/xdframe-single-domain-${dE}.html?pid=${e}`}}return s})();var va=(()=>{class s{constructor(t,e,i,n,a){this.f=t,this.I=e,this.R=i,this.gm=n,this.ii=a}getRequestParameters(){var t;let e={...Cn(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.I.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.gm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.gm.getSubProjectId()}`),this.vR(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}vR(t){if(!this.ii)return;let e=this.ii.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),fE=(()=>{class s{constructor(t,e){this.E=t,this.ls=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.ls.updateDynamicFields("emitDebugEvents",t)})}}return s})();function _a(s,r,t){if(!Q(r)&&!Q(t))return s.href;let e=Q(r)?Kc(r):s.pathname,i=Q(t)?Jc(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Kc(s){return kt(s,"/")?s:`/${s}`}function Jc(s){return kt(s,"?")||s===""?s:`?${s}`}var Hr=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),gE=(()=>{class s{constructor(t,e){this.Ot=t,this.tt=e,this._R=10}overridePath(t,e){if(t===""){this.Cr=void 0;return}let i=this.mm(e);i&&(this.hu=i),this.Cr=e?this.ym(t,e):t}overrideQuery(t,e){let i=this.mm(e);i&&(this.du=i),this.eo=e?this.ym(t,e):t}computeOverriddenUrl(t){return this.wR(t)?this.getAnonymizedUrl():t}TR(t){return(typeof t=="string"||typeof t=="number")&&t in Hr}wR(t){let e=this.Ro(this.Ot.href);return this.Ro(t)===e}Ro(t){return Wa(t,"/")?csString.prototype.slice.call(t,0,-1):t}mm(t){return Q(t==null?void 0:t.lifespan)&&this.TR(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}AR(){return this.hu&&this.hu in Hr}bR(){return this.du&&this.du in Hr}cleanupOverrideLifespan(){this.AR()&&(this.Cr=void 0,this.hu=void 0),this.bR()&&(this.eo=void 0,this.du=void 0)}getAnonymizedUrl(){let t=_a(this.Ot,this.Cr,this.eo);return this.tt.anonymizeUrl(t)}getUrl(){return _a(this.Ot,this.Cr,this.eo)}getAnonymizedPathAndQuery(){let t=Q(this.Cr)?Kc(this.Cr):this.Ot.pathname,e=Q(this.eo)?Jc(this.eo):this.Ot.search;return this.tt.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}ym(t,e){return this.RR(e)?this.CR(t):this.IR(e)?this.PR(t):t}IR(t){return!!t.decodeURI}PR(t){return this.Em(t,1,!1)}RR(t){return!!t.decodeURIDeep}CR(t){return this.Em(t,this._R,!0)}Em(t,e,i){let n=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&U.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),jn=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),mE=(()=>{class s extends jn{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:$.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),Js="|iframe|",yE=(()=>{class s extends jn{constructor(t,e,i,n){super(),this.NR=t,this.MR=e,this.kR=i,this.DR=n}emitIframeEvent(t,e,i){if(this.xR(e)&&t===null){U.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case yt.ChildLogMessage:this.LR(i);break;case yt.AnalysisEvent:{let n=i,a=this.NR.transformEvent(t,n);a.isUserEvent?this.VR(a.event):this.UR(a.event);break}case yt.RecordingEvent:{let n=i,a=this.DR.transformEvents(t,n);if(a.events.length===0)return;a.containsUserEvent?this.jR(a.events):this.HR(a.events);break}case yt.JavascriptError:this.BR(i);break;case yt.ApiError:this.FR(i);break;case yt.DetailedApiError:this.$R(i);break;case yt.CustomError:this.zR(i);break;case yt.EmerchandisingMessage:{let n=this.kR.transformEvent(t,i);this.GR(n);break}case yt.Commands:{let n=this.MR.transformEvent(t,i);this.qR(n);break}case yt.IntegrationCallback:this.WR(i);break;case yt.StaticResource:this.YR(i);break;case yt.TrackingContextRequestMessage:this.XR(i);break;default:U.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}xR(t){let e=[yt.AnalysisEvent,yt.RecordingEvent,yt.EmerchandisingMessage,yt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}LR(t){let{message:e,errorCode:i,level:n}=t;switch(n){case rt.debug:U.debug(e,i);break;case rt.warn:U.warn(e,!0,i);break;case rt.implementation:U.implementation(e,i);break;case rt.error:U.error(e,i);break;case rt.critical:U.critical(e,i);break}}VR(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}UR(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}jR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}HR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}BR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}FR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}$R(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}GR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}qR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}WR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}YR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}XR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}zR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),EE=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),Qc=["setCustomVariable"],SE=(()=>{class s{constructor(t,e){this.E=t,this.Et=e}init(){this.E.register(Qc,(t,e,i,n)=>{this.Et.set(t,e,i,n)})}onAfterArtificialPageView(){this.Et.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.Et.deleteNextPageOnlyCustomVariables()}onOptout(){this.Et.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.Et.removeCustomVariablesSession(),this.Et.removeCustomVariablesPage()}}return s})(),wa=512,Ta=255,Br={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},vE=(()=>{class s{constructor(t,e){this.M=t,this.ut=e,this.Wt={},this.je={}}set(t,e,i,n){let a,c;if((qt(t)||z(t))&&Number(t)>0&&bt(e)&&bt(i)&&!ze(e)&&!ze(i)&&this.KR(n)){let l=this.M.anonymizePII(csString(e)),u=this.M.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,wa),csString.prototype.slice.call(u,0,Ta)],c=i!=="",!Q(n)||csArray.prototype.indexOf.call(Br.SESSION,n)>=0){let y=this.getCustomVariablesSession();c?y[t]=a:delete y[t],this.setCustomVariableSession(y)}(!Q(n)||csArray.prototype.indexOf.call(Br.PAGE,n)>=0)&&(c?this.Wt[t]=a:delete this.Wt[t]),Q(n)&&csArray.prototype.indexOf.call(Br.NEXT_PAGE_ONLY,n)>=0&&(c?this.je[t]=a:delete this.je[t])}else throw new Error(`Command misuse: ${Qc[0]}`)}getCustomVariablesSession(){let t=this.ut.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Is(e)?e:{}}setCustomVariableSession(t){this.ut.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.ut.remove()}removeCustomVariablesPage(){this.Wt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.je)this.je.hasOwnProperty(i)&&(this.Wt[i]=this.je[i]);for(let i in this.Wt)this.Wt.hasOwnProperty(i)&&(t[i]=this.Wt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Sm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.je).length>0)for(let t in this.je)this.je[t]===this.Wt[t]&&(delete this.Wt[t],delete this.je[t])}hasCustomVariablesPage(){return this.Wt&&!$r(this.Wt)}getCustomVariablesPage(){return this.Sm(this.Wt)}vm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],a=n[0],c=n[1];(!bh(i,1,20)||a.length>wa||c.length>Ta)&&delete t[e]}}Sm(t){this.vm(t);let e=$r(t)?[]:t;return window.csJSON.stringify(e)}KR(t){return!Q(t)||z(t)||qt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.je)this.je.hasOwnProperty(e)&&(this.Wt[e]=this.je[e]);for(let e in this.Wt)this.Wt.hasOwnProperty(e)&&(t[e]=this.Wt[e]);return this.vm(t),t}}return s})(),ee="_cs_id",_E=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.X=i}onCookieToSet(t){this.fi=t}onCookieToRemove(t){this.gi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.X.getItem(ee):t=this.O.get(ee),t?(ic(t)||U.warn(`Invalid visitor string: ${t}`),sc(t)):null}set(t){var e;let i=kd(t);if(this.f.cookielessTrackingEnabled)this.X.setItem(ee,i);else{let n=new csDate(t.expires);this.O.set(ee,i,n),(e=this.fi)===null||e===void 0||e.call(this,ee,i,n)}}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ee):(this.O.delete(ee),(t=this.gi)===null||t===void 0||t.call(this,ee))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.O.delete(ee,er.CURRENT_DOMAIN):this.O.delete(ee,this.O.getRootDomain()),this.set(t))}}return s})(),wE=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],TE=1024,AE=1024,bE=(()=>{class s{constructor(t,e){this.pt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=pt(t),n={isNodeSensitive(a){return D.isMaskedElement(a)||D.isMaskedElementChild(a)},isAttributeSensitive(a,c){return D.isMaskedAttribute(a,c)},allWhitelistedAttributes:Ga(this.f.whitelistedAttributes),attributeIgnoreTokens:wE,useAnonymization:e,attrMaxLength:AE,hierarchyMaxLength:TE};return this.pt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=pt(t);return this.pt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=pt(t),{path:i,firstAnchorParent:n}=this.pt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),a=this.JR(n)?n.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=pt(t);return this.pt.isValidElement(e)}getElementPath(t){return this.pt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}JR(t){var e;return t!==null&&t.hasAttribute("href")&&!Qr((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),RE=(()=>{class s{constructor(t,e){this.Q=t,this.QR=e}transformEvent(t,e){this.ZR(t,e.event);let i=this.Q.getElementPath(t);return this.t0(i,e.event),e}ZR(t,e){if(Qp(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+ut.windowOffsetX()),e.y=Math.round(i.top+e.y+ut.windowOffsetY())}}t0(t,e){wc(e)&&(e.tgt=`${t}${Js}${e.tgt}`),Kp(e)&&(e.tgtHM=`${t}${Js}${e.tgtHM}`,this.QR||(e.tgtHMH=Nc(e.tgtHM))),Jp(e)&&(e.tgtLk=`${t}${Js}${e.tgtLk}`)}}return s})(),CE=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){let i=this.Q.getElementPath(t);return{iframePath:e.iframePath?`${i}${Js}${e.iframePath}`:i,commands:e.commands}}}return s})(),IE=(()=>{class s{constructor(t){this.Q=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Q.getElementPath(t),n=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${Js}${a.targetPath}`}));return{...e,products:n}}}return s})(),PE=(()=>{class s{constructor(){this.e0={clientX:2,clientY:3},this.s0={clientX:1,clientY:2},this.i0=[M.POINTER_DOWN,M.POINTER_MOVE,M.POINTER_UP],this.r0=[M.TOUCH_START,M.TOUCH_MOVE,M.TOUCH_END]}transformEvents(t,e){if(!dt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==M.VISIBILITY_CHANGE),e.events.length===0||(U.warn(`IframeRecordingEventsTransformer received event ${yt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=et(t),n=null;csArray.prototype.some.call(e.events,c=>this._m(c)||this.wm(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this._m(c)?this.n0(n,c):this.wm(c)&&this.o0(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}o0(t,e){this.Tm(this.s0,t,e)}n0(t,e){this.Tm(this.e0,t,e)}Tm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}_m(t){return csArray.prototype.indexOf.call(this.i0,t.type)!==-1}wm(t){return csArray.prototype.indexOf.call(this.r0,t.type)!==-1}}return s})(),OE=(()=>{class s{constructor(t){this.pu=t}start(){this.pu.onEvent(t=>this.K(t)),this.pu.start()}stop(){this.pu.stop()}K(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;U.warn(e)}}return s})(),NE=(()=>{class s{constructor(){this.$t={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Nt(this.$t)}stop(){Mt(this.$t)}onEvent(t){this.L=t}a0(t){if(!t)return!1;let e=t.disposition;return z(t.sourceFile)&&csArray.prototype.some.call(s.c0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.a0(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.c0=["contentsquare","cdnssl.clicktale.net"],F([V("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),ME=(()=>{class s{init(){this.Am=new OE(new NE),this.Am.start()}onOptout(){this.Am.stop()}}return s})();var{toString:pS}=Object.prototype;function Zc(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let a=s.apply(this,e);return t.cache=n.set(i,a)||n,a};return t.cache=new(Zc.Cache||Map),t}Zc.Cache=Map;var{hasOwnProperty:fS}=Object.prototype;var tl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),kE=(()=>{class s extends tl{constructor(t,e,i){super(t),this.configuration=t,this.oo=e,this.S=i,this.O0=x.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Lm=t,this.ao=void 0,this.N0()}init(t){this.M0();let e=lt.get(Yt);e!==null&&ir(e)?t(this.canCollect(oc(e))):this.refreshQuota(i=>{t(i!==x.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==x.QUOTA_REACHED}computeInitialCollectState(t){return this.ao?(this.S.emitCollectStateChange(this.ao,this.configuration.malkaEtrEnabled?Lt.ETR_ON:Lt.ETR_OFF),this.ao):(U.warn("Quota file error computeInitialCollectState() called before quota answered"),x.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===x.QUOTA_REACHED?x.QUOTA_REACHED:!ni.isRecordingSupported()&&this.isReplayRecorded(t)?x.ANALYTICS_ONLY:t.collectState===x.RECORDING_RULES_TARGETING?x.RECORDING_RULES_TARGETING:t.collectState===x.ANALYTICS_ONLY_RULES_TARGETING?x.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===x.RECORDING_GLOBAL_SAMPLING?x.RECORDING_GLOBAL_SAMPLING:x.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===x.RECORDING_GLOBAL_SAMPLING||t.collectState===x.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.ao||x.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return x.ANALYTICS_ONLY}co(t){this.ao=t,this.Lm&&this.Lm(t)}M0(){this.oo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.oo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.oo.onLoad(t=>this.quotaFileHandler(t))}N0(){this.oo.isInProgress()||this.oo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.k0(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;U.warn(e),this.co(this.O0)}k0(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&as.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ni.isRecordingSupported()?this.co(x.RECORDING_GLOBAL_SAMPLING):this.co(x.ANALYTICS_ONLY):e&&!i?this.co(x.ANALYTICS_ONLY):this.co(x.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return x.ANALYTICS_ONLY}}return F([V("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),F([V("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),DE=(()=>{class s extends tl{constructor(t,e,i,n,a){super(t),this.configuration=t,this.S=e,this.Zh=i,this.A=n,this.wu=a,this.Tu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Tu=!0,this.wu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===x.QUOTA_REACHED||t.collectState===x.RECORDING_RULES_TARGETING||t.collectState===x.RECORDING_TEMPORARILY)&&(t.collectState=x.ANALYTICS_ONLY),t}computeInitialCollectState(){return He.isReplayConsentNeeded(this.configuration)?x.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Fa()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Fa()}Fa(){if(!ni.isRecordingSupported())return x.ANALYTICS_ONLY;let t=x.ANALYTICS_ONLY,e=Lt.ETR_OFF;return as.percentage()<this.configuration.replayRecordingRate||this.Zh.isForceReplayRecorded()?t=x.RECORDING_GLOBAL_SAMPLING:this.Tu&&this.wu.evaluateUrl(this.A.getAnonymizedUrl())&&(t=x.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Lt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!ni.isRecordingSupported())return x.ANALYTICS_ONLY;if(He.isRecordingBlockedByConsent(t))return t.collectState===x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:x.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===x.RECORDING_GLOBAL_SAMPLING)return x.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Lt.ETR_ON:Lt.ETR_OFF;return this.Tu&&this.wu.evaluateUrl(this.A.getAnonymizedUrl())?(this.S.emitCollectStateChange(x.RECORDING_URL_SAMPLING,e),x.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(x.ANALYTICS_ONLY,e),x.ANALYTICS_ONLY)}isReplayRecorded(t){return He.isRecordingBlockedByConsent(t)?!1:t.collectState===x.RECORDING_TEMPORARILY||t.collectState===x.RECORDING_GLOBAL_SAMPLING||t.collectState===x.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return x.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return x.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function xE(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function LE(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var VE=(()=>{class s{constructor(){this.D0={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ps={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:xE(),Attributes:LE()};this.ps=D.getComputedSelectorSettings(t,this.ps)}init(){this.x0()}setMaskedElementSettingsFromCommand(t){if(t=D.sanitizeSelectorUserInput(t),!D.isSelectorUserInput(t))throw new Error(`Command misuse: ${Yc[0]}`);this.Au(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Au(e)}getMaskedElementSettings(t){return t?this.Vm(this.D0):this.ps}x0(){var t,e,i,n,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{z(u.attr)&&z(u.rule)&&l.Attributes.push({selector:u.rule,attrName:u.attr})}),this.Au(l)}Au(t){this.ps=this.Vm(t)}Vm(t){return D.getComputedSelectorSettings(t,this.ps)}}return s})();var UE=(()=>{class s{constructor(t,e){this.tt=t,this.vt=e,this.bu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.vt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.bu=!0}disableRemoveQueryString(){this.bu=!1}get(){let t=this.bu?this.tt.removeQueryString(this.Um()):this.Um();return this.tt.anonymizeUrl(t,{maskingPatterns:this.vt.getUrlMaskingPatterns()})}Um(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),jE=60*1e3,HE=30*1e3,BE=(()=>{class s{constructor(t,e){this.R=t,this.I=e,this.Ru=!1,this.L0=or(()=>this.R.refreshSession(),HE)}onSessionExpired(t){this.V0=t}isSessionValid(){return this.Ru?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.I.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.I.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.L0():this.U0()&&(this.jm=O.now(),this.renewSession())}renewSession(){this.Ru=!0,this.V0(),this.Ru=!1}U0(){return!document.hidden&&(!Q(this.jm)||O.now()-this.jm>jE)}}return s})();var FE=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,$E="$1CS_ANONYMIZED_NAME",zE=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],a=this.M.anonymizePII(t);if(a=this.M.anonymizeJwt(a),e.maskNames){let u=a;a=this.hn(a),a!==u&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.X0(a,i);if(c!==a)return q.counters.redactedPII.count("url"),c;let l=this.K0(a,n);return l!==a&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.xu(t);return i!==""?`${e}?`:e}xu(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}X0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.xu(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.J0(a,c);if(l!==null)return`${l}${n}`}return t}J0(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let a=t[n];if(n>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[n].key;if(this.Gm(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(a===c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}K0(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.xu(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.Q0(a,c);return`${csArray.prototype.join.call(a,"/")}${n}`}Q0(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let u=t[l],y=e[n].key;if(this.Gm(y)&&l>=c){let p=e[n].value;csArray.prototype.push.call(i,u.length>0?p:""),n++,n===e.length&&(n=0);continue}if(u===y){csArray.prototype.push.call(i,u),n++,n===e.length&&(n=0);continue}for(let p=0;p<n;p++){let E=l-n+p;i[E]=t[E]}n=0,csArray.prototype.push.call(i,u)}for(let l=0;l<n;l++){let u=t.length-n+l;i[u]=t[u]}return i}Gm(t){return kt(t,Xc)}hn(t){return csString.prototype.replace.call(t,FE,$E)}}return s})(),GE=(()=>{class s{constructor(t,e,i,n,a,c){this.f=t,this.hi=e,this.us=i,this.N=n,this.S=a,this.X=c}initWithQuota(){if(!this.f.collectionEnabled){this.qm();return}let t=new Ip(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new kE(this.f,t,this.S),this._t.init(e=>{e?this.init():this.qm()})}Z0(){this.N.schedule(()=>{this.M=new di,this.tt=new zE(this.M),this.A=new gE(window.location,this.tt),this.O=new er(this.f,this.A,this.hi),this.O.init(),this.bt=new EE,this.E=new hE([lE.UXA]),this.J=new mE,this.lt=new VE,this.Tt=new $y(this.f,new Ly(this.f,this.O,this.bt),this.S)})}qm(){}init(){Ws.isSupported()&&Ws.setDigestSalt(this.f.projectId.toString());let t,e,i,n,a,c,l,u,y,p,E,m,v,C,I,S,_,P,N,A,j,tt,ct,jt,wt,T,k;this.Z0(),this.N.schedule(()=>{E=new Qy(window.location,this.O),new ME().init(),m=Wc.create(U.warn),p=new tc(m),this._t===void 0&&(this._t=new DE(this.f,this.S,E,this.A,new pc),this._t.init())}),this.N.schedule(()=>{t=new Oy(this.f,this.O,this.X),e=new ky(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new _E(this.f,this.O,this.X),n=new Iy(this.f,i,this.S,e),this.us.setContext(n,e)}),this.N.schedule(()=>{c=new xy(n,e,this.Tt),l=new lc(this.f,this.O,this.X),u=new Gy(window.location,l),y=new qy(u),I=new Dy(this.f,n,u),wt=new bE(ge,this.f),A=new RE(wt,this.f.isChild),j=new CE(wt),tt=new IE(wt),ct=new PE,jt=new yE(A,j,tt,ct),S=new cE(this.E,jt),_=new Xy(this.A),P=new Jy(_,this.E);let L=new hc(this.f,this.O,this.X);T=new vE(this.M,L),N=new SE(this.E,T);let H=new Nd(n,e,u,T,this.f);{let st=new Fd,Tt=new Bd(st,window.location);{a=new uE(this.f,this.O,t,i,l,L),a.init();let Ct=new pE(this.f,st);a.setStates(H,Ct)}}}),this.N.schedule(()=>{new Cy(this.f,n,u,I,c,v,a,E).compute(H=>{this.N.schedule(()=>{S.init();let st=new Fy(this.f,this.E,this.Tt,e,this.S),Tt=new Zy(this.f,this.O,this.bt),Ct=new tE(this.S,window.location,Tt),Ee=new sE(this.E,Ct),fs=new fE(this.E,this.f),Dt=new UE(this.tt,new Ey),Ht=new BE(e,n),ae,Ei,We,vt=new va(this.f,n,e,C),Bt=new va(this.f,n,e,C,Ei);H?(this.S.emitInitTracking(),new Ry(vt,Bt,m,n,e,Ht,Dt,this.S,this.E,S,this.f,Ee,Ct,st,this.Tt,this.M,wt,this.tt,this.A,fs,this.J,jt,T,N,_,P,this.N,p,this.O,this.bt,this._t,this.lt,We,ae).start()):new zy(this.S,this.E,S,Ee,Ct,y,st).start()})})})}}return s})(),is=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(_){let P=_.source,N=_.data;if(c(N)){let A=()=>{let j=n(t,N);E(j,()=>P.postMessage("csBundleLoaded",_.origin))};e=N.token,S(i.loadBundle),l(_.origin)&&A()}}};function n(_,P){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(_,"{version}",P.version),"{token}",P.token),"{domain}",P.domain)}function a(){return e}r.getToken=a;function c(_){return _&&_.type==="csBundleInjection"&&l(_.domain)&&y(_.version)&&u(_.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(_){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(_)||r.hjDomainRegex.test(_)}r.isAuthorizedDomain=l;function u(_){return/^[a-zA-Z0-9]+$/.test(_)}r.isAuthorizedToken=u;function y(_){return/^[a-zA-Z0-9\.]+$/.test(_)}r.isAuthorizedTagVersion=y;function p(){let _=window.opener||window.parent;return window!==_&&window.addEventListener}r.isActivable=p;function E(_,P){let N=document.createElement("script");N.type="text/javascript",N.async=!0,N.src=_,N.onload=P,N.charset="utf-8",document.head.appendChild(N)}r.addScript=E;function m(_){let P=document.createElement("link");P.rel="stylesheet",P.href=_,document.head.appendChild(P)}r.addStyle=m;function v(_){return`${_}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function C(){I(i.loadBundle)}r.waitForBundleInjection=C;function I(_){window.addEventListener("message",_,!1)}r.listen=I;function S(_){window.removeEventListener("message",_,!1)}r.removeListener=S}(s||(s={})),s})(),Aa="_hp_ved",qE=18e5,WE="/js/ved.js",YE="/css/ved.css",XE="/js/ved.css",KE=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),JE=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Fr=(()=>{let s;return function(r){let t=!1,e;function i(E){return e+E}function n(){let E=[i(YE),i(XE)];csArray.prototype.forEach.call(E,m=>{is.addStyle(m)})}function a(E){let m=new csRegExp("(^|;)[ ]*"+E+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(E,m,v){let C=encodeURIComponent(E)+"="+encodeURIComponent(m),I=new csDate;I.setTime(I.getTime()+v);let S=C+"; expires="+I.toUTCString()+"; path=/";document.cookie=S}function l(){c(Aa,"on",qE)}function u(){return a(Aa)==="on"}r.isVLCookieEnabled=u;function y(E){window.heapV=Object.assign({},window.heap,{source:E==null?void 0:E.source,uri:e,loadArgs:E==null?void 0:E.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=y;function p(E,m){var v;if(e=E,m){let C={type:KE.StatusUpdate,value:JE.ReceivedInitMessage},I={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(C,I)}t||(t=!0,l(),y(m),window.heapV&&(is.addScript(i(WE)),n()))}r.init=p}(s||(s={})),s})(),QE=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,is.hjDomainRegex],a,c,l,u={initHeapVisualLabeler(A){var j;A.origin===l&&((j=A.data)===null||j===void 0?void 0:j.message)==="init"&&A.source&&(Fr.init(l,A),_(u.initHeapVisualLabeler))},ping(A){typeof A.data=="string"&&A.data==="ping"&&E(A.origin)&&(c=A.origin,a=is.hjDomainRegex.test(A.origin)?i:A.origin,_(u.ping),S(u.insertMessageScript),m(is.addCacheBusting("utils.js")))},insertMessageScript:P(A=>{typeof A.data=="string"&&A.data!=="ping"&&(_(u.insertMessageScript),m(A.data))})};function y(){return is.getToken()}r.getToken=y;function p(){return window!==t&&window.addEventListener}r.isActivable=p;function E(A){return csArray.prototype.some.call(n,j=>j.test(A))}r.isAuthorizedDomain=E;function m(A,j){let tt=document.createElement("script");tt.type="text/javascript",tt.async=!0;let ct=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");tt.src=`${ct}/${e}/${A}`,tt.onload=j,tt.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(tt),v(A)}function v(A){csString.prototype.includes.call(A,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(A,"&mode=")[1])}function C(){S(u.ping),is.waitForBundleInjection()}r.waitForConnection=C;function I(A){l=A,S(u.initHeapVisualLabeler),Fr.isVLCookieEnabled()&&Fr.init(l)}r.waitForHeapVisualLabeler=I;function S(A){window.addEventListener("message",A,!1)}r.listen=S;function _(A){window.removeEventListener("message",A,!1)}r.removeListener=_;function P(A){return function(j){j.origin===c&&A(j)}}r.secureListener=P;function N(A){c&&t.postMessage(A,c)}r.post=N}(s||(s={})),s})();var Li=window.CSFrameCommunication||QE;var ZE=(()=>{class s extends jn{constructor(t){super(),this.N=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.N.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.N.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){U.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return F([Rt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var tS=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(qt(S))return S}catch{U.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(S,_){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(S,csJSON.stringify(_))}r.identify=n;function a(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=a;function c(S){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(S))}r.addUserProperties=c;function l(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}r.sendAnalysisEvent=l;function u(S){if(window.CSJavascriptBridge.sendSREvent)for(let _ of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(_))}r.sendSREvent=u;function y(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}r.sendLog=y;function p(){window.CSJavascriptBridge.optIn()}r.sendOptIn=p;function E(){window.CSJavascriptBridge.optOut()}r.sendOptOut=E;function m(S,_){window.CSJavascriptBridge.sendDynamicVar(S,_)}r.sendDynamicVariable=m;function v(S,_,P){window.CSJavascriptBridge.sendTransaction(S,_,P)}r.sendTransaction=v;function C(S,_){if(window.CSJavascriptBridge.sendAssets){let P=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(P,_||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,P=>P.assetId))}r.sendAssets=C;function I(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}r.sendNativeSREvent=I}(s||(s={})),s})();var eS=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),sS=(()=>{class s{constructor(t,e,i){this.f=t,this.wt=e,this.us=i}start(){var t,e,i,n,a;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new eS,l=new Gc(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),u=new bd(this.wt,this.f);u.init();let y=new Cd(this.f,u);if(this.wt.isTopWindowTracker()&&y.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&U.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){U.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Td();let E=new ZE(l),m=new GE(this.f,u,this.us,l,E,c);this.f.isQuotaEnabled()?m.initWithQuota():m.init()}let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(E){return D.isMaskedElement(E)||D.isMaskedElementChild(E)},isAttributeSensitive(E,m){return D.isMaskedAttribute(E,m)},getSensitiveAttributes(E){return ka(E.attributes,m=>D.isMaskedAttribute(E,m.name))}},Console:{warn(E){p&&console.warn("cs.tracking.warning",E)},error(E){p&&console.error("cs.tracking.error",E)}},Version:Xa},window.CSFrameCommunication||(window.CSFrameCommunication=Li,Li.isActivable()&&Li.waitForConnection(),this.f.isCsCrosswritingHeap()&&Li.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return F([Rt("main.start"),V("main.start")],s.prototype,"start",null),s})(),iS=(()=>{class s{constructor(){}send(t,e,i=rt.warn){let n={message:t,errorCode:e,level:i};tS.sendLog(n)}}return s})();var rS=(()=>{class s{constructor(t,e,i){this.W=t,this.M=e,this.tI=i,this.kt=[],this.eI=Cn().v}flush(){this.kt.length!==0&&(this.W.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.tI,v:this.eI}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,F([Nh(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function nS(s,r){let t=s.validationRate/10,e=as.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let a=Wc.create(U.warn,r.isTopWindowTracker()),l=new tc(a).create(s.getMetricsUri(),!0),u=new di,y=new rS(l,u,s.projectId);q.setService(y)}catch(a){U.warn(`Error initializing metrics: ${a.message}`)}}function oS(){var s;Bh();let r=new Wu(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new Yu(window,r);t.init();let e=new Ed;if(Ch(U),Sd(),U.computeIsActive(r.validationRate),t.isTopWindowTracker()){let a=new pd(r,e);U.setStrategy(a)}else if(t.isInWebViewContext()){let n=new iS;U.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=hs(window,"MutationObserver")),Iu(),nS(r,t),new sS(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{vd(oS)}catch{}});})();

// signature-e87012d693bcb9a19236ca474e7b7f1bc886e8533fc8cf09df6b894b9318093f