"use strict";(self.webpackChunklivecommerce_widgets=self.webpackChunklivecommerce_widgets||[]).push([[625],{625:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});i(4078),i(8581);var n=i(9686),o=i(1892),s=i.n(o),a=i(8765),r={insert:"head",singleton:!1};s()(a.Z,r);a.Z.locals;var l=i(5175);const c=i.p+"27cf00f8a548649918a59037231567a2.svg";const d=i.p+"2e4ff163292c124fefed8f1e3fe08cd7.svg";const h=i.p+"aae01ce5e85559210f1db97609d411ea.svg";var A=i(9101),p=i(4662),g=i(5945);i(911);const u=i(6659);i(2559);const C=new URLSearchParams(window.location.search).get("debugBambuser"),v="baas-player:";class f extends u{constructor(e){let{eventId:t,node:i}=e;super(),this._eventId=t,this._iframe=this._createIframe(),this._setupPlayerMessageListeners(),this.currentTime=0,i.appendChild(this._iframe)}_createIframe(){const e=document.createElement("iframe");return e.setAttribute("src",(e=>{let t="https://lcx-player.bambuser.com/default";try{const e=window.localStorage.getItem("bambuserPlayerBaseURLOverride");null!=e&&e.match(/^https?:\/\//)&&(t=e)}catch(e){C&&console.log("Could not read the saved configuration",e)}t.endsWith("/")||(t+="/"),t.startsWith("//")&&(t=window.location.protocol+t);const i=new URLSearchParams({eventId:e,deferReactAppInit:!0,withBaaSPlayerPreloading:!0,autoplay:!0,withStatePreloading:!0});return"".concat(t,"?").concat(i.toString())})(this._eventId)),e.setAttribute("frameborder",0),e.setAttribute("allowTransparency",!0),e.setAttribute("allow","fullscreen; autoplay;"),e.setAttribute("title","Live video shopping"),e.setAttribute("width","100%"),e.setAttribute("height","100%"),e}_onMessage(e){if(this._iframe.contentWindow===e.source)try{const{eventName:t,data:i}=e.data||{};if(null==t||!t.startsWith(v))return void(C&&console.log("Event name is not supported",t));C&&console.log("Event received from player",t,i);const n=t.replace(v,"");"timeupdate"===n&&(this.currentTime=null==i?void 0:i.currentTime),this.emit(n,i)}catch(e){C&&console.log("Error parsing message from player",e)}}_setupPlayerMessageListeners(){this._boundOnMessageListener=this._onMessage.bind(this),window.addEventListener("message",this._boundOnMessageListener)}set scaleMode(e){this._iframe.contentWindow.postMessage({eventName:"widgets:setScaleMode",data:e},"*")}pause(){this._iframe.contentWindow.postMessage({eventName:"widgets:pause"},"*")}addEventListener(){super.addListener(...arguments)}destroy(){this._boundOnMessageListener&&(window.removeEventListener("message",this._boundOnMessageListener),this._boundOnMessageListener=null),super.removeAllListeners(),this._eventId=null,this._iframe.remove(),this._iframe=null}}const y=1e4;class b extends n.default.PureComponent{constructor(){super(...arguments),this.state={broadcastOrientation:void 0,hasError:!1,presentCallToAction:!1,isPlaying:!1,canShowUI:!1},this._playerRef=n.default.createRef(),this.onClickPlay=this.onClickPlay.bind(this),this.onClickClose=this.onClickClose.bind(this),this.onClickCondense=this.onClickCondense.bind(this),this.onKeyDownPlay=this.onKeyDownPlay.bind(this),this.onKeyDownCondense=this.onKeyDownCondense.bind(this),this.onKeyDownClose=this.onKeyDownClose.bind(this),this._playerTimeout=null}componentDidMount(){this.checkShouldPlay()}componentDidUpdate(e){!this.state.hasError||e.previewResourceUri===this.props.previewResourceUri&&e.showId===this.props.showId&&e.isLive===this.props.isLive&&e.shouldUseLightWeightPlayer===this.props.shouldUseLightWeightPlayer&&e.widgetId===this.props.widgetId||this.setState({hasError:!1}),this.checkShouldPlay(),this.props.isCondensed&&!e.isCondensed&&this.cleanupPlayer()}componentWillUnmount(){this.cleanupPlayer()}checkShouldPlay(){const{isLive:e,previewResourceUri:t,showId:i,shouldUseLightWeightPlayer:n,isCondensed:o,isVisible:s}=this.props,{presentCallToAction:a}=this.state;if(!s)return;const{isPlaying:r}=this.state;e?!t||o||r?this.setupFadeTimer():(this.setState({isPlaying:!0}),this.playBroadcast(t)):!n||o||r||a||(this.setState({isPlaying:!0}),this.playShow(i))}cleanupPlayer(){var e,t,i,n;this._player&&this._playerRef.current&&(delete this._player._listeners,null===(e=(t=this._player).removeAllListeners)||void 0===e||e.call(t),this._player.pause(),null===(i=(n=this._player).destroy)||void 0===i||i.call(n),this._currentResourceUri=null,this._player=null,this.setState({broadcastOrientation:void 0,canShowUI:!1}))}setupFadeTimer(){const{previewDuration:e=y}=this.props;this.clearPlaybackTimer(),0!==e&&(this._playerTimeout=setTimeout((()=>{this._player&&(this._player.pause(),this.setState({isPlaying:!1})),this.setState({presentCallToAction:!0}),this.clearPlaybackTimer()}),e))}clearPlaybackTimer(){this._playerTimeout&&window.clearTimeout(this._playerTimeout),this._playerTimeout=null}playShow(e){const t=this._playerRef.current;if(!t)return;this.cleanupPlayer(),this._player=new f({eventId:e,node:t}),this._player.addEventListener("error",(i=>{this.props.showDebug&&console.error("Couldn't launch player in FAB for showId: ".concat(e),i),t.style.opacity=0,this.clearPlaybackTimer(),this.cleanupPlayer(),this.setState({hasError:!0})})),this._player.addEventListener("playing",(()=>{this.setState({canShowUI:!0}),t.style.opacity=1,this.setupFadeTimer(),A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PLAY,sourceApp:p.sc.FAB,orgId:this.props.orgId,widgetId:this.props.widgetId,showId:e,isLive:!1,isPlaying:!0,videoCurrentTime:0})})),this._player.addEventListener("pause",(()=>{this._playerTimeout&&(this.setState({presentCallToAction:!0}),this.clearPlaybackTimer()),A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PAUSE,sourceApp:p.sc.FAB,orgId:this.props.orgId,widgetId:this.props.widgetId,showId:e,isLive:!1,isPlaying:!1,videoCurrentTime:Math.floor(this._player.currentTime)})})),this._player.addEventListener("broadcastData",(e=>{let{width:t,height:i}=e;this._player.scaleMode="aspectFill",this.setState({broadcastOrientation:t>i?"LANDSCAPE":"PORTRAIT"})}));let i=!1;this._player.addEventListener("timeupdate",(t=>{let{currentTime:n}=t;!i&&n&&n>=3&&(A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PROGRESS,sourceApp:p.sc.FAB,orgId:this.props.orgId,widgetId:this.props.widgetId,showId:e,isLive:!1,isPlaying:this.state.isPlaying,videoCurrentTime:Math.floor(n)}),i=!0)}))}async playBroadcast(e){if(this._currentResourceUri!==e){await(0,l.ve)("https://cdn.bambuser.net/player/lib/bambuser-video-iframeapi/latest/bambuser-video-iframeapi.min.js","baas-sdk-player"),this.cleanupPlayer(),this.setState({canShowUI:!0});const t=this._playerRef.current;this._currentResourceUri=e,this._player=BambuserPlayer.create(t,e,{noFullscreen:!0,usePreviewAsPoster:!1}),this._player.controls=!1,this._player.muted=!0,this._player.scaleMode="aspectFill";let i=!1,n=!1,o=null;this._player.addEventListener("playing",(()=>{t.style.opacity=1,this.setupFadeTimer()})),this._player.addEventListener("pause",(()=>{t.style.opacity=0,this._playerTimeout&&(this.setState({presentCallToAction:!0}),this.clearPlaybackTimer()),A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PAUSE,sourceApp:p.sc.FAB,orgId:this.props.orgId,widgetId:this.props.widgetId,showId:this.props.showId,isLive:!0,isPlaying:!1,videoCurrentTime:Math.floor(this._player.currentTime)})})),this._player.addEventListener("canplay",(async()=>{if(!i){try{await this._player.play();const{showId:e,widgetId:t,orgId:i,isLive:n}=this.props,{isPlaying:o}=this.state;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PLAY,sourceApp:p.sc.FAB,orgId:i,widgetId:t,showId:e,isLive:n,isPlaying:o,videoCurrentTime:Math.floor(this._player.currentTime)})}catch(e){console.log(e),this.setupFadeTimer()}i=!0,o=this._player.currentTime}})),this._player.addEventListener("timeupdate",(()=>{if(!n&&o){if(this._player.currentTime-o>=3){const{showId:e,widgetId:t,orgId:i,isLive:o}=this.props,{isPlaying:s}=this.state;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_PROGRESS,sourceApp:p.sc.FAB,orgId:i,widgetId:t,showId:e,isLive:o,isPlaying:s,videoCurrentTime:Math.floor(this._player.currentTime)}),n=!0}}})),this._player.load()}}onClickPlay(){const{onClickPlay:e,isLive:t,showId:i,widgetId:n,orgId:o}=this.props,{isPlaying:s}=this.state;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_RESUME,sourceApp:p.sc.FAB,orgId:o,widgetId:n,showId:i,isLive:t,isPlaying:s,videoCurrentTime:this._player?Math.floor(this._player.currentTime):0}),A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,sourceApp:p.sc.FAB,eventType:p.R4.ON_INTERACTION,interactionType:p.R4.INTERACTION_TYPE.OPEN_PLAYER,orgId:o,widgetId:n,showId:i,isLive:t,isPlaying:s,videoCurrentTime:this._player?Math.floor(this._player.currentTime):0}),this.setState({presentCallToAction:!1}),"function"==typeof e&&(this.cleanupPlayer(),e())}onClickClose(e){e.stopPropagation();const{onClickClose:t,orgId:i,widgetId:n,showId:o,isCondensed:s,isLive:a}=this.props,{isPlaying:r}=this.state;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_INTERACTION,sourceApp:p.sc.FAB,interactionType:A.N.buildTrackingEventName(A.N.getModule(s,this._playerTimeout),p.R4.INTERACTION_TYPE.CLOSE),orgId:i,widgetId:n,showId:o,isLive:a,isPlaying:r,videoCurrentTime:Math.floor(this._player.currentTime)}),A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_STOP,sourceApp:p.sc.FAB,orgId:i,widgetId:n,showId:o,isLive:a,isPlaying:r,videoCurrentTime:Math.floor(this._player.currentTime)}),"function"==typeof t&&(this.cleanupPlayer(),t())}onClickCondense(e){e.stopPropagation();const{onClickCondense:t,orgId:i,widgetId:n,showId:o,isCondensed:s,isLive:a}=this.props;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_INTERACTION,interactionType:A.N.buildTrackingEventName(A.N.getModule(s,this._playerTimeout),p.R4.INTERACTION_TYPE.CONDENSE),orgId:i,widgetId:n,showId:o,isLive:a}),"function"==typeof t&&(this.cleanupPlayer(),t())}onKeyDownPlay(e){(0,g.Us)(e)&&this.onClickPlay()}onKeyDownCondense(e){(0,g.Us)(e)&&this.onClickCondense(e)}onKeyDownClose(e){(0,g.Us)(e)&&this.onClickClose(e)}render(){const{theme:e,image:t,isLive:i,isVisible:o,onClickClose:s,isCondensed:a,onClickCondense:r,previewOrientation:l,onKeyDownCondense:A,title:p,shouldUseLightWeightPlayer:g}=this.props,{canShowUI:u,presentCallToAction:C,broadcastOrientation:v,hasError:f}=this.state;if(f)return null;let y="floating-block";if(("LANDSCAPE"===l&&!v||"LANDSCAPE"===v)&&(y+=" landscape-orientation"),o&&(y+=" visible"),C&&(y+=" fader-active"),a){let t="floating-block-condensed";return o&&(t+=" visible"),n.default.createElement("div",{role:"button",tabIndex:"0",id:"floating-widget",className:t,onClick:this.onClickPlay,onKeyPress:this.onKeyDownPlay},n.default.createElement("div",{className:"floating-ball"},e.statusLabels.live))}const b=o&&(i||g),w=o&&!g,m=w||u,_="graphic".concat(w?"":" without-background");return n.default.createElement("div",{id:"floating-widget",className:y},n.default.createElement("div",{"aria-label":"Open player with show ".concat(p),className:_,onClick:this.onClickPlay,onKeyPress:this.onKeyDownPlay},w&&n.default.createElement("img",{alt:"",src:t}),n.default.createElement("div",{ref:this._playerRef,className:"player",style:{visibility:b?"visible":"hidden"}}),n.default.createElement("div",{className:"fader"}),i&&n.default.createElement("div",{className:"live-indicator","data-test-id":"fabLiveIndicator"},e.statusLabels.live),m&&(r||A)&&n.default.createElement("div",{role:"button",tabIndex:"0",className:"condense",onClick:this.onClickCondense,onKeyDown:this.onKeyDownCondense},n.default.createElement("img",{alt:"Condense widget",src:h})),m&&s&&n.default.createElement("div",{role:"button",tabIndex:"0","aria-label":"close",className:"close",onClick:this.onClickClose,onKeyDown:this.onKeyDownClose},n.default.createElement("img",{alt:"Close widget",src:d})),e.floatingWidget&&e.floatingWidget.continueWatchingLabel?n.default.createElement("div",{className:"cta-text","data-test-id":"fabCta",role:"button",tabIndex:"0",onClick:this.onClickPlay,onKeyDown:this.onKeyDownPlay,"aria-label":"Open player with show ".concat(p)},e.floatingWidget.continueWatchingLabel):n.default.createElement("div",{className:"cta","data-test-id":"fabCta",role:"button",tabIndex:"0",onClick:this.onClickPlay,onKeyDown:this.onKeyDownPlay,"aria-label":"Open player with show ".concat(p)},n.default.createElement("img",{alt:"Play show",src:c}))))}}const w=b;var m=i(1794),_=i(7857);function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},I.apply(this,arguments)}class T extends n.Component{constructor(e){super(e);const t=new URLSearchParams(window.location.search).get("debugBambuser");this.state={testGroup:e.bambuserLiveshoppingUid?(0,_.r3)(e.bambuserLiveshoppingUid):null,data:null,visible:!1,dismissed:!1,condensed:"true"===e.bambuserLiveshoppingFloatingCondensed,showDebug:t},this._loadedLiveOnce=!1,this.lastLoadStart=void 0,this.nextFetchTimeout=void 0,this._loadFloatingData=this._loadFloatingData.bind(this),this._announceFloatingWidgetPositionUpdate=this._announceFloatingWidgetPositionUpdate.bind(this),this._getFloatingWidgetPosition=this._getFloatingWidgetPosition.bind(this),this._navigateTo=this._navigateTo.bind(this),this._getTestSettingState=this._getTestSettingState.bind(this),A.N.testingData=this._getTestSettingState()}_getTestSettingState(){const{testGroup:e,data:t}=this.state,{testingEnabled:i}=t||{};return{testGroup:e,testingEnabled:i}}componentDidMount(){this._loadFloatingData();const{showDebug:e}=this.state,t=()=>{e&&console.log("Page became visible/focused; will refetch in at most 30 seconds"),this._loadFloatingData()};try{window.top.addEventListener("focus",(()=>{t()}))}catch(t){e&&console.log("Error adding focus event listener to top window",t)}document.addEventListener("visibilitychange",(()=>{"visible"===document.visibilityState&&t()})),window.addEventListener("message",(e=>{try{const{eventName:t,data:i}=JSON.parse(e.data);if(t!=="".concat(p.cC).concat(p.R4.CONFIGURE)||i.id!==this.props.id||window.parent!==e.source)return;this.setState({config:i.config})}catch(e){}}))}_getFloatingWidgetPosition(){const{position:e}=this.state.data||{};return e}_isEndedShowPlaylistAvailable(){const{enabled:e,endedShowPlaylist:t,isEnabledPlayEndedShows:i,show:n,version:o}=this.state.data||{},{playerVersion:s,allowArchivedPlayback:a=!0}=n||{},r=parseInt(o)||1;return e&&(r>1||i)&&(null==t?void 0:t.length)>0&&s>1&&a}_shouldPresentWidget(){const{data:e={},dismissed:t,testGroup:i}=this.state,{enabled:n,show:{isLive:o}={},testingEnabled:s}=e;return(!s||void 0===i||0!==i)&&(n&&(!!o||this._isEndedShowPlaylistAvailable())&&!t)}_updateWidgetVisibility(){const e=this._shouldPresentWidget();return this.state.visible!==e&&setTimeout((()=>this.setState({visible:e})),10),e}_resetCondensedState(){this.setState({condensed:!1}),(e=>{try{sessionStorage.removeItem(e)}catch(e){}})(p.ap.CONDENSED)}_loadFloatingData(){var e,t;if(this.lastLoadStart){const e=Date.now()-this.lastLoadStart;if(e<p.vj)return this.nextFetchTimeout&&clearTimeout(this.nextFetchTimeout),void(this.nextFetchTimeout=setTimeout(this._loadFloatingData,p.vj-e))}this.lastLoadStart=Date.now();const{backendBaseUrl:i,widgetId:n,themeId:o,channelLocale:s}=this.props,{dismissed:a,showDebug:r}=this.state,l=null===(e=this.state)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.backendBaseUrl;if(a)return;let c="".concat(l||i,"/floating/").concat(n);const d=[];o&&d.push("themeId=".concat(encodeURIComponent(o))),s&&d.push("locale=".concat(encodeURIComponent(s))),d.length&&(c+="?".concat(d.join("&")));fetch(c,{signal:(0,_.lU)(30).signal}).then((e=>{if(!e.ok){throw new Error("Error fetching floating widget data, status: ".concat(e.status))}return e.json()})).then((e=>{(0,m._)(e.theme,"FloatingActionButtonWidget"),this.setState({data:e},(()=>{const{position:e,show:t={},allowCondensedWidget:i=!0}=this.state.data||{};if(this._announceFloatingWidgetPositionUpdate(e),this._announceFloatingWidgetDisplay(this._updateWidgetVisibility()),A.N.testingData=this._getTestSettingState(),t.isLive&&!this._loadedLiveOnce){this._loadedLiveOnce=!0;const{showId:e,orgId:i}=t;A.N.track({actionOrigin:p.R4.ACTION_ORIGIN.FLOATING_ACTION_BUTTON,eventType:p.R4.ON_LIVE_RESPONSE,orgId:i,widgetId:n,showId:e})}const o=new Date,s=t.scheduledStartAt?new Date(t.scheduledStartAt):null,a=s?(s-o)/p.rP:null;let l=-1;!i&&this.state.condensed&&(r&&console.log("Condensed widget not allowed, uncondensing"),this._resetCondensedState()),t.isArchived?(r&&console.log("Show is archived. Checking again in 10 minutes"),l=10*p.VK,this.state.condensed&&(r&&console.log("Show is archived, uncondensing"),this._resetCondensedState())):t.isLive?(l=p.vj,r&&console.log("Show is live, checking again in a 30s")):null===a?(r&&console.log("No scheduled time to start, checking again in a minute"),l=p.VK):a>=-1?a<=1?(r&&console.log("Show scheduled to start in +/- an hour, checking again in 30s"),l=p.vj):(r&&console.log("Show scheduled to start in more than 1h, checking again in 10 minutes"),l=10*p.VK):(r&&console.log("Show scheduled to start in the past? Checking again in 10 minutes"),l=10*p.VK),l>0&&(r&&console.log("Waiting ".concat(l/1e3,"s...")),this.nextFetchTimeout=setTimeout(this._loadFloatingData,l))}))})).catch((e=>{r&&console.log(e,r)}))}_getEffectiveShowId(e,t){return e||!this._isEndedShowPlaylistAvailable()?t:this.state.data.endedShowPlaylist[0]}onClickPlay(){var e,t,i;const{id:n}=this.props,{show:{embedBaseUrl:o,showId:s,isLive:a}={},destinationUrl:r}=this.state.data||{},l=this._getEffectiveShowId(a,s),c=null!==(e=null===(t=this.state.config)||void 0===t||null===(i=t.fab)||void 0===i?void 0:i.redirection)&&void 0!==e?e:{},d=r||c.url;if((0,_.jv)(d))return void this._navigateTo({showId:l,isLive:a,redirection:{...c,url:d}});const h={showId:l,embedBaseUrl:o,id:n,hideWidget:!0,shouldCondense:a,isLive:a};this.setState({visible:!1,dismissed:!0}),this._announcePostMessage(p.R4.PLAY,h)}onClickClose(){const{id:e}=this.props,{show:{isLive:t,showId:i}={}}=this.state.data||{},n=this._getEffectiveShowId(t,i);this.setState({visible:!1,dismissed:!0}),this._announcePostMessage(p.R4.FLOATING.DISMISS,{id:e,showId:n})}onKeyDownClose(e){(0,g.Us)(e)&&onClickClose()}onClickCondense(){const{id:e}=this.props;this.setState({condensed:!0}),this._announcePostMessage(p.R4.FLOATING.CONDENSE,{id:e})}onKeydownCondense(e){(0,g.Us)(e)&&onClickCondense()}onClickUncondense(){const{id:e}=this.props;this.setState({condensed:!1}),this._announcePostMessage(p.R4.FLOATING.EXPAND,{id:e})}_navigateTo(){let{showId:e,redirection:t,isLive:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=this.props,o={id:n,showId:e,redirection:t,isLive:i};this._announcePostMessage(p.R4.FLOATING.NAVIGATE,o)}_announceFloatingWidgetPositionUpdate(e){const{id:t}=this.props,i={position:e,id:t};this._announcePostMessage(p.R4.FLOATING.REPOSITION,i)}_announceFloatingWidgetDisplay(e){var t,i;const{id:n}=this.props,{show:{isLive:o,showId:s}={}}=this.state.data||{},a=this._getEffectiveShowId(o,s),r={present:e,showStatus:this._getShowStatus(a),id:n,showId:a,allowDataRegionCookie:!(null===(t=this.state.data)||void 0===t||null===(i=t.general)||void 0===i||!i.allowDataRegionCookie)};this._announcePostMessage(p.R4.FLOATING.PRESENT,r)}_announcePostMessage(e,t){var i;const n=JSON.stringify({eventName:"".concat(p.cC).concat(e),data:t,state:null===(i=this.state)||void 0===i?void 0:i.data});window.parent.postMessage(n,"*")}_getShowId(){var e,t,i;const{isLive:n,showId:o}=(null===(e=this.state.data)||void 0===e?void 0:e.show)||{},s=this._isEndedShowPlaylistAvailable()&&(null===(t=this.state.data)||void 0===t||null===(i=t.endedShowPlaylist)||void 0===i?void 0:i[0]);return n?o:s||o}_getShowStatus(e){const{show:{showId:t,isLive:i,isArchived:n,scheduledStartAt:o}={}}=this.state.data||{};return e!==t?"recorded":i?"live":n?"recorded":o?"scheduled":"upcoming"}_shouldUseLightWeightPlayer(){var e;const{isLive:t}=(null===(e=this.state.data)||void 0===e?void 0:e.show)||{};return Boolean(!t&&this._isEndedShowPlaylistAvailable())}_allowCondense(){var e,t;return(null===(e=this.state)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.allowCondensedWidget)&&!this._shouldUseLightWeightPlayer()}render(){const{widgetId:e}=this.props,{condensed:t,showDebug:i,visible:o}=this.state,s=this.state.data?this.state.data.show:null,a=this.state.data?this.state.data.previewDuration:null,r=this._allowCondense();return s||this._isEndedShowPlaylistAvailable()?n.default.createElement(w,I({isCondensed:t,isVisible:o,widgetId:e,previewDuration:a,showDebug:i},s,{showId:this._getShowId(),shouldUseLightWeightPlayer:this._shouldUseLightWeightPlayer(),theme:m.Z,onClickPlay:t?this.onClickUncondense.bind(this):this.onClickPlay.bind(this),onKeyDownCondense:r&&this.onKeydownCondense.bind(this),onClickCondense:r&&this.onClickCondense.bind(this),onKeyDownClose:!r&&this.onKeyDownClose.bind(this),onClickClose:!r&&this.onClickClose.bind(this)})):null}}const N=T},8765:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(994),o=i.n(n),s=i(3476),a=i.n(s)()(o());a.push([e.id,'.floating-block-condensed{width:56px;height:56px;text-transform:var(--live-label-text-transform, uppercase);color:var(--live-label-text-color, #ffffff);background-color:var(--live-label-bg-color, #e12147);font-weight:var(--live-label-font-weight, normal);display:flex;justify-content:center;align-items:center;border-radius:50%;cursor:pointer;font-size:12px;transition:opacity .2s;opacity:0}.floating-block-condensed.visible{opacity:1}.floating-block-condensed.visible .floating-ball{text-align:center;max-width:60px;word-break:break-word;font-size:var(--live-label-font-size, 12px)}.floating-block{width:124px;height:226px;opacity:0;cursor:pointer}.floating-block.visible{opacity:1}.floating-block .graphic{cursor:pointer;display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:relative;background-color:var(--graphic-bg-color, #000);color:var(--graphic-text-color, #fff);border-radius:8px;overflow:hidden}.floating-block .graphic.without-background{background-color:rgba(0,0,0,0)}.floating-block .graphic>img{width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0}.floating-block .graphic img:not([src]){visibility:hidden}.floating-block .graphic .player{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity .5s;border-radius:var(--border-radius, 8px);overflow:hidden}.floating-block .graphic .fader{width:100%;height:100%;position:absolute;background-color:#000;opacity:0;top:0;left:0;transition:opacity .2s;border-radius:8px}.floating-block.fader-active .graphic .fader,.floating-block .graphic:has(.cta:focus) a .fader,.floating-block .graphic:has(.cta-text:focus) .fader{opacity:.65}.floating-block .graphic .close{position:absolute;top:0;right:0;width:24px;height:24px;padding:10px;z-index:1;transition:opacity .2s}.floating-block .graphic .condense{position:absolute;top:0;right:0;width:44px;height:44px;z-index:1;transition:opacity .2s}.floating-block .graphic .cta{opacity:0;width:44px;height:44px;z-index:1;transition:opacity .2s}.floating-block .graphic .cta-text{opacity:0;z-index:1;transition:opacity .2s;border:1px solid var(--graphic-border-color, #fff);text-align:center;padding:8px;margin-left:16px;margin-right:16px;font-size:12px}.floating-block .graphic .cta>img,.floating-block .graphic .close>img{width:100%;height:100%}.floating-block.fader-active .graphic .cta,.floating-block.fader-active .graphic .cta-text{opacity:1}.floating-block.fader-active .graphic .cta:hover,.floating-block.fader-active .graphic .cta-text:hover{opacity:.75}.floating-block .cta:focus,.floating-block .cta-text:focus{opacity:1}.floating-block .graphic .live-indicator{z-index:1;position:absolute;top:7px;left:7px;padding:7px 8px;font-family:var(--live-label-font-family, "Haas Grot", Helvetica, Arial, Verdana, Tahoma, sans-serif);font-size:var(--live-label-font-size, 12px);text-transform:var(--live-label-text-transform, uppercase);color:var(--live-label-text-color, #ffffff);background-color:var(--live-label-bg-color, #e12147);border-radius:var(--border-radius, 0);font-weight:var(--live-label-font-weight, normal)}.floating-block.landscape-orientation{height:124px;width:226px}.floating-block.landscape-orientation .graphic{align-items:flex-start}.floating-block.landscape-orientation .graphic .cta{margin-top:3em}.floating-block.landscape-orientation .graphic .cta-text{margin-top:3em;margin-right:8px;margin-left:8px;border:none}',"",{version:3,sources:["webpack://./src/components/FloatingActionButton/style.scss"],names:[],mappings:"AACA,0BACE,UAAA,CACA,WAAA,CACA,0DAAA,CACA,2CAAA,CACA,oDAAA,CACA,iDAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iBAAA,CACA,cAAA,CACA,cAAA,CACA,sBAAA,CACA,SAAA,CAEA,kCACE,SAAA,CAEA,iDACE,iBAAA,CACA,cAAA,CACA,qBAAA,CACA,2CAAA,CAKN,gBACE,WAAA,CACA,YAAA,CACA,SAAA,CACA,cAAA,CAEA,wBACE,SAAA,CAGF,yBACE,cAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,8CAAA,CACA,qCAAA,CACA,iBAAA,CACA,eAAA,CAEA,4CACE,8BAAA,CAGF,6BACE,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,KAAA,CACA,MAAA,CAGF,wCACE,iBAAA,CAGF,iCACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,sBAAA,CACA,uCAAA,CACA,eAAA,CAGF,gCACE,UAAA,CACA,WAAA,CACA,iBAAA,CACA,qBAAA,CACA,SAAA,CACA,KAAA,CACA,MAAA,CACA,sBAAA,CACA,iBAAA,CAIJ,oJAGE,WAAA,CAIA,gCACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,SAAA,CACA,sBAAA,CAGF,mCACE,iBAAA,CACA,KAAA,CACA,OAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,sBAAA,CAGF,8BACE,SAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,sBAAA,CAGF,mCACE,SAAA,CACA,SAAA,CACA,sBAAA,CACA,kDAAA,CACA,iBAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,cAAA,CAGF,sEAEE,UAAA,CACA,WAAA,CAKF,2FAEE,SAAA,CAGF,uGAEE,WAAA,CAMF,2DACE,SAAA,CAIJ,yCACE,SAAA,CACA,iBAAA,CACA,OAAA,CACA,QAAA,CACA,eAAA,CACA,qGAAA,CACA,2CAAA,CACA,0DAAA,CACA,2CAAA,CACA,oDAAA,CACA,qCAAA,CACA,iDAAA,CAGF,sCACE,YAAA,CACA,WAAA,CAEA,+CACE,sBAAA,CACA,oDACE,cAAA,CAGF,yDACE,cAAA,CACA,gBAAA,CACA,eAAA,CACA,WAAA",sourcesContent:["$assetsCdnUrl: 'https://cdn.liveshopping.bambuser.com';\n.floating-block-condensed {\n  width: 56px;\n  height: 56px;\n  text-transform: var(--live-label-text-transform, uppercase);\n  color: var(--live-label-text-color, #ffffff);\n  background-color: var(--live-label-bg-color, #e12147);\n  font-weight: var(--live-label-font-weight, normal);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 12px;\n  transition: opacity 0.2s;\n  opacity: 0;\n\n  &.visible {\n    opacity: 1;\n\n    .floating-ball {\n      text-align: center;\n      max-width: 60px;\n      word-break: break-word;\n      font-size: var(--live-label-font-size, 12px);\n    }\n  }\n}\n\n.floating-block {\n  width: 124px;\n  height: 226px;\n  opacity: 0;\n  cursor: pointer;\n\n  &.visible {\n    opacity: 1;\n  }\n\n  .graphic {\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    position: relative;\n    background-color: var(--graphic-bg-color, #000);\n    color: var(--graphic-text-color, #fff);\n    border-radius: 8px;\n    overflow: hidden;\n\n    &.without-background {\n      background-color: transparent;\n    }\n\n    > img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      position: absolute;\n      top: 0;\n      left: 0;\n    }\n\n    img:not([src]) {\n      visibility: hidden;\n    }\n\n    .player {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      opacity: 0;\n      transition: opacity 0.5s;\n      border-radius: var(--border-radius, 8px);\n      overflow: hidden;\n    }\n\n    .fader {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      background-color: #000;\n      opacity: 0;\n      top: 0;\n      left: 0;\n      transition: opacity 0.2s;\n      border-radius: 8px;\n    }\n  }\n\n  &.fader-active .graphic .fader,\n  .graphic:has(.cta:focus)a .fader,\n  .graphic:has(.cta-text:focus) .fader {\n    opacity: 0.65;\n  }\n\n  .graphic {\n    .close {\n      position: absolute;\n      top: 0;\n      right: 0;\n      width: 24px;\n      height: 24px;\n      padding: 10px;\n      z-index: 1;\n      transition: opacity 0.2s;\n    }\n\n    .condense {\n      position: absolute;\n      top: 0;\n      right: 0;\n      width: 44px;\n      height: 44px;\n      z-index: 1;\n      transition: opacity 0.2s;\n    }\n\n    .cta {\n      opacity: 0;\n      width: 44px;\n      height: 44px;\n      z-index: 1;\n      transition: opacity 0.2s;\n    }\n\n    .cta-text {\n      opacity: 0;\n      z-index: 1;\n      transition: opacity 0.2s;\n      border: 1px solid var(--graphic-border-color, #fff);\n      text-align: center;\n      padding: 8px;\n      margin-left: 16px;\n      margin-right: 16px;\n      font-size: 12px;\n    }\n\n    .cta > img,\n    .close > img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  &.fader-active .graphic {\n    .cta,\n    .cta-text {\n      opacity: 1;\n    }\n\n    .cta:hover,\n    .cta-text:hover {\n      opacity: 0.75;\n    }\n  }\n\n  .cta,\n  .cta-text {\n    &:focus {\n      opacity: 1;\n    }\n  }\n\n  .graphic .live-indicator {\n    z-index: 1;\n    position: absolute;\n    top: 7px;\n    left: 7px;\n    padding: 7px 8px;\n    font-family: var(--live-label-font-family, \"Haas Grot\", Helvetica, Arial, Verdana, Tahoma, sans-serif);\n    font-size: var(--live-label-font-size, 12px);\n    text-transform: var(--live-label-text-transform, uppercase);\n    color: var(--live-label-text-color, #ffffff);\n    background-color: var(--live-label-bg-color, #e12147);\n    border-radius: var(--border-radius, 0);\n    font-weight: var(--live-label-font-weight, normal);\n  }\n\n  &.landscape-orientation {\n    height: 124px;\n    width: 226px;\n\n    .graphic {\n      align-items: flex-start;\n      .cta {\n        margin-top: 3em;\n      }\n\n      .cta-text {\n        margin-top: 3em;\n        margin-right: 8px;\n        margin-left: 8px;\n        border: none;\n      }\n    }\n  }\n}\n"],sourceRoot:""}]);const r=a},6659:e=>{var t=Object.prototype.hasOwnProperty,i="~";function n(){}function o(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var r=new o(n,s||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],r]:e._events[l].push(r):(e._events[l]=r,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function r(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),r.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},r.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,a=new Array(s);o<s;o++)a[o]=n[o].fn;return a},r.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},r.prototype.emit=function(e,t,n,o,s,a){var r=i?i+e:e;if(!this._events[r])return!1;var l,c,d=this._events[r],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,o),!0;case 5:return d.fn.call(d.context,t,n,o,s),!0;case 6:return d.fn.call(d.context,t,n,o,s,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var A,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),h){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,o);break;default:if(!l)for(A=1,l=new Array(h-1);A<h;A++)l[A-1]=arguments[A];d[c].fn.apply(d[c].context,l)}}return!0},r.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},r.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},r.prototype.removeListener=function(e,t,n,o){var s=i?i+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var r=this._events[s];if(r.fn)r.fn!==t||o&&!r.once||n&&r.context!==n||a(this,s);else{for(var l=0,c=[],d=r.length;l<d;l++)(r[l].fn!==t||o&&!r[l].once||n&&r[l].context!==n)&&c.push(r[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},r.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prefixed=i,r.EventEmitter=r,e.exports=r}}]);
//# sourceMappingURL=acc65707.bundle.js.map